DROP VIEW V_OTC_ESTADO_ORDEN_TRABAJO;

DROP VIEW V_OTC_ESTADO_ORDEN_TRABAJOLst;

DROP VIEW V_OTC_TIPO_ORDEN_TRABAJO;

DROP VIEW V_OTC_TIPO_ORDEN_TRABAJOLst;

DROP VIEW V_OTM_ACTIVIDAD;

DROP VIEW V_OTM_ACTIVIDADLst;

DROP VIEW V_OTM_CATEGORIA_SERVICIO;

DROP VIEW V_OTM_CATEGORIA_SERVICIOLst;

DROP VIEW V_OTM_LUGAR_TRABAJO;

DROP VIEW V_OTM_LUGAR_TRABAJOLst;

DROP VIEW V_OTM_SECTOR_TALLER;

DROP VIEW V_OTM_SECTOR_TALLERLst;

DROP VIEW V_OTM_TIPO_LUGAR_UBICACION;

DROP VIEW V_OTM_TIPO_LUGAR_UBICACIONLst;

DROP VIEW V_OTM_UBICACION;

DROP VIEW V_OTM_UBICACIONLst;

DROP VIEW V_OTF_ADJUNTO_ORDEN_TRABAJO;

DROP VIEW V_OTF_ADJUNTO_ORDEN_TRABAJOLst;

DROP VIEW V_OTF_ORDEN_TRABAJO;

DROP VIEW V_OTF_ORDEN_TRABAJOLst;

DROP VIEW V_OTF_REVISION_ORDEN_TRABAJ;

DROP VIEW V_OTF_REVISION_ORDEN_TRABAJLst;

DROP VIEW V_OTF_PLANEACION_PREVENTIVO;

DROP VIEW V_OTF_PLANEACION_PREVENTIVOLst;

DROP VIEW V_OTP_PARAMETRO;

DROP VIEW V_OTP_PARAMETROLst;

DROP VIEW V_OTF_OPERARIO;

DROP VIEW V_OTF_OPERARIOLst;

DROP VIEW V_OTL_TRAZABILIDAD_PROCESO;

DROP VIEW V_OTL_TRAZABILIDAD_PROCESOLst;

DROP VIEW V_OTM_MOTIVO_RECHAZO;

DROP VIEW V_OTM_MOTIVO_RECHAZOLst;

DROP VIEW V_OTM_AUTORIZADO_DIRECTOR;

DROP VIEW V_OTM_AUTORIZADO_DIRECTORLst;

DROP VIEW V_OTM_AUTORIZADO_UBICACION;

DROP VIEW V_OTM_AUTORIZADO_UBICACIONLst;

DROP VIEW V_OTM_UNIDAD_UBICACION;

DROP VIEW V_OTM_UNIDAD_UBICACIONLst;

DROP VIEW V_OTF_UBICACION_FAVORITA;

DROP VIEW V_OTF_UBICACION_FAVORITALst;

DROP VIEW V_OTP_PARAMETRO_GLOBAL;

DROP VIEW V_OTP_PARAMETRO_GLOBALLst;

DROP VIEW V_OTP_PARAMETRO_UBICACION;

DROP VIEW V_OTP_PARAMETRO_UBICACIONLst;

DROP VIEW V_OTM_ESPACIO;

DROP VIEW V_OTM_ESPACIOLst;

DROP VIEW V_OTM_SUBCOMPONENTE;

DROP VIEW V_OTM_SUBCOMPONENTELst; 

DROP VIEW V_OTM_REQUERIMIENTO;

DROP VIEW V_OTM_REQUERIMIENTOLst;

DROP VIEW V_OTT_ADJUNTO_ORDEN_TRABAJO;

DROP VIEW V_OTT_ADJUNTO_ORDEN_TRABAJOLst;

DROP VIEW V_OTT_ORDEN_TRABAJO;

DROP VIEW V_OTT_ORDEN_TRABAJOLst;

DROP VIEW V_OTH_ORDEN_TRABAJOLst;

DROP VIEW V_OTT_REVISION_ORDEN_TRABAJ;

DROP VIEW V_OTT_REVISION_ORDEN_TRABAJLst;

DROP VIEW V_OTT_TRAZABILIDAD_PROCESO;

DROP VIEW V_OTT_TRAZABILIDAD_PROCESOLst;

DROP VIEW V_OTT_FICHA_TECNICA_GENERAL;

DROP VIEW V_OTT_FICHA_TECNICA_GENERALLst;

DROP VIEW V_OTT_FICHA_TECNICA_DETALLE;

DROP VIEW V_OTT_FICHA_TECNICA_DETALLELst;

DROP VIEW V_OTT_FICHA_TECNICA_ESPACIO;

DROP VIEW V_OTT_FICHA_TECNICA_ESPACIOLst;

DROP VIEW V_OTT_FICHA_TECNICA_SUBCOMP;

DROP VIEW V_OTT_FICHA_TECNICA_SUBCOMPLst;

DROP VIEW V_OTF_EXCEPCION_PERIODO;

DROP VIEW V_OTF_EXCEPCION_PERIODOLst;

DROP VIEW V_OTM_UNIDAD_TIEMPO;

DROP VIEW V_OTM_UNIDAD_TIEMPOLst;

DROP VIEW V_OTF_PERIODO_CIERRE;

DROP VIEW V_OTF_PERIODO_CIERRELst;

DROP VIEW V_OTM_AREA_PROFESIONAL;

DROP VIEW V_OTM_AREA_PROFESIONALLst;

DROP VIEW V_OTF_OPERARIO_AREA;

DROP VIEW V_OTF_OPERARIO_AREALst;

DROP VIEW V_OTM_TIPO_DOCUMENTO;

DROP VIEW V_OTM_TIPO_DOCUMENTOLst;

DROP VIEW V_OTM_ETAPA_ORDEN_TRABAJO;

DROP VIEW V_OTM_ETAPA_ORDEN_TRABAJOLst;

DROP VIEW V_OTT_OPERARIO_ORDEN_TRAB;

DROP VIEW V_OTT_OPERARIO_ORDEN_TRABLst;

DROP VIEW V_OTT_TIEMPO_OPERARIO;

DROP VIEW V_OTT_TIEMPO_OPERARIOLst;

DROP VIEW V_OTT_VIABILIDAD_TECNICA;

DROP VIEW V_OTT_VIABILIDAD_TECNICALst;

DROP VIEW V_OTT_ANTEPROYECTO;

DROP VIEW V_OTT_ANTEPROYECTOLst;

DROP VIEW V_OTT_DOCUMENTO_ANTEPROYECT;

DROP VIEW V_OTT_DOCUMENTO_ANTEPROYECTLst;

DROP VIEW V_OTM_UNIDAD_ENCARGADA;

DROP VIEW V_OTM_UNIDAD_ENCARGADALst;

DROP VIEW V_OTM_RUBRO_DECISION_INICIA;

DROP VIEW V_OTM_RUBRO_DECISION_INICIALst;

DROP VIEW V_OTT_DESICION_INICIAL;

DROP VIEW V_OTT_DESICION_INICIALLst;

DROP VIEW V_OTM_TIPO_OBRA;

DROP VIEW V_OTM_TIPO_OBRALst;

DROP VIEW V_OTT_ORDN_TRAB_DEC_INICIAL;

DROP VIEW V_OTT_ORDN_TRAB_DEC_INICIALLst;

DROP VIEW V_OTT_INFORME_PRESUPUESTO;

DROP VIEW V_OTT_INFORME_PRESUPUESTOLst;

DROP VIEW V_OTM_VIA_CONTRATO;

DROP VIEW V_OTM_VIA_CONTRATOLst;

DROP VIEW V_OTH_CONTRATACION;

DROP VIEW V_OTH_CONTRATACIONLst;

DROP VIEW V_OTM_ETAPA_VIA_CONTRATO;

DROP VIEW V_OTM_ETAPA_VIA_CONTRATOLst;

DROP VIEW V_OTT_CONTRATACION;

DROP VIEW V_OTT_CONTRATACIONLst;

DROP VIEW V_OTM_ENCARGADO_CONTRATO;

DROP VIEW V_OTM_ENCARGADO_CONTRATOLst;

DROP VIEW V_OTT_DOCUMENTO_CONTRATACION;

DROP VIEW V_OTT_DOCUMENTO_CONTRATLst;

DROP VIEW V_OTF_FICHA_TECNICA_DETALLE;

DROP VIEW V_OTF_FICHA_TECNICA_DETALLELst;

DROP VIEW V_OTF_FICHA_TECNICA_ESPACIO;

DROP VIEW V_OTF_FICHA_TECNICA_ESPACIOLst;

DROP VIEW V_OTF_FICHA_TECNICA_GENERAL;

DROP VIEW V_OTF_FICHA_TECNICA_GENERALLst;

DROP VIEW V_OTF_FICHA_TECNICA_SUBCOMP;

DROP VIEW V_OTF_FICHA_TECNICA_SUBCOMPLst;

DROP VIEW V_OTF_PRE_ORDEN_TRABAJO;

DROP VIEW V_OTF_PRE_ORDEN_TRABAJOLst;

DROP VIEW V_OTF_REVISION_PRE_ORDEN_TRA;

DROP VIEW V_OTF_REVISION_PRE_ORDENLst;

DROP VIEW V_OTT_LINEA_ADJUDICACION;

DROP VIEW V_OTT_LINEA_ADJUDICACIONLst;

DROP VIEW V_OTM_SUBCATEGORIA_MATERIAL;

DROP VIEW V_OTM_SUBCATEGORIA_MATERIALLst;

DROP VIEW V_OTM_CATEGORIA_MATERIAL;

DROP VIEW V_OTM_CATEGORIA_MATERIALLst;

DROP VIEW V_OTM_SUBCATEGORIA_CATEGOR;

DROP VIEW V_OTM_SUBCATEGORIA_CATEGORLst;

DROP VIEW V_OTM_UNIDAD_MEDIDA;

DROP VIEW V_OTM_UNIDAD_MEDIDALst;

DROP VIEW V_OTM_ALMACEN_BODEGA;

DROP VIEW V_OTM_ALMACEN_BODEGALst;

DROP VIEW V_OTM_VIA_COMPRA_CONTRATO;

DROP VIEW V_OTM_VIA_COMPRA_CONTRATOLst;

DROP VIEW V_OTM_MATERIAL;

DROP VIEW V_OTM_MATERIALLst;

DROP VIEW V_OTF_INVENTARIO;

DROP VIEW V_OTF_INVENTARIOLst;

DROP VIEW V_OTL_DETALLE_MATERIAL;

DROP VIEW V_OTL_DETALLE_MATERIALLst;

DROP VIEW V_OTT_DETALLE_MATERIAL;

DROP VIEW V_OTT_DETALLE_MATERIALLst;

DROP VIEW V_OTT_SOLICITUD_MATERIAL;

DROP VIEW V_OTT_SOLICITUD_MATERIALLst;

DROP VIEW V_OTT_DETALLE_RETIRO;

DROP VIEW V_OTT_DETALLE_RETIROLst;

DROP VIEW V_OTT_SOLICITUD_RETIRO;

DROP VIEW V_OTT_SOLICITUD_RETIROLst;

DROP VIEW V_OTT_SOLICITUD_REINGRESO;

DROP VIEW V_OTT_SOLICITUD_REINGRESOLst;

DROP VIEW V_OTM_TIPO_INCIDENTE;

DROP VIEW V_OTM_TIPO_INCIDENTELst;

DROP VIEW V_OTF_ADJUNTO_INCIDENTE;

DROP VIEW V_OTF_ADJUNTO_INCIDENTELst;

DROP VIEW V_OTF_INCIDENTE_ALMACEN;

DROP VIEW V_OTF_INCIDENTE_ALMACENLst;

DROP VIEW V_OTC_ESTADO_GESTION_COMPRA;

DROP VIEW V_OTC_ESTADO_GESTION_COMPRALst;

DROP VIEW V_OTL_TRAZABIL_GESTION_COMP;

DROP VIEW V_OTL_TRAZABIL_GESTION_COMPLst;

DROP VIEW V_OTM_FLUJO_GESTION_COMPRA;

DROP VIEW V_OTM_FLUJO_GESTION_COMPRALst;

DROP VIEW V_OTT_GESTION_COMPRA;

DROP VIEW V_OTT_GESTION_COMPRALst;

DROP VIEW V_OTT_LINEA_GESTION_COMPRA;

DROP VIEW V_OTT_LINEA_GESTION_COMPRALst;

DROP VIEW V_OTM_PROVEEDOR;

DROP VIEW V_OTM_PROVEEDORLst;

DROP VIEW V_OTM_CORREO_PROVEEDOR;

DROP VIEW V_OTM_CORREO_PROVEEDORLst;

DROP VIEW V_OTM_TELEFONO_PROVEEDOR;

DROP VIEW V_OTM_TELEFONO_PROVEEDORLst;

DROP VIEW V_OTC_ESTADO_TRASLADO;

DROP VIEW V_OTC_ESTADO_TRASLADOLst;

DROP VIEW V_OTL_LINEA_TRASLADO;

DROP VIEW V_OTL_LINEA_TRASLADOLst;

DROP VIEW V_OTL_SOLICITUD_TRASLADO;

DROP VIEW V_OTL_SOLICITUD_TRASLADOLst;

DROP VIEW V_OTL_TRAZABIL_SOL_TRASLADO;

DROP VIEW V_OTL_TRAZABIL_SOL_TRASLADOLst;

DROP VIEW V_OTT_LINEA_TRASLADO;

DROP VIEW V_OTT_LINEA_TRASLADOLst;

DROP VIEW V_OTT_SOLICITUD_TRASLADO;

DROP VIEW V_OTT_SOLICITUD_TRASLADOLst;

DROP VIEW V_OTT_ADJUNTO_COTIZACION;

DROP VIEW V_OTT_ADJUNTO_COTIZACIONLst;

DROP VIEW V_OTT_GRUPO_GESTION_COMPRA;

DROP VIEW V_OTT_GRUPO_GESTION_COMPRALst;

DROP VIEW V_OTT_OFERTA_PROVEEDOR;

DROP VIEW V_OTT_OFERTA_PROVEEDORLst;

DROP VIEW V_OTT_PROVEEDOR_COTIZACION;

DROP VIEW V_OTT_PROVEEDOR_COTIZACIONLst;

DROP VIEW V_OTT_ADJUNTO_GESTION_COMPR;

DROP VIEW V_OTT_ADJUNTO_GESTION_COMPRLst;

DROP VIEW V_OTM_ENCARGADO_ALMACEN;

DROP VIEW V_OTM_ENCARGADO_ALMACENLST;

DROP VIEW ORDENES_TRABAJO.V_OTL_DET_APROVISIONAMIENTO;

DROP VIEW ORDENES_TRABAJO.V_OTL_DET_APROVISIONAMIENTOLst;

DROP VIEW ORDENES_TRABAJO.V_OTT_APROVISIONAMIENTO;

DROP VIEW ORDENES_TRABAJO.V_OTT_APROVISIONAMIENTOLst;

DROP VIEW ORDENES_TRABAJO.V_OTT_DET_APROVISIONAMIENTO;

DROP VIEW ORDENES_TRABAJO.V_OTT_DET_APROVISIONAMIENTOLst;

DROP VIEW ORDENES_TRABAJO.V_OTC_ESTADO_AJUSTE;

DROP VIEW ORDENES_TRABAJO.V_OTC_ESTADO_AJUSTELst;

DROP VIEW ORDENES_TRABAJO.V_OTL_TRAZABILIDAD_AJUSTE;

DROP VIEW ORDENES_TRABAJO.V_OTL_TRAZABILIDAD_AJUSTELst;

DROP VIEW ORDENES_TRABAJO.V_OTT_AJUSTE_INVENTARIO;

DROP VIEW ORDENES_TRABAJO.V_OTT_AJUSTE_INVENTARIOLst;

DROP VIEW ORDENES_TRABAJO.V_OTT_DETALLE_AJUSTE;

DROP VIEW ORDENES_TRABAJO.V_OTT_DETALLE_AJUSTELst;

DROP VIEW ORDENES_TRABAJO.V_OTT_GESTION_INGRESO_MATER;

DROP VIEW ORDENES_TRABAJO.V_OTT_GESTION_INGRESO_MATERLst;

DROP VIEW ORDENES_TRABAJO.V_OTT_ADJUNTO_GESTION_INGR;

DROP VIEW ORDENES_TRABAJO.V_OTT_ADJUNTO_GESTION_INGRLst;

DROP VIEW ORDENES_TRABAJO.V_OTT_DETALLE_GESTION_INGR;

DROP VIEW ORDENES_TRABAJO.V_OTT_DETALLE_GESTION_INGRLst;

DROP VIEW ORDENES_TRABAJO.V_OTL_TRAZABIL_GESTION_INGR;

DROP VIEW ORDENES_TRABAJO.V_OTL_TRAZABIL_GESTION_INGRLst;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_INFORME_PRESUPUESTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			06/04/2016 09:05:42 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_INFORME_PRESUPUESTO
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ESTIMACION_PRESUPUESTARIA, 0) AS ESTIMACION_PRESUPUESTARIA, 
	NVL(TIEMPO_RESPUESTA, 0) AS TIEMPO_RESPUESTA, 
	NVL(ID_UNIDAD_TIEMPO, 0) AS ID_UNIDAD_TIEMPO, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_INFORME_PRESUPUESTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_INFORME_PRESUPUESTOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			06/04/2016 09:05:42 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_INFORME_PRESUPUESTO
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ESTIMACION_PRESUPUESTARIA, 0) AS "ESTIMACION_PRESUPUESTARIA", 
	NVL(TIEMPO_RESPUESTA, 0) AS "TIEMPO_RESPUESTA", 
	NVL(ID_UNIDAD_TIEMPO, 0) AS "ID_UNIDAD_TIEMPO", 
	NVL(DETALLE, '-') AS "DETALLE", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_INFORME_PRESUPUESTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ORDN_TRAB_DEC_INICIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/03/2016 08:39:28 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ORDN_TRAB_DEC_INICIAL
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_TIPO_OBRA, 0) AS ID_TIPO_OBRA, 
	NVL(ID_RUBRO_DECISION_INICIA, 0) AS ID_RUBRO_DECISION_INICIA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(VALOR, '-') AS VALOR
FROM OTT_ORDN_TRAB_DEC_INICIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ORDN_TRAB_DEC_INICIALLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            31/03/2016 08:39:28 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_ORDN_TRAB_DEC_INICIAL
    
    CONTROL DE CAMBIOS
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            01/04/2016
    Descripcion:     Se agregan los campos DESCRIPCION_RUBRO,NOMBRE_PROYECTO, DESC_TIPO_OBRA, FECHA_DEC_INIC
    
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
    NVL(ID_TIPO_OBRA, 0) AS "ID_TIPO_OBRA", 
    NVL(ID_RUBRO_DECISION_INICIA, 0) AS "ID_RUBRO_DECISION_INICIA", 
    (SELECT B.DESCRIPCION FROM OTM_RUBRO_DECISION_INICIA B WHERE B.ID_RUBRO_DECISION_INICIA = A.ID_RUBRO_DECISION_INICIA) AS DESCRIPCION_RUBRO,
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
    NVL(VALOR, '-') AS "VALOR",
    (SELECT B.NOMBRE_PROYECTO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION  = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS NOMBRE_PROYECTO,
    (SELECT B.DESCRIPCION FROM OTM_TIPO_OBRA B WHERE B.ID_TIPO_OBRA  = A.ID_TIPO_OBRA) AS DESC_TIPO_OBRA,
    (SELECT B.FECHA FROM OTT_DESICION_INICIAL B WHERE B.ID_UBICACION  = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS FECHA_DEC_INIC
FROM OTT_ORDN_TRAB_DEC_INICIAL A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_OBRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			30/03/2016 10:48:00 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_OBRA
*/
SELECT
	NVL(ID_TIPO_OBRA, 0) AS ID_TIPO_OBRA, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_TIPO_OBRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_OBRALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			30/03/2016 10:48:00 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_OBRA
*/
SELECT
	NVL(ID_TIPO_OBRA, 0) AS "ID_TIPO_OBRA", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESC_ESTADO",
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_TIPO_OBRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_AUTORIZADO_UBICACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/09/2015 09:44:09 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_AUTORIZADO_UBICACION
*/
SELECT
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_AUTORIZADO_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_AUTORIZADO_UBICACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/09/2015 09:44:09 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_AUTORIZADO_UBICACION
	
	CONTROL DE CAMBIOS
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			02/10/2015 
	Descripcion:	SE AGREGAN LOS CAMPOS DESC_UBICACION Y NOMBRE_AUTORIZADO
	
*/
SELECT
    NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA", 
    (SELECT B.DESCRIPCION FROM OTM_UBICACION B WHERE B.ID_UBICACION = A.ID_UBICACION_ADMINISTRA) AS "DESC_UBICACION",
    NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
	(SELECT B.ID_PERSONAL FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) AS "ID_PERSONAL",
     (SELECT B.NOMBRE FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
    || ' ' || (SELECT B.APELLIDO1 FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
    || ' ' || (SELECT B.APELLIDO2 FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)  AS "NOMBRE_AUTORIZADO",
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_AUTORIZADO_UBICACION A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_MOTIVO_RECHAZO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			22/09/2015 02:37:24 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_MOTIVO_RECHAZO
*/
SELECT
	NVL(ID_MOTIVO_RECHAZO, 0) AS ID_MOTIVO_RECHAZO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_MOTIVO_RECHAZO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_MOTIVO_RECHAZOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			22/09/2015 02:37:24 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_MOTIVO_RECHAZO
*/
SELECT
	NVL(ID_MOTIVO_RECHAZO, 0) AS "ID_MOTIVO_RECHAZO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ESTADO, '-') AS "ESTADO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_MOTIVO_RECHAZO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_TRAZABILIDAD_PROCESO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/09/2015 04:21:50 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABILIDAD_PROCESO
	
	CONTROL DE CAMBIOS
	
	Autor:            Carlos Gomez Ondoy
    Fecha:            06/10/2015 
    Descripcion:      Se elimina el campo fecha hora registro
	
	Autor:            Carlos Gomez Ondoy
    Fecha:            08/10/2015 
    Descripcion:      Se agrega el campo ID_UBICACION
	
*/
SELECT
	NVL(ID_TRAZABILIDAD_PROCESO, 0) AS ID_TRAZABILIDAD_PROCESO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(NUM_EMPLEADO_EJECUTA, 0) AS NUM_EMPLEADO_EJECUTA, 
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS ESTADO_ORDEN_TRABAJO, 
	NVL(FECHA_HORA_EJECUCION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_EJECUCION, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_TRAZABILIDAD_PROCESO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_TRAZABILIDAD_PROCESOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            14/09/2015 04:21:50 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTL_TRAZABILIDAD_PROCESO
	
	CONTROL DE CAMBIOS
	
	Autor:            Carlos Gomez Ondoy
    Fecha:            01/10/2015 
    Descripcion:      Se elimina el campo fecha hora registro
	
*/
SELECT
    NVL(ID_TRAZABILIDAD_PROCESO, 0) AS "ID_TRAZABILIDAD_PROCESO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(CONSECUTIVO, 0) AS "CONSECUTIVO", 
    NVL(TRAZABILIDAD.NUM_EMPLEADO_EJECUTA, 0) AS "NUM_EMPLEADO_EJECUTA", 
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE TRAZABILIDAD.NUM_EMPLEADO_EJECUTA = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_EMPLEADO,
    NVL(TRAZABILIDAD.ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO", 
    (SELECT B.DESCRIPCION  FROM OTC_ESTADO_ORDEN_TRABAJO B WHERE B.ESTADO_ORDEN_TRABAJO = TRAZABILIDAD.ESTADO_ORDEN_TRABAJO) AS DESC_ESTADO_ORDEN,
    NVL(FECHA_HORA_EJECUCION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_EJECUCION", 
    NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_TRAZABILIDAD_PROCESO TRAZABILIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_OPERARIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			10/09/2015 10:50:58 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_OPERARIO
*/
SELECT
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_OPERARIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_OPERARIOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            10/09/2015 10:50:58 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTF_OPERARIO
    
    ///////////////////////////////CONTROL DE CAMBIOS////////////////////////////////////
    
    Autor: Cesar Bermudez Garcia
    Fecha: 26 / 01 /2016
    Descripcion: Se agregan los cambios para obtener el área y el estado de dicho operario.
    
*/
SELECT
    NVL(OPERARIO.ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
    NVL(OPERARIO.NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE OPERARIO.NUM_EMPLEADO = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_EMPLEADO,
     (SELECT ID_PERSONAL FROM EU_EMPLEADOS EMPLEADOS WHERE OPERARIO.NUM_EMPLEADO = EMPLEADOS.NUM_EMPLEADO) AS CEDULA,
    NVL(OPERARIO.USUARIO, '-') AS "USUARIO",
     OPA.CATEGORIA_LABORAL,OPA.ESTADO,
     (CASE CATEGORIA_LABORAL
        WHEN 'PRO' THEN 'Profesional'
        WHEN 'OPE' THEN 'Operario'
        END) "CATEGORIA",
      (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(OPERARIO.TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTF_OPERARIO OPERARIO,OTF_OPERARIO_AREA OPA
WHERE OPA.NUM_EMPLEADO=OPERARIO.NUM_EMPLEADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTP_PARAMETRO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/09/2015 01:54:27 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTP_PARAMETRO
*/
SELECT
	NVL(ID_PARAMETRO, 0) AS ID_PARAMETRO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(VALOR, '-') AS VALOR, 
	NVL(VALOR_DECIMAL, 0) AS VALOR_DECIMAL, 
	NVL(PROTEGIDO, 0) AS PROTEGIDO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTP_PARAMETRO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTP_PARAMETROLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            09/09/2015 01:54:27 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTP_PARAMETRO
*/
SELECT
    NVL(ID_PARAMETRO, 0) AS "ID_PARAMETRO", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(VALOR, '-') AS "VALOR", 
    NVL(VALOR_DECIMAL, 0) AS "VALOR_DECIMAL", 
    (CASE WHEN VALOR_DECIMAL > 0 THEN to_char(VALOR_DECIMAL) 
        ELSE VALOR
    END) "VALOR_UNION",
    NVL(PROTEGIDO, 0) AS "PROTEGIDO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTP_PARAMETRO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_ADJUNTO_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 10:39:12 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_ADJUNTO_ORDEN_TRABAJO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			08/10/2015 
	Descripcion:	se agrega el campo ID_UBICACION
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			01/02/2016
	Descripcion:	se agrega el campo ID_TIPO_DOCUMENTO, ID_ETAPA_ORDEN_TRABAJO, DESCRIPCION
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO,
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO,
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS ID_ADJUNTO_ORDEN_TRABAJO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_ADJUNTO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_ADJUNTO_ORDEN_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 10:39:12 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_ADJUNTO_ORDEN_TRABAJO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			08/10/2015 
	Descripcion:	se agrega el campo ID_UBICACION
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			01/02/2016
	Descripcion:	se agrega el campo ID_TIPO_DOCUMENTO, ID_ETAPA_ORDEN_TRABAJO, DESCRIPCION
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO,
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO,
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(CONSECUTIVO, 0) AS "CONSECUTIVO", 
	NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS "ID_ADJUNTO_ORDEN_TRABAJO", 
	NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
	NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTF_ADJUNTO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 10:39:12 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_ORDEN_TRABAJO
		
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			08/10/2015 
	Descripcion:	se agrega el campo ID_UBICACION
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(TIPO_ORDEN_TRABAJO, '-') AS TIPO_ORDEN_TRABAJO, 
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS ESTADO_ORDEN_TRABAJO, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_CATEGORIA_SERVICIO, 0) AS ID_CATEGORIA_SERVICIO, 
	NVL(ID_ACTIVIDAD, 0) AS ID_ACTIVIDAD, 
	NVL(ID_LUGAR_TRABAJO, 0) AS ID_LUGAR_TRABAJO, 
	NVL(FECHA_HORA_SOLICITA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_SOLICITA, 
	NVL(COD_UNIDAD_SIRH, 0) AS COD_UNIDAD_SIRH, 
	NVL(NOMBRE_PERSONA_CONTACTO, '-') AS NOMBRE_PERSONA_CONTACTO, 
	NVL(TELEFONO, '-') AS TELEFONO, 
	NVL(SENNAS_EXACTAS, '-') AS SENNAS_EXACTAS, 
	NVL(DESCRIPCION_TRABAJO, '-') AS DESCRIPCION_TRABAJO, 
	NVL(NUMERO_ORDEN, 0) AS NUMERO_ORDEN, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP,
    NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER,
	NVL(INCLUIDA_EN_RECEPCION, 0) AS INCLUIDA_EN_RECEPCION
FROM OTF_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_ORDEN_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 10:39:12 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_ORDEN_TRABAJO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez
	Fecha:			03/09/2015
	Descripcion:	Se agregan los campo DESC_CATEGORIA_SERVICIO Y DESC_ESTADO_ORDEN
	
    Autor:			Carlos Gómez
	Fecha:			04/09/2015
	Descripcion:	Se agrega el campo PARTE_SENNAS_EXACTAS
	
	Autor:			Carlos Gómez
	Fecha:			07/09/2015
	Descripcion:	Se agregan los campos NOMBRE_SOLICITANTE, ID_PERSONAL
	
	Autor: 			Mauricio Salas
	Fecha: 			14/09/2015
	Descripcion:	Se agregan los campos DESC_ACTIVIDAD y DESC_LUGAR_TRABAJO
	
	Autor:			Carlos Gómez
	Fecha:			17/09/2015
	Descripcion:	Se agrega el campo INCLUIDA_EN_RECEPCION
	
	Autor: 			Mauricio Salas
	Fecha:			17/09/2015
	Descripcion:	Se agrega el campo FECHA_ENVIO_APROBACION
	
	Autor: 			Mauricio Salas
	Fecha:			18/09/2015
	Descripcion:	Se agrega el campo DESC_TIPO_ORDEN
	
	Autor:			Mauricio Salas
	Fecha: 			25/09/2015
	Descripcion:	Se agrega el campo FECHA_EJECUTA_TRAZABILIDAD, REQ_FICHA_TECNICA para procedimiento recurrente de cambiar estado de la OT a LIQ
	
	Autor:			Carlos Gómez
	Fecha: 			01/10/2015
	Descripcion:	Se agrega el campo MOTIVO_NO_CONFORME
	
	Autor:			Carlos Gómez
	Fecha: 			08/10/2015
	Descripcion:	Se agrega el campo ID_UBICACION
	
	Autor:			Carlos Gómez
	Fecha: 			04/11/2015
	Descripcion:	MODIFICACIONES VARIAS, PARA ID_UBICACION
	
	Autor:			Carlos Gómez
	Fecha: 			25/11/2015
	Descripcion:	SE AGREGA EL CAMPO ES_EMERGENCIA
	
*/

   SELECT NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (A.ANNO, 0) AS "ANNO",
          NVL (A.CONSECUTIVO, 0) AS "CONSECUTIVO",
          NVL (TIPO_ORDEN_TRABAJO, '-') AS "TIPO_ORDEN_TRABAJO",
          NVL (ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO",
          (SELECT B.DESCRIPCION
             FROM OTC_ESTADO_ORDEN_TRABAJO B
            WHERE B.ESTADO_ORDEN_TRABAJO = A.ESTADO_ORDEN_TRABAJO)
             AS DESC_ESTADO_ORDEN,
          (SELECT B.ID_PERSONAL
             FROM EU_EMPLEADOS B
            WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS "ID_PERSONAL",
          NVL (NUM_EMPLEADO, 0) AS "NUM_EMPLEADO",
             (SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS "NOMBRE_SOLICITANTE",
          NVL (ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO",
          (SELECT B.DESCRIPCION
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
             AS DESC_CATEGORIA_SERVICIO,
          (SELECT B.REQUIERE_FICHA_TECNICA
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
             AS REQ_FICHA_TECNICA,
          NVL (ID_ACTIVIDAD, 0) AS "ID_ACTIVIDAD",
          (SELECT B.DESCRIPCION
             FROM OTM_ACTIVIDAD B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO
                  AND B.ID_ACTIVIDAD = A.ID_ACTIVIDAD)
             AS DESC_ACTIVIDAD,
          NVL (ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO",
          (SELECT B.NOMBRE
             FROM OTM_LUGAR_TRABAJO B
            WHERE B.ID_LUGAR_TRABAJO = A.ID_LUGAR_TRABAJO)
             AS DESC_LUGAR_TRABAJO,
          (SELECT B.FECHA_HORA_EJECUCION
             FROM OTL_TRAZABILIDAD_PROCESO B
            WHERE     B.ANNO = A.ANNO
                  AND B.CONSECUTIVO = A.CONSECUTIVO
                  AND B.ID_UBICACION = A.ID_UBICACION
                  AND B.ESTADO_ORDEN_TRABAJO = 'PRC')
             AS FECHA_EJECUTA_TRAZABILIDAD,
          NVL (FECHA_HORA_SOLICITA, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "FECHA_HORA_SOLICITA",
          NVL (COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH",
          NVL (NOMBRE_PERSONA_CONTACTO, '-') AS "NOMBRE_PERSONA_CONTACTO",
          NVL (TELEFONO, '-') AS "TELEFONO",
          NVL (SENNAS_EXACTAS, '-') AS "SENNAS_EXACTAS",
          NVL (SUBSTR (SENNAS_EXACTAS, 0, 20), '-') AS "PARTE_SENNAS_EXACTAS",
          NVL (DESCRIPCION_TRABAJO, '-') AS "DESCRIPCION_TRABAJO",
          NVL (NUMERO_ORDEN, 0) AS "NUMERO_ORDEN",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          NVL (INCLUIDA_EN_RECEPCION, 0) AS "INCLUIDA_EN_RECEPCION",
          (CASE
              WHEN EXISTS
                      (SELECT 1
                         FROM OTL_TRAZABILIDAD_PROCESO B
                        WHERE     A.CONSECUTIVO = B.CONSECUTIVO
                              AND A.ANNO = B.ANNO
                              AND A.ID_UBICACION = B.ID_UBICACION
                              AND B.ESTADO_ORDEN_TRABAJO = 'PEN')
              THEN
                 (SELECT MIN (C.FECHA_HORA_EJECUCION)
                    FROM OTL_TRAZABILIDAD_PROCESO C
                   WHERE     A.CONSECUTIVO = C.CONSECUTIVO
                         AND A.ANNO = C.ANNO
                         AND A.ID_UBICACION = C.ID_UBICACION
                         AND C.ESTADO_ORDEN_TRABAJO = 'PEN')
              ELSE
                 (SELECT MIN (C.FECHA_HORA_EJECUCION)
                    FROM OTL_TRAZABILIDAD_PROCESO C
                   WHERE     A.CONSECUTIVO = C.CONSECUTIVO
                         AND A.ANNO = C.ANNO
                         AND A.ID_UBICACION = C.ID_UBICACION
                         AND C.ESTADO_ORDEN_TRABAJO = 'ASG')
           END)
             "FECHA_ENVIO_APROBACION",
          (SELECT B.DESCRIPCION
             FROM OTC_TIPO_ORDEN_TRABAJO B
            WHERE B.TIPO_ORDEN_TRABAJO = A.TIPO_ORDEN_TRABAJO)
             AS DESC_TIPO_ORDEN,
          NVL (ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER,
          (SELECT B.OBSERVACIONES
             FROM V_OTL_TRAZABILIDAD_MOTIVO_NCF B
            WHERE     B.ID_UBICACION = A.ID_UBICACION
                  AND B.ANNO = A.ANNO
                  AND B.CONSECUTIVO = A.CONSECUTIVO
                  AND ROWNUM = 1)
             AS MOTIVO_NO_CONFORME,
             ( CASE TIPO_ORDEN_TRABAJO
              WHEN 'EME' THEN 1
              ELSE 0
              END)  AS ES_EMERGENCIA
     FROM OTF_ORDEN_TRABAJO A;

-------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_REVISION_ORDEN_TRABAJ
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 10:39:12 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_REVISION_ORDEN_TRABAJ
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez
	Fecha: 			08/10/2015
	Descripcion:	Se agrega el campo ID_UBICACION
	
*/
SELECT
	NVL(ID_REVISION_ORDEN_TRABAJ, 0) AS ID_REVISION_ORDEN_TRABAJ, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(ESTADO, '-') AS ESTADO
FROM OTF_REVISION_ORDEN_TRABAJ;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_REVISION_ORDEN_TRABAJLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 10:39:12 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_REVISION_ORDEN_TRABAJ
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez
	Fecha: 			08/10/2015
	Descripcion:	Se agrega el campo ID_UBICACION
	
*/
SELECT
	NVL(ID_REVISION_ORDEN_TRABAJ, 0) AS "ID_REVISION_ORDEN_TRABAJ", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(CONSECUTIVO, 0) AS "CONSECUTIVO", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(ESTADO, '-') AS "ESTADO"
FROM OTF_REVISION_ORDEN_TRABAJ;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_ESTADO_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_ORDEN_TRABAJO
*/
SELECT
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS ESTADO_ORDEN_TRABAJO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION
FROM OTC_ESTADO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_ESTADO_ORDEN_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_ORDEN_TRABAJO
*/
SELECT
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION"
FROM OTC_ESTADO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_TIPO_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_TIPO_ORDEN_TRABAJO
*/
SELECT
	NVL(TIPO_ORDEN_TRABAJO, '-') AS TIPO_ORDEN_TRABAJO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION
FROM OTC_TIPO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_TIPO_ORDEN_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_TIPO_ORDEN_TRABAJO
*/
SELECT
	NVL(TIPO_ORDEN_TRABAJO, '-') AS "TIPO_ORDEN_TRABAJO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION"
FROM OTC_TIPO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ACTIVIDAD
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ACTIVIDAD
*/
SELECT
	NVL(ID_CATEGORIA_SERVICIO, 0) AS ID_CATEGORIA_SERVICIO, 
	NVL(ID_ACTIVIDAD, 0) AS ID_ACTIVIDAD, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(DESCRIPCION_AMPLIADA, '-') AS DESCRIPCION_AMPLIADA, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_ACTIVIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ACTIVIDADLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ACTIVIDAD
	
	Autor:Mauricio Salas
	Descripcion: Ajuste para traer el nombre del Sector, y cambiar el estado por Activo o Inactivo
*/
SELECT
	NVL(ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO", 
	NVL(ACTIVIDAD.ID_ACTIVIDAD, 0) AS "ID_ACTIVIDAD", 
	NVL(ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
	(SELECT NOMBRE FROM OTM_SECTOR_TALLER SECTOR_TALLER WHERE  ACTIVIDAD.ID_SECTOR_TALLER = SECTOR_TALLER.ID_SECTOR_TALLER ) AS SECTOR,
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(DESCRIPCION_AMPLIADA, '-') AS "DESCRIPCION_AMPLIADA", 
	NVL(ESTADO, '-') AS "ESTADO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_ACTIVIDAD ACTIVIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_CATEGORIA_SERVICIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_CATEGORIA_SERVICIO
	
	Autor: Mauricio Salas
	Descripcion: Se agrega campo ID_UBICACION_ADMINISTRA
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			04/12/2015
	Descripcion:	se agrega el campo SIGLAS_ORDEN_TRABAJO_HIJA
	
	Autor:			César Bermúdez García
	Fecha:			15/1/2016
	Descripcion:	se agrega el campo OCULTAR_CATEGORIA
	
*/
SELECT
	NVL(ID_CATEGORIA_SERVICIO, 0) AS ID_CATEGORIA_SERVICIO, 
	NVL(NUM_EMPLEADO_SUPERVISOR, 0) AS NUM_EMPLEADO_SUPERVISOR, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP,
	NVL(REQUIERE_FICHA_TECNICA, 0) AS "REQUIERE_FICHA_TECNICA",
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA,
	NVL(SIGLAS_ORDEN_TRABAJO_HIJA, '-') AS SIGLAS_ORDEN_TRABAJO_HIJA,
	NVL(OCULTAR_CATEGORIA, 0) AS OCULTAR_CATEGORIA 
FROM OTM_CATEGORIA_SERVICIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_CATEGORIA_SERVICIOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_CATEGORIA_SERVICIO
	
	Autor:Mauricio Salas
	Descripcion: Ajuste para traer el nombre del Taller, y cambiar el estado por Activo o Inactivo
	Ademas trae el Numero de Cedula y el Nombre Completo del Funcionario
	
	Autor: Mauricio Salas
	Descripcion: Se agrega campo ID_UBICACION_ADMINISTRA
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			03/12/2015
	Descripcion:	se agrega el campo SIGLAS_ORDEN_TRABAJO_HIJA
	
	Autor:			César Bermúdez García
	Fecha:			15/1/2016
	Descripcion:	se agrega el campo OCULTAR_CATEGORIA
	
*/
SELECT
    NVL(CATEGORIA_SERVICIO.ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO", 
    NVL(NUM_EMPLEADO_SUPERVISOR, 0) AS "NUM_EMPLEADO_SUPERVISOR", 
    NVL(CATEGORIA_SERVICIO.ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
    (SELECT NOMBRE FROM OTM_SECTOR_TALLER SECTOR_TALLER WHERE  CATEGORIA_SERVICIO.ID_SECTOR_TALLER = SECTOR_TALLER.ID_SECTOR_TALLER ) AS TALLER,
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE CATEGORIA_SERVICIO.NUM_EMPLEADO_SUPERVISOR = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_EMPLEADO,
     (SELECT ID_PERSONAL FROM EU_EMPLEADOS EMPLEADOS WHERE CATEGORIA_SERVICIO.NUM_EMPLEADO_SUPERVISOR = EMPLEADOS.NUM_EMPLEADO) AS CEDULA,
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(ESTADO, '-') AS "ESTADO", 
    (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    NVL(REQUIERE_FICHA_TECNICA, 0) AS "REQUIERE_FICHA_TECNICA",
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(SIGLAS_ORDEN_TRABAJO_HIJA, '-') AS SIGLAS_ORDEN_TRABAJO_HIJA,
	NVL(OCULTAR_CATEGORIA, 0) AS OCULTAR_CATEGORIA 
FROM OTM_CATEGORIA_SERVICIO CATEGORIA_SERVICIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_LUGAR_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			08/09/2015 01:51:45 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_LUGAR_TRABAJO
	
	Autor: Mauricio Salas
	Descripcion se agrega campo ID_UBICACION_ADMINISTRA
	
	Autor:			Cesar Bermudez Garcia
	Fecha:			14/03/2016
	Descripcion:	Se elimina la columna COD_UNIDAD_SIRH
*/
SELECT
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(ID_LUGAR_TRABAJO, 0) AS ID_LUGAR_TRABAJO, 
	NVL(ID_UBICACION_PERTENECE, 0) AS ID_UBICACION_PERTENECE, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(ID_TIPO_LUGAR_UBICACION, 0) AS ID_TIPO_LUGAR_UBICACION, 
	NVL(NOMBRE, '-') AS NOMBRE, 
	NVL(CLASIFICACION, '-') AS CLASIFICACION, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_LUGAR_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_LUGAR_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_LUGAR_TRABAJO
	
	Autor: Mauricio Salas Chaves
	Fecha: 08/09/15
	Descripcion: Ajuste para mostrar las descripciones o nombres de cada una de las tablas relacionadas
	
	Autor: Mauricio Salas
	Descripcion se agrega campo ID_UBICACION_ADMINISTRA
	
	Autor:			Cesar Bermudez Garcia
	Fecha:			14/03/2016
	Descripcion:	Se elimina la columna COD_UNIDAD_SIRH

*/
SELECT
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ESTADO, '-') AS "ESTADO",
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
	END) "DESCRIPCION_ESTADO",
    NVL(LUGAR_TRABAJO.ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO", 
    NVL(LUGAR_TRABAJO.ID_UBICACION_PERTENECE, 0) AS "ID_UBICACION_PERTENECE", 
     (SELECT DESCRIPCION FROM OTM_UBICACION UBICACION WHERE LUGAR_TRABAJO.ID_UBICACION_PERTENECE = UBICACION.ID_UBICACION) AS UBICACION,
    NVL(LUGAR_TRABAJO.ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
     (SELECT NOMBRE FROM OTM_SECTOR_TALLER SECTOR_TALLER WHERE LUGAR_TRABAJO.ID_SECTOR_TALLER = SECTOR_TALLER.ID_SECTOR_TALLER) AS SECTOR_TALLER,
    NVL(LUGAR_TRABAJO.ID_TIPO_LUGAR_UBICACION, 0) AS "ID_TIPO_LUGAR_UBICACION", 
     (SELECT DESCRIPCION FROM OTM_TIPO_LUGAR_UBICACION TIPO_LUGAR_UBICACION WHERE LUGAR_TRABAJO.ID_TIPO_LUGAR_UBICACION = TIPO_LUGAR_UBICACION.ID_TIPO_LUGAR_UBICACION) AS TIPO_LUGAR_UBICACION,
    NVL(NOMBRE, '-') AS "NOMBRE", 
    NVL(CLASIFICACION, '-') AS "CLASIFICACION", 
	(CASE CLASIFICACION
        WHEN 'EDI' THEN 'Edificio' 
        WHEN 'SIT' THEN 'Sitio' 
    END) "DESCRIPCION_CLASIFICACION",
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_LUGAR_TRABAJO LUGAR_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SECTOR_TALLER
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			10/09/2015 10:29:57 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SECTOR_TALLER
	
	Autor: Mauricio Salas
	Descripcion se agrega campo ID_UBICACION_ADMINISTRA
*/
SELECT
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(NUM_EMPLEADO_COORDINADOR, 0) AS NUM_EMPLEADO_COORDINADOR, 
	NVL(NUM_EMPLEADO_SUSTITUTO, 0) AS NUM_EMPLEADO_SUSTITUTO, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(NOMBRE, '-') AS NOMBRE, 
	NVL(TIPO_AREA, '-') AS TIPO_AREA, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_SECTOR_TALLER;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SECTOR_TALLERLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			10/09/2015 10:29:57 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SECTOR_TALLER
	
	Autor: Mauricio Salas
	Descripcion se agrega campo ID_UBICACION_ADMINISTRA
*/
SELECT
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA,
    NVL(NUM_EMPLEADO_COORDINADOR, 0) AS NUM_EMPLEADO_COORDINADOR, 
     (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE SECTOR_TALLER.NUM_EMPLEADO_COORDINADOR = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_COORDINADOR,
     (SELECT ID_PERSONAL FROM EU_EMPLEADOS EMPLEADOS WHERE SECTOR_TALLER.NUM_EMPLEADO_COORDINADOR = EMPLEADOS.NUM_EMPLEADO) AS CEDULA_COORDINADOR,
    NVL(NUM_EMPLEADO_SUSTITUTO, 0) AS NUM_EMPLEADO_SUSTITUTO, 
     (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE SECTOR_TALLER.NUM_EMPLEADO_SUSTITUTO = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_SUSTITUTO,
     (SELECT ID_PERSONAL FROM EU_EMPLEADOS EMPLEADOS WHERE SECTOR_TALLER.NUM_EMPLEADO_SUSTITUTO = EMPLEADOS.NUM_EMPLEADO) AS CEDULA_SUSTITUTO,
    NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
    NVL(NOMBRE, '-') AS NOMBRE, 
    NVL(TIPO_AREA, '-') AS TIPO_AREA, 
    NVL(ESTADO, '-') AS ESTADO, 
     (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_SECTOR_TALLER SECTOR_TALLER;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_LUGAR_UBICACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_LUGAR_UBICACION
*/
SELECT
	NVL(ID_TIPO_LUGAR_UBICACION, 0) AS ID_TIPO_LUGAR_UBICACION, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_TIPO_LUGAR_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_LUGAR_UBICACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_LUGAR_UBICACION
	
	Autor:Mauricio Salas
	Descripcion: Ajuste para cambiar el estado por Activo o Inactivo
*/
SELECT
	NVL(ID_TIPO_LUGAR_UBICACION, 0) AS "ID_TIPO_LUGAR_UBICACION", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ESTADO, '-') AS "ESTADO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_TIPO_LUGAR_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UBICACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UBICACION
*/
SELECT
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(PERTENECE_A_SEDE, 0) AS PERTENECE_A_SEDE, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION
FROM OTM_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UBICACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			31/08/2015 08:20:01 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UBICACION
	
	Autor:Mauricio Salas
	Descripcion: Ajuste para cambiar el estado por Activo o Inactivo y el Pertenece a sede como Si o No
*/
SELECT
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(PERTENECE_A_SEDE, 0) AS "PERTENECE_A_SEDE", 
	(CASE PERTENECE_A_SEDE
        WHEN 0 THEN 'No' 
        WHEN 1 THEN 'Si' 
    END) "DESCRIPCION_PERTENECE",
	NVL(ESTADO, '-') AS "ESTADO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION"
FROM OTM_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_PLANEACION_PREVENTIVO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			08/10/2015 02:08:30 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_PLANEACION_PREVENTIVO
*/
SELECT
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(CONSECUTIVO_PROPUESTO, 0) AS CONSECUTIVO_PROPUESTO, 
	NVL(ID_CATEGORIA_SERVICIO, 0) AS ID_CATEGORIA_SERVICIO, 
	NVL(ID_ACTIVIDAD, 0) AS ID_ACTIVIDAD, 
	NVL(ID_LUGAR_TRABAJO, 0) AS ID_LUGAR_TRABAJO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_PLANEACION_PREVENTIVO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_PLANEACION_PREVENTIVOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/09/2015 02:32:07 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_PLANEACION_PREVENTIVO
	
	Autor:            Carlos Gómez Ondoy
    Fecha:            06/10/2015
    Descripcion:    Se agregan los campos DESC_CATEGORIA_SERVICIO, DESC_ACTIVIDAD, DESC_LUGAR_TRABAJO,ID_UBICACION_ADMINISTRA
	
*/

SELECT
    NVL(CONSECUTIVO_PROPUESTO, 0) AS "CONSECUTIVO_PROPUESTO", 
    NVL(ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO", 
    (SELECT B.DESCRIPCION FROM OTM_CATEGORIA_SERVICIO B WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO) AS "DESC_CATEGORIA_SERVICIO",
    NVL(ID_ACTIVIDAD, 0) AS "ID_ACTIVIDAD", 
    (SELECT B.DESCRIPCION FROM OTM_ACTIVIDAD B WHERE B.ID_ACTIVIDAD = A.ID_ACTIVIDAD) AS "DESC_ACTIVIDAD",
    NVL(ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO", 
    (SELECT B.NOMBRE FROM OTM_LUGAR_TRABAJO B WHERE B.ID_LUGAR_TRABAJO = A.ID_LUGAR_TRABAJO) AS "DESC_LUGAR_TRABAJO",
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA"
FROM OTF_PLANEACION_PREVENTIVO A;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTM_AUTORIZADO_DIRECTOR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/09/2015 10:06:27 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_AUTORIZADO_DIRECTOR
*/
SELECT
	NVL(COD_UNIDAD_SIRH, 0) AS COD_UNIDAD_SIRH, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_AUTORIZADO_DIRECTOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_AUTORIZADO_DIRECTORLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            24/09/2015 10:06:27 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_AUTORIZADO_DIRECTOR
    
    CONTROL DE CAMBIOS
    
    Autor:            CARLOS GÓMEZ ONDOY
    Fecha:            24/09/2015
    Descripcion:    SE AGREGAN LOS CAMPOS ID_PERSONAL, NOMBRE Y DESCRIPCION_UNIDAD_SIRH(ESTE SERA CARGADO CON INFORMACIÓN DESDE EL BLL)
    
*/
SELECT
    NVL(COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH", 
	'' AS DESCRIPCION_UNIDAD_SIRH,
    NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
    (SELECT B.ID_PERSONAL FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) AS ID_PERSONAL,
    (SELECT B.NOMBRE FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
    || ' ' || (SELECT B.APELLIDO1 FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
    || ' ' || (SELECT B.APELLIDO2 FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)  AS NOMBRE,
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_AUTORIZADO_DIRECTOR A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UNIDAD_UBICACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			05/10/2015 09:56:06 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UNIDAD_UBICACION
*/
SELECT
	NVL(COD_UNIDAD_SIRH, 0) AS COD_UNIDAD_SIRH, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_UNIDAD_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UNIDAD_UBICACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			05/10/2015 09:56:06 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UNIDAD_UBICACION
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			05/10/2015 
	Descripcion:	se agregan los campos DESC_COD_UNIDAD_SIRH y DESC_UBICACION (el campo DESC_COD_UNIDAD_SIRH será cargado con informacion desde el bll respectivo)
	
*/
SELECT
    NVL(COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH", 
    '' AS DESC_COD_UNIDAD_SIRH,
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    (SELECT B.DESCRIPCION FROM OTM_UBICACION B WHERE B.ID_UBICACION = A.ID_UBICACION) AS DESC_UBICACION,
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_UNIDAD_UBICACION A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_UBICACION_FAVORITA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			06/10/2015 05:58:38 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_UBICACION_FAVORITA
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION
FROM OTF_UBICACION_FAVORITA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_UBICACION_FAVORITALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			06/10/2015 05:58:38 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_UBICACION_FAVORITA
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION"
FROM OTF_UBICACION_FAVORITA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTP_PARAMETRO_GLOBAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/10/2015 09:34:40 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTP_PARAMETRO_GLOBAL
*/
SELECT
	NVL(ID_PARAMETRO, 0) AS ID_PARAMETRO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(VALOR, '-') AS VALOR, 
	NVL(VALOR_DECIMAL, 0) AS VALOR_DECIMAL, 
	NVL(PROTEGIDO, 0) AS PROTEGIDO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTP_PARAMETRO_GLOBAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTP_PARAMETRO_GLOBALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/10/2015 09:34:40 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTP_PARAMETRO_GLOBAL
*/
SELECT
	NVL(ID_PARAMETRO, 0) AS "ID_PARAMETRO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(VALOR, '-') AS "VALOR", 
	NVL(VALOR_DECIMAL, 0) AS "VALOR_DECIMAL", 
	(CASE WHEN VALOR_DECIMAL > 0 THEN to_char(VALOR_DECIMAL) 
        ELSE VALOR
    END) "VALOR_UNION",
	NVL(PROTEGIDO, 0) AS "PROTEGIDO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTP_PARAMETRO_GLOBAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTP_PARAMETRO_UBICACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/10/2015 09:34:40 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTP_PARAMETRO_UBICACION
*/
SELECT
	NVL(ID_PARAMETRO, 0) AS ID_PARAMETRO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(VALOR, '-') AS VALOR, 
	NVL(VALOR_DECIMAL, 0) AS VALOR_DECIMAL, 
	NVL(PROTEGIDO, 0) AS PROTEGIDO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA
FROM OTP_PARAMETRO_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTP_PARAMETRO_UBICACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/10/2015 09:34:40 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTP_PARAMETRO_UBICACION
*/
SELECT
	NVL(ID_PARAMETRO, 0) AS "ID_PARAMETRO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(VALOR, '-') AS "VALOR", 
	NVL(VALOR_DECIMAL, 0) AS "VALOR_DECIMAL", 
	(CASE WHEN VALOR_DECIMAL > 0 THEN to_char(VALOR_DECIMAL) 
        ELSE VALOR
    END) "VALOR_UNION",
	NVL(PROTEGIDO, 0) AS "PROTEGIDO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA"
FROM OTP_PARAMETRO_UBICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE FORCE VIEW V_OTM_ESPACIO
AS
   SELECT NVL (ID_ESPACIO, 0) AS ID_ESPACIO,
          NVL (ID_UBICACION, 0) AS ID_UBICACION,
          NVL (DESCRIPCION, '-') AS DESCRIPCION,
          NVL (ORDEN, 0) AS ORDEN,
          NVL (ESTADO, '-') AS ESTADO,
          CASE ESTADO
             WHEN 'ACT' THEN 'Activo'
             WHEN 'INA' THEN 'Inactivo'
          END
             AS DESC_ESTADO,
          NVL (USUARIO, '-') AS USUARIO,
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS TIME_STAMP
     FROM OTM_ESPACIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ESPACIOLst
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			13/11/2015 01:36:20 p.m.
	Descripcion:	Vista para obtener los registros de la tabla OTM_ESPACIO
	
	CONTROL DE CAMBIOS

	Autor:			Carlos Gomez Ondoy
	Fecha:			11/12/2015
	Descripcion:	se agrega el campo CANTIDAD_SUBCOMPONENTES
	
*/
AS
SELECT NVL (ID_ESPACIO, 0) AS "ID_ESPACIO",
	  NVL (ID_UBICACION, 0) AS "ID_UBICACION",
	  NVL (DESCRIPCION, '-') AS "DESCRIPCION",
	  NVL (ORDEN, 0) AS "ORDEN",
	  NVL (ESTADO, '-') AS "ESTADO",
	  CASE ESTADO
		 WHEN 'ACT' THEN 'Activo'
		 WHEN 'INA' THEN 'Inactivo'
	  END
		 AS DESC_ESTADO,
	  NVL (USUARIO, '-') AS "USUARIO",
	  NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY')) AS "TIME_STAMP",
	  (SELECT COUNT(B.ID_ESPACIO) FROM OTM_SUBCOMPONENTE B WHERE B.ID_ESPACIO = A.ID_ESPACIO) AS CANTIDAD_SUBCOMPONENTES
 FROM OTM_ESPACIO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SUBCOMPONENTE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			13/11/2015 01:36:20 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SUBCOMPONENTE
*/
SELECT
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO, 
	NVL(ID_SUBCOMPONENTE, 0) AS ID_SUBCOMPONENTE, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ORDEN, 0) AS ORDEN, 
	NVL(ESTADO, '-') AS ESTADO, 
	CASE ESTADO
             WHEN 'ACT' THEN 'Activo'
             WHEN 'INA' THEN 'Inactivo'
    END AS DESC_ESTADO,
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_SUBCOMPONENTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SUBCOMPONENTELst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			13/11/2015 01:36:20 p.m.
	Descripcion:	Vista para obtener los registros de la tabla OTM_SUBCOMPONENTE
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			14/12/2015
	Descripcion:	Se agrega el campo DESCRIPCION_ESPACIO
	
*/
SELECT NVL (ID_ESPACIO, 0) AS "ID_ESPACIO",
		(SELECT B.DESCRIPCION FROM OTM_ESPACIO B WHERE B.ID_ESPACIO = A.ID_ESPACIO) AS "DESCRIPCION_ESPACIO",
        NVL (ID_SUBCOMPONENTE, 0) AS "ID_SUBCOMPONENTE",
        NVL (DESCRIPCION, '-') AS "DESCRIPCION",
        NVL (ORDEN, 0) AS "ORDEN",
        NVL (ESTADO, '-') AS "ESTADO",
        CASE ESTADO
            WHEN 'ACT' THEN 'Activo'
            WHEN 'INA' THEN 'Inactivo'
        END AS DESC_ESTADO,
        NVL (USUARIO, '-') AS "USUARIO",
        NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
            AS "TIME_STAMP"
    FROM OTM_SUBCOMPONENTE A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_REQUERIMIENTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/11/2015 10:05:27 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_REQUERIMIENTO
*/
SELECT
	NVL(ID_REQUERIMIENTO, 0) AS ID_REQUERIMIENTO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_REQUERIMIENTO_PADRE, 0) AS ID_REQUERIMIENTO_PADRE, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ORDEN, 0) AS ORDEN, 
	NVL(NIVEL, 0) AS NIVEL, 
	NVL(TIPO_VALOR, '-') AS TIPO_VALOR, 
	NVL(ESTADO, '-') AS ESTADO, 
	CASE ESTADO
       WHEN 'ACT' THEN 'Activo'
       WHEN 'INA' THEN 'Inactivo'
	END AS DESC_ESTADO,
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_REQUERIMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_REQUERIMIENTOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/11/2015 10:05:27 a.m.
	Descripcion:	Vista para obtener los registros de la tabla OTM_REQUERIMIENTO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			14/12/2015
	Descripcion:	Se agrega el campo DESCRIPCION_PADRE, CANTIDAD_HIJOS
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			15/12/2015
	Descripcion:	Se agrega el campo DESCRIPCION_ABUELO
	
*/
SELECT
    NVL(ID_REQUERIMIENTO, 0) AS "ID_REQUERIMIENTO", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_REQUERIMIENTO_PADRE, 0) AS "ID_REQUERIMIENTO_PADRE", 
    (SELECT B.DESCRIPCION FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO_PADRE) AS "DESCRIPCION_PADRE", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(ORDEN, 0) AS "ORDEN", 
    NVL(NIVEL, 0) AS "NIVEL", 
    NVL(TIPO_VALOR, '-') AS "TIPO_VALOR", 
    NVL(ESTADO, '-') AS "ESTADO", 
    CASE ESTADO
             WHEN 'ACT' THEN 'Activo'
             WHEN 'INA' THEN 'Inactivo'
    END AS DESC_ESTADO,
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT COUNT(B.ID_REQUERIMIENTO) FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO_PADRE = A.ID_REQUERIMIENTO) AS CANTIDAD_HIJOS,
    (SELECT C.DESCRIPCION FROM OTM_REQUERIMIENTO C WHERE C.ID_REQUERIMIENTO =  (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO_PADRE)) AS "DESCRIPCION_ABUELO"
FROM OTM_REQUERIMIENTO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ADJUNTO_ORDEN_TRABAJO
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            25/11/2015 04:13:29 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_ADJUNTO_ORDEN_TRABAJO
    
    CONTROL DE CAMBIOS
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            01/02/2016
    Descripcion:    se agrega el campo ID_TIPO_DOCUMENTO, ID_ETAPA_ORDEN_TRABAJO, DESCRIPCION

    Autor:            César Bermudez G
    Fecha:            17/03/2016
    Descripcion:    se agrega el campo EXPEDIENTE_TECNICO
    
*/
SELECT
    NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS ID_ADJUNTO_ORDEN_TRABAJO, 
    NVL(ID_UBICACION, 0) AS ID_UBICACION, 
    NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
    NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO,
    NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO,
    NVL(DESCRIPCION, '-') AS DESCRIPCION, 
    NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
    NVL(ARCHIVO, '') AS ARCHIVO, 
    NVL(USUARIO, '-') AS USUARIO, 
    NVL(EXPEDIENTE_TECNICO, 0) AS EXPEDIENTE_TECNICO, 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_ADJUNTO_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ADJUNTO_ORDEN_TRABAJOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            25/11/2015 04:13:29 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_ADJUNTO_ORDEN_TRABAJO
    
    CONTROL DE CAMBIOS
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            01/02/2016
    Descripcion:    se agrega el campo ID_TIPO_DOCUMENTO, ID_ETAPA_ORDEN_TRABAJO, DESCRIPCION
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            15/02/2016
    Descripcion:    se agrega el campo DESC_TIPO_DOCUMENTO

    Autor:            César Bermudez G
    Fecha:            17/03/2016
    Descripcion:    se agrega el campo EXPEDIENTE_TECNICO
*/
SELECT
    NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS "ID_ADJUNTO_ORDEN_TRABAJO", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
    NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO,
    NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO,
    NVL(DESCRIPCION, '-') AS DESCRIPCION, 
    NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
    NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(USUARIO, '-') AS USUARIO, 
    NVL(EXPEDIENTE_TECNICO, 0) AS EXPEDIENTE_TECNICO, 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",    
    (SELECT B.DESCRIPCION FROM OTM_TIPO_DOCUMENTO B WHERE B.ID_TIPO_DOCUMENTO = A.ID_TIPO_DOCUMENTO) AS DESC_TIPO_DOCUMENTO
FROM OTT_ADJUNTO_ORDEN_TRABAJO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/11/2015 04:13:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ORDEN_TRABAJO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			08/02/2016
	Descripcion:	Se agrega el campo NOMBRE_PROYECTO
	
*/
SELECT
	NVL(COD_UNIDAD_SIRH, 0) AS COD_UNIDAD_SIRH, 
	NVL(NOMBRE_PERSONA_CONTACTO, '-') AS NOMBRE_PERSONA_CONTACTO, 
	NVL(NOMBRE_PROYECTO, '-') AS NOMBRE_PROYECTO, 
	NVL(TELEFONO, '-') AS TELEFONO, 
	NVL(SENNAS_EXACTAS, '-') AS SENNAS_EXACTAS, 
	NVL(DESCRIPCION_TRABAJO, '-') AS DESCRIPCION_TRABAJO, 
	NVL(NUMERO_ORDEN, 0) AS NUMERO_ORDEN, 
	NVL(INCLUIDA_EN_RECEPCION, 0) AS INCLUIDA_EN_RECEPCION, 
	NVL(PARENTESCO, '-') AS PARENTESCO, 
	NVL(ID_UBICACION_ORIGEN, 0) AS ID_UBICACION_ORIGEN, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_UBICACION_MADRE, 0) AS ID_UBICACION_MADRE, 
	NVL(ID_ORDEN_TRABAJO_MADRE, '-') AS ID_ORDEN_TRABAJO_MADRE, 
	NVL(ID_MOTIVO_RECHAZO, 0) AS ID_MOTIVO_RECHAZO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(TIPO_ORDEN_TRABAJO, '-') AS TIPO_ORDEN_TRABAJO, 
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS ESTADO_ORDEN_TRABAJO, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_CATEGORIA_SERVICIO, 0) AS ID_CATEGORIA_SERVICIO, 
	NVL(ID_ACTIVIDAD, 0) AS ID_ACTIVIDAD, 
	NVL(ID_LUGAR_TRABAJO, 0) AS ID_LUGAR_TRABAJO, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(FECHA_HORA_SOLICITA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_SOLICITA
FROM OTT_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE FORCE VIEW V_OTT_ORDEN_TRABAJOLST
AS

/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/11/2015 04:13:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ORDEN_TRABAJO
	
	CONTROL DE CAMBIOS
	
	Autor:			CARLOS GOMEZ 
	Fecha:			25/11/2015 
	Descripcion:	SE AGREGAN LOS CAMPOS DESC_CATEGORIA_SERVICIO, DESC_ESTADO_ORDEN,PARTE_SENNAS_EXACTAS, DESC_LUGAR_TRABAJO, DESC_ACTIVIDAD, NOMBRE_SOLICITANTE, DESC_TIPO_ORDEN
	
	Autor:			CARLOS GOMEZ 
	Fecha:			30/11/2015 
	Descripcion:	SE AGREGAN LOS CAMPOS CATEG_REQUIERE_FICHA_TECNICA
	
    Autor:			CARLOS GOMEZ 
	Fecha:			01/12/2015 
	Descripcion:	SE AGREGAN LOS CAMPOS DESC_CONDICION_ESTADO, MOTIVO_NO_CONFORME
	
	Autor:			CARLOS GOMEZ 
	Fecha:			02/12/2015 
	Descripcion:	SE AGREGAN LOS CAMPOS POSEE_FICHA_TECNICA
	
	Autor:			CARLOS GOMEZ 
	Fecha:			04/02/2016
	Descripcion:	SE AGREGAN LOS CAMPOS VIABILIDAD_TECNICA
	
	Autor:			Cesar Bermudez Garcia 
	Fecha:			09/02/2016
	Descripcion:	SE AGREGA la columna de nombre de proyecto
	
	Autor:			Cesar Bermudez Garcia 
	Fecha:			09/02/2016
	Descripcion:	SE AGREGA las columnas de nombre de NUM_PROF_ENCARGADO,FECHA_DESDE y FECHA_HASTA del operario orden trabajo
	
	Autor:			Cesar Bermudez Garcia 
	Fecha:			29/02/2016
	Descripcion:	Se agregan estados de anteproyecto al case de viabilidad tecnica
	
	Autor:			CARLOS GOMEZ 
	Fecha:			04/03/2016
	Descripcion:	SE AGREGAN LOS CAMPOS PARA_IMPRESION_RECEPCION, NUM_EMPLEADO_SUPERV_CATEG,DESC_ACTIVIDAD_MADRE, DESC_CATEGORIA_SERVICIO_MADRE, NUMERO_ORDEN_MADRE_PDAGO
	    
    Autor:           Cesar Bermudez G
    Fecha:           08/03/2016
    Descripcion:    SE AGREGAN LOS CAMPOS DE NOMBRE_TALLER Y COORD_ENCARGADO  

	Autor:           Cesar Bermudez G
    Fecha:           09/03/2016
    Descripcion:    SE AGREGAN LOS CAMPOS FECHA_ASIGNACION Y LUGAR_TRABAJO

	Autor:           Cesar Bermudez G
    Fecha:           09/03/2016
    Descripcion:     SE AGREGAN NUEVOS ESTADOS A LA	VIABILIDAD_TECNICA

	Autor:		Cesar Bermudez G
    Fecha:           04/04/2016
    Descripcion:     SE AGREGAN UN CAMPO CON EL PERSONAL PROPUESTO PARA LA EVALUACIÓN

	Autor:		Cesar Bermudez G
    Fecha:           06/04/2016
    Descripcion:     SE AGREGAN EL CAMPO NOMBRE_PROF_ENCARGADO

	Autor:			Cesar Bermudez G
    Fecha:          24/06/2016
    Descripcion:	SE AGREGAN LOS CAMPOS COSTO_TOTAL,POSEE_DETALLE_SOLICITUD
	
	Autor:			Carlos Gómez Ondoy
    Fecha:          03/10/2016
    Descripcion:	Se  modifica el campo POSEE_DETALLE_SOLICITUD
	
	Autor:			Carlos Gómez Ondoy
    Fecha:          18/02/2017
    Descripcion:	Se agreega el campo POSEE_SOLICITUD_PRESUPUESTO
	
	Autor:			Carlos Gómez Ondoy
    Fecha:          01/04/2017
    Descripcion:	Se agreega el campo HISTORICO_APROB_SUPERVISOR
	
	Autor:			Carlos Gómez Ondoy
    Fecha:          01/04/2017
    Descripcion:	Se agreega el campo FECHA_ASIG_REQUISICION
	
	
*/

 SELECT NVL (COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH",
          NVL (NOMBRE_PERSONA_CONTACTO, '-') AS "NOMBRE_PERSONA_CONTACTO",
          NVL (TELEFONO, '-') AS "TELEFONO",
          NVL (SENNAS_EXACTAS, '-') AS "SENNAS_EXACTAS",
          NVL (DESCRIPCION_TRABAJO, '-') AS "DESCRIPCION_TRABAJO",
          NVL (NUMERO_ORDEN, 0) AS "NUMERO_ORDEN",
          NVL (INCLUIDA_EN_RECEPCION, 0) AS "INCLUIDA_EN_RECEPCION",
          NVL (PARENTESCO, '-') AS "PARENTESCO",
          NVL (ID_UBICACION_ORIGEN, 0) AS "ID_UBICACION_ORIGEN",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO",
          NVL (ID_UBICACION_MADRE, 0) AS "ID_UBICACION_MADRE",
          NVL (ID_ORDEN_TRABAJO_MADRE, '-') AS "ID_ORDEN_TRABAJO_MADRE",
          NVL (ID_MOTIVO_RECHAZO, 0) AS "ID_MOTIVO_RECHAZO",
          NVL (ANNO, 0) AS "ANNO",
          NVL (CONSECUTIVO, 0) AS "CONSECUTIVO",
          NVL (CONSECUTIVO_HIJA, 0) AS "CONSECUTIVO_HIJA",
          NVL (TIPO_ORDEN_TRABAJO, '-') AS "TIPO_ORDEN_TRABAJO",
          NVL (ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO",
          NVL (NUM_EMPLEADO, 0) AS "NUM_EMPLEADO",
          NVL (ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO",
          NVL (ID_ACTIVIDAD, 0) AS "ID_ACTIVIDAD",
          NVL (ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO",
          NVL (ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER",
          NVL (FECHA_HORA_SOLICITA, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "FECHA_HORA_SOLICITA",
          (SELECT B.DESCRIPCION
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
             AS DESC_CATEGORIA_SERVICIO,
          (SELECT B.DESCRIPCION
             FROM OTC_ESTADO_ORDEN_TRABAJO B
            WHERE B.ESTADO_ORDEN_TRABAJO = A.ESTADO_ORDEN_TRABAJO)
             AS DESC_ESTADO_ORDEN,
          NVL (SUBSTR (SENNAS_EXACTAS, 0, 20), '-') AS "PARTE_SENNAS_EXACTAS",
          (SELECT B.NOMBRE
             FROM OTM_LUGAR_TRABAJO B
            WHERE B.ID_LUGAR_TRABAJO = A.ID_LUGAR_TRABAJO)
             AS DESC_LUGAR_TRABAJO,
          (SELECT B.DESCRIPCION
             FROM OTM_ACTIVIDAD B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO
                  AND B.ID_ACTIVIDAD = A.ID_ACTIVIDAD)
             AS DESC_ACTIVIDAD,
             (SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS "NOMBRE_SOLICITANTE",
          (SELECT B.DESCRIPCION
             FROM OTC_TIPO_ORDEN_TRABAJO B
            WHERE B.TIPO_ORDEN_TRABAJO = A.TIPO_ORDEN_TRABAJO)
             AS DESC_TIPO_ORDEN,
          (CASE TIPO_ORDEN_TRABAJO WHEN 'EME' THEN 1 ELSE 0 END)
             AS ES_EMERGENCIA,
          (CASE
              WHEN EXISTS
                      (SELECT 1
                         FROM OTT_TRAZABILIDAD_PROCESO B
                        WHERE     A.ID_ORDEN_TRABAJO = B.ID_ORDEN_TRABAJO
                              AND A.ID_UBICACION = B.ID_UBICACION
                              AND B.ESTADO_ORDEN_TRABAJO = 'PEN')
              THEN
                 (SELECT MIN (C.FECHA_HORA_EJECUCION)
                    FROM OTT_TRAZABILIDAD_PROCESO C
                   WHERE     A.ID_ORDEN_TRABAJO = C.ID_ORDEN_TRABAJO
                         AND A.ID_UBICACION = C.ID_UBICACION
                         AND C.ESTADO_ORDEN_TRABAJO = 'PEN')
              ELSE
                 (SELECT MIN (C.FECHA_HORA_EJECUCION)
                    FROM OTT_TRAZABILIDAD_PROCESO C
                   WHERE     A.ID_ORDEN_TRABAJO = C.ID_ORDEN_TRABAJO
                         AND A.ID_UBICACION = C.ID_UBICACION
                         AND C.ESTADO_ORDEN_TRABAJO = 'ASG')
           END)
             "FECHA_ENVIO_APROBACION",
          (SELECT MIN (C.FECHA_HORA_EJECUCION)
             FROM OTT_TRAZABILIDAD_PROCESO C
            WHERE     A.ID_ORDEN_TRABAJO = C.ID_ORDEN_TRABAJO
                  AND A.ID_UBICACION = C.ID_UBICACION
                  AND C.ESTADO_ORDEN_TRABAJO = 'ASG')
             AS FECHA_ASIGNACION,
          (SELECT B.ID_PERSONAL
             FROM EU_EMPLEADOS B
            WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS "ID_PERSONAL",
          (SELECT B.REQUIERE_FICHA_TECNICA
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
             AS CATEG_REQUIERE_FICHA_TECNICA,
          (SELECT B.CONDICION
             FROM OTC_ESTADO_ORDEN_TRABAJO B
            WHERE B.ESTADO_ORDEN_TRABAJO = A.ESTADO_ORDEN_TRABAJO)
             AS DESC_CONDICION_ESTADO,
          (SELECT B.OBSERVACIONES
             FROM V_OTT_TRAZABILIDAD_MOTIVO_NCF B
            WHERE     B.ID_UBICACION = A.ID_UBICACION
                  AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND ROWNUM = 1)
             AS MOTIVO_NO_CONFORME,
          CASE
             WHEN (SELECT COUNT (B.ID_UBICACION)
                     FROM OTT_FICHA_TECNICA_GENERAL B
                    WHERE B.ID_UBICACION = A.ID_UBICACION
                          AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) > 0
             THEN
                1
             ELSE
                0
          END
             AS POSEE_FICHA_TECNICA,
          '0' AS HISTORICO,
          (CASE ESTADO_ORDEN_TRABAJO
              WHEN 'PDE' THEN 0               --Pendiente Revisión de Director
              WHEN 'PAS' THEN 0       --Pendiente de visto bueno de supervisor
              WHEN 'PRI' THEN 0          --Pendiente respuesta del solicitante
              WHEN 'APS' THEN 0 --Anteproyecto Pendiente Revision del Solicitante
              WHEN 'PEN' THEN 0                           --Pendiente de Envío
              WHEN 'REC' THEN 0                                    --Rechazada
              WHEN 'DEV' THEN 0                                     --Devuelta
              WHEN 'EES' THEN 0                                   --En Estudio
              WHEN 'LIQ' THEN 0                                    --Liquidada
              WHEN 'ASG' THEN 0                       --Asignada a coordinador
              WHEN 'DEN' THEN 0                                     --Denegada
              WHEN 'BRD' THEN 0                                      --Borrada
              ELSE 1
           END)
             AS VIABILIDAD_TECNICA,
          NOMBRE_PROYECTO,
          (CASE ESTADO_ORDEN_TRABAJO
              WHEN 'PDE' THEN 0               --Pendiente Revisión de Director
              WHEN 'PAS' THEN 0       --Pendiente de visto bueno de supervisor
              WHEN 'PRI' THEN 0          --Pendiente respuesta del solicitante
              WHEN 'APS' THEN 0 --Anteproyecto Pendiente Revision del Solicitante
              WHEN 'PEN' THEN 0                           --Pendiente de Envío
              WHEN 'REC' THEN 0                                    --Rechazada
              WHEN 'DEV' THEN 0                                     --Devuelta
              WHEN 'EES' THEN 0                                   --En Estudio
              WHEN 'LIQ' THEN 0                                    --Liquidada
              WHEN 'ASG' THEN 0                       --Asignada a coordinador
              WHEN 'DEN' THEN 0                                     --Denegada
              WHEN 'BRD' THEN 0                                      --Borrada
              WHEN 'PRO' THEN 0    --Pendiente de Revision para Contrataciones
              WHEN 'GCT' THEN 0                      --Gestión de Contratación
              ELSE 1
           END)
             AS PARA_IMPRESION_RECEPCION,
          (SELECT B.NUM_EMPLEADO_SUPERVISOR
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
             AS NUM_EMPLEADO_SUPERV_CATEG,
          (SELECT B.DESCRIPCION
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO =
                     (SELECT C.ID_CATEGORIA_SERVICIO
                        FROM OTT_ORDEN_TRABAJO C
                       WHERE C.ID_UBICACION = A.ID_UBICACION_MADRE
                             AND C.ID_ORDEN_TRABAJO =
                                    A.ID_ORDEN_TRABAJO_MADRE))
             AS DESC_CATEGORIA_SERVICIO_MADRE,
          (SELECT B.DESCRIPCION
             FROM OTM_ACTIVIDAD B
            WHERE B.ID_ACTIVIDAD =
                     (SELECT C.ID_ACTIVIDAD
                        FROM OTT_ORDEN_TRABAJO C
                       WHERE C.ID_UBICACION = A.ID_UBICACION_MADRE
                             AND C.ID_ORDEN_TRABAJO =
                                    A.ID_ORDEN_TRABAJO_MADRE))
             AS DESC_ACTIVIDAD_MADRE,
          (SELECT C.NUMERO_ORDEN
             FROM OTT_ORDEN_TRABAJO C
            WHERE C.ID_UBICACION = A.ID_UBICACION_MADRE
                  AND C.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO_MADRE)
             AS NUMERO_ORDEN_MADRE_PDAGO,
          (SELECT NOMBRE
             FROM OTM_SECTOR_TALLER
            WHERE A.ID_SECTOR_TALLER = ID_SECTOR_TALLER)
             NOMBRE_TALLER,
          (SELECT NOMBRE
             FROM EU_EMPLEADOS
            WHERE NUM_EMPLEADO =
                     (SELECT NUM_EMPLEADO_COORDINADOR
                        FROM OTM_SECTOR_TALLER
                       WHERE A.ID_SECTOR_TALLER = ID_SECTOR_TALLER))
          || ' '
          || (SELECT APELLIDO1
                FROM EU_EMPLEADOS
               WHERE NUM_EMPLEADO =
                        (SELECT NUM_EMPLEADO_COORDINADOR
                           FROM OTM_SECTOR_TALLER
                          WHERE A.ID_SECTOR_TALLER = ID_SECTOR_TALLER))
          || ' '
          || (SELECT APELLIDO2
                FROM EU_EMPLEADOS
               WHERE NUM_EMPLEADO =
                        (SELECT NUM_EMPLEADO_COORDINADOR
                           FROM OTM_SECTOR_TALLER
                          WHERE A.ID_SECTOR_TALLER = ID_SECTOR_TALLER))
             COORD_ENCARGADO,
          (SELECT NUM_EMPLEADO_COORDINADOR
             FROM OTM_SECTOR_TALLER
            WHERE A.ID_SECTOR_TALLER = ID_SECTOR_TALLER)
             NUM_COORD_ENCARGADO,
          (SELECT NOMBRE
             FROM OTM_LUGAR_TRABAJO
            WHERE A.ID_LUGAR_TRABAJO = ID_LUGAR_TRABAJO)
             AS LUGAR_TRABAJO,
          (  SELECT LISTAGG (NUM_EMPLEADO, ',')
                       WITHIN GROUP (ORDER BY NUM_EMPLEADO)
                       AS FUNCIONARIOS
               FROM OTT_OPERARIO_ORDEN_TRAB
              WHERE     ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                    AND ID_UBICACION = A.ID_UBICACION
                    AND ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
           GROUP BY ID_ORDEN_TRABAJO)
             PERSONAL_EVALUACION,
          '' AS PERSONAL,
          0 AS ID_PRE_ORDEN_TRABAJO,
          (SELECT VALOR
             FROM OTP_PARAMETRO_GLOBAL
            WHERE ID_PARAMETRO = 3)
             AS COSTO_TOTAL,
          (SELECT COUNT (ODM.ID_DETALLE_MATERIAL)
             FROM OTT_DETALLE_MATERIAL ODM
            WHERE     ODM.ESTADO = 'PEN'
                  AND ODM.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND ODM.ID_UBICACION = A.ID_UBICACION)
             AS POSEE_DETALLE_SOLICITUD,
          (SELECT OP.NUM_EMPLEADO
             FROM OTT_OPERARIO_ORDEN_TRAB OP
            WHERE     OP.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND OP.ID_UBICACION = A.ID_UBICACION
                  AND CARGO = 'ENC'
                  AND ROWNUM = 1)
             AS NUM_PROF_ENCARGADO,
          (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2
             FROM EU_EMPLEADOS
            WHERE NUM_EMPLEADO =
                     (SELECT OP.NUM_EMPLEADO
                        FROM OTT_OPERARIO_ORDEN_TRAB OP
                       WHERE     OP.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                             AND OP.ID_UBICACION = A.ID_UBICACION
                             AND CARGO = 'ENC'
                             AND ROWNUM = 1))
             AS NOMBRE_PROF_ENCARGADO,
          (SELECT OP.FECHA_DESDE
             FROM OTT_OPERARIO_ORDEN_TRAB OP
            WHERE     OP.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND OP.ID_UBICACION = A.ID_UBICACION
                  AND CARGO = 'ENC'
                  AND ROWNUM = 1)
             AS FECHA_DESDE,
          (SELECT OP.FECHA_HASTA
             FROM OTT_OPERARIO_ORDEN_TRAB OP
            WHERE     OP.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND OP.ID_UBICACION = A.ID_UBICACION
                  AND CARGO = 'ENC'
                  AND ROWNUM = 1)
             AS FECHA_HASTA,
          NVL (
             (SELECT SUM (COSTO_PROMEDIO)
                FROM V_OTT_DETALLE_MATERIALLST
               WHERE ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND ID_UBICACION = A.ID_UBICACION),
             0)
             AS COSTO_MATERIAL,
          CASE
             WHEN (SELECT COUNT (B.ID_ORDEN_TRABAJO)
                     FROM OTT_ADJUNTO_ORDEN_TRABAJO B
                    WHERE     B.ID_UBICACION = A.ID_UBICACION
                          AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                          AND B.ID_TIPO_DOCUMENTO = 3
                          AND B.ID_ETAPA_ORDEN_TRABAJO = 11
                          AND B.DESCRIPCION =
                                 'Archivo adjunto de oficio para solicitud de presupuesto') >
                     0
             THEN
                1
             ELSE
                0
          END
             AS POSEE_SOLICITUD_PRESUPUESTO,
			CASE
             WHEN (SELECT COUNT (B.ID_ORDEN_TRABAJO)
                     FROM OTT_TRAZABILIDAD_PROCESO B
					WHERE     A.ID_ORDEN_TRABAJO = B.ID_ORDEN_TRABAJO
						  AND A.ID_UBICACION = B.ID_UBICACION
						  AND B.ESTADO_ORDEN_TRABAJO = 'RPS') >
                     0
             THEN
                1
             ELSE
                0
          END AS HISTORICO_APROB_SUPERVISOR,
		 (SELECT MAX (C.FECHA_HORA_EJECUCION)
			FROM OTT_TRAZABILIDAD_PROCESO C
		   WHERE     A.ID_ORDEN_TRABAJO = C.ID_ORDEN_TRABAJO
				 AND A.ID_UBICACION = C.ID_UBICACION
				 AND C.ESTADO_ORDEN_TRABAJO = 'PAR')          
             FECHA_ASIG_REQUISICION
     FROM OTT_ORDEN_TRABAJO A;
    

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTH_ORDEN_TRABAJOLst
AS
/*    
    Autor:            CARLOS GOMEZ 
    Fecha:            08/12/2015 
    Descripcion:   Vista para obtener los registros de la tabla OTH_ORDEN_TRABAJO
    
*/
SELECT
    NVL(COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH", 
    NVL(NOMBRE_PERSONA_CONTACTO, '-') AS "NOMBRE_PERSONA_CONTACTO", 
    NVL(TELEFONO, '-') AS "TELEFONO", 
    NVL(SENNAS_EXACTAS, '-') AS "SENNAS_EXACTAS", 
    NVL(DESCRIPCION_TRABAJO, '-') AS "DESCRIPCION_TRABAJO", 
    NVL(NUMERO_ORDEN, 0) AS "NUMERO_ORDEN", 
    NVL(INCLUIDA_EN_RECEPCION, 0) AS "INCLUIDA_EN_RECEPCION", 
    NVL(PARENTESCO, '-') AS "PARENTESCO", 
    NVL(ID_UBICACION_ORIGEN, 0) AS "ID_UBICACION_ORIGEN", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
    NVL(ID_UBICACION_MADRE, 0) AS "ID_UBICACION_MADRE", 
    NVL(ID_ORDEN_TRABAJO_MADRE, '-') AS "ID_ORDEN_TRABAJO_MADRE", 
    NVL(ID_MOTIVO_RECHAZO, 0) AS "ID_MOTIVO_RECHAZO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(CONSECUTIVO, 0) AS "CONSECUTIVO",
    NVL(CONSECUTIVO_HIJA, 0) AS "CONSECUTIVO_HIJA",  
    NVL(TIPO_ORDEN_TRABAJO, '-') AS "TIPO_ORDEN_TRABAJO", 
    NVL(ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO", 
    NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
    NVL(ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO", 
    NVL(ID_ACTIVIDAD, 0) AS "ID_ACTIVIDAD", 
    NVL(ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO", 
    NVL(ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
    NVL(FECHA_HORA_SOLICITA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_SOLICITA",
    (SELECT B.DESCRIPCION  FROM OTM_CATEGORIA_SERVICIO B WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO) AS DESC_CATEGORIA_SERVICIO,
    (SELECT B.DESCRIPCION  FROM OTC_ESTADO_ORDEN_TRABAJO B WHERE B.ESTADO_ORDEN_TRABAJO = A.ESTADO_ORDEN_TRABAJO) AS DESC_ESTADO_ORDEN,
    NVL (SUBSTR (SENNAS_EXACTAS, 0, 20), '-') AS "PARTE_SENNAS_EXACTAS",
    (SELECT B.NOMBRE FROM OTM_LUGAR_TRABAJO B WHERE B.ID_LUGAR_TRABAJO = A.ID_LUGAR_TRABAJO) AS DESC_LUGAR_TRABAJO,
    (SELECT B.DESCRIPCION FROM OTM_ACTIVIDAD B WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO AND B.ID_ACTIVIDAD = A.ID_ACTIVIDAD) AS DESC_ACTIVIDAD,
    (SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS "NOMBRE_SOLICITANTE",
    (SELECT B.DESCRIPCION FROM OTC_TIPO_ORDEN_TRABAJO B WHERE B.TIPO_ORDEN_TRABAJO = A.TIPO_ORDEN_TRABAJO) AS DESC_TIPO_ORDEN,
    (CASE TIPO_ORDEN_TRABAJO WHEN 'EME' THEN 1 ELSE 0 END)  AS ES_EMERGENCIA,
    (CASE
              WHEN EXISTS
                      (SELECT 1
                         FROM OTH_TRAZABILIDAD_PROCESO B
                        WHERE  A.ID_ORDEN_TRABAJO = B.ID_ORDEN_TRABAJO
                              AND A.ID_UBICACION = B.ID_UBICACION
                              AND B.ESTADO_ORDEN_TRABAJO = 'PEN')
              THEN
                 (SELECT MIN (C.FECHA_HORA_EJECUCION)
                    FROM OTH_TRAZABILIDAD_PROCESO C
                   WHERE     A.ID_ORDEN_TRABAJO = C.ID_ORDEN_TRABAJO
                         AND A.ID_UBICACION = C.ID_UBICACION
                         AND C.ESTADO_ORDEN_TRABAJO = 'PEN')
              ELSE
                 (SELECT MIN (C.FECHA_HORA_EJECUCION)
                    FROM OTH_TRAZABILIDAD_PROCESO C
                   WHERE    A.ID_ORDEN_TRABAJO = C.ID_ORDEN_TRABAJO
                         AND A.ID_UBICACION = C.ID_UBICACION
                         AND C.ESTADO_ORDEN_TRABAJO = 'ASG')
           END)
             "FECHA_ENVIO_APROBACION",
    (SELECT B.ID_PERSONAL FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) AS "ID_PERSONAL",
    (SELECT B.REQUIERE_FICHA_TECNICA FROM OTM_CATEGORIA_SERVICIO B WHERE B.ID_CATEGORIA_SERVICIO =  A.ID_CATEGORIA_SERVICIO) AS CATEG_REQUIERE_FICHA_TECNICA,
    (SELECT B.CONDICION FROM OTC_ESTADO_ORDEN_TRABAJO B WHERE B.ESTADO_ORDEN_TRABAJO =  A.ESTADO_ORDEN_TRABAJO) AS DESC_CONDICION_ESTADO,
    (SELECT B.OBSERVACIONES
             FROM V_OTT_TRAZABILIDAD_MOTIVO_NCF B
            WHERE     B.ID_UBICACION = A.ID_UBICACION
                  AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND ROWNUM = 1)
             AS MOTIVO_NO_CONFORME,
    CASE 
        WHEN (SELECT COUNT(B.ID_UBICACION) FROM OTH_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) > 0 THEN 1
        ELSE 0 
    END AS POSEE_FICHA_TECNICA,
	'1' AS HISTORICO
FROM OTH_ORDEN_TRABAJO A;  
/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_REVISION_ORDEN_TRABAJ
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/11/2015 04:13:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_REVISION_ORDEN_TRABAJ
*/
SELECT
	NVL(ID_REVISION_ORDEN_TRABAJ, 0) AS ID_REVISION_ORDEN_TRABAJ, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_REVISION_ORDEN_TRABAJ;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_REVISION_ORDEN_TRABAJLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/11/2015 04:13:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_REVISION_ORDEN_TRABAJ
*/
SELECT
	NVL(ID_REVISION_ORDEN_TRABAJ, 0) AS "ID_REVISION_ORDEN_TRABAJ", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_REVISION_ORDEN_TRABAJ;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_TRAZABILIDAD_PROCESO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/11/2015 04:13:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_TRAZABILIDAD_PROCESO
*/
SELECT
	NVL(FECHA_HORA_EJECUCION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_EJECUCION, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ID_MOTIVO_RECHAZO, 0) AS ID_MOTIVO_RECHAZO, 
	NVL(OBSERVACIONES_INTERNAS, '-') AS OBSERVACIONES_INTERNAS, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(ID_TRAZABILIDAD_PROCESO, 0) AS ID_TRAZABILIDAD_PROCESO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(NUM_EMPLEADO_EJECUTA, 0) AS NUM_EMPLEADO_EJECUTA, 
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS ESTADO_ORDEN_TRABAJO
FROM OTT_TRAZABILIDAD_PROCESO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_TRAZABILIDAD_PROCESOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/11/2015 04:13:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_TRAZABILIDAD_PROCESO
	
	CONTROL DE CAMBIOS
	
	Autor:			CARLOS GOMEZ
	Fecha:			25/11/2015
	Descripcion:	SE AGREGAN LOS CAMPOS DESC_ESTADO_ORDEN, NOMBRE_EMPLEADO
	
	Autor:			CARLOS GOMEZ
	Fecha:			11/01/2016
	Descripcion:	SE AGREGA EL CAMPO RESPONSABLE
	
	Autor:			CARLOS GOMEZ
	Fecha:			12/01/2016
	Descripcion:	SE AGREGAN LOS CAMPOS COD_UNIDAD_SIRH, ID_SECTOR_TALLER, NOMBRE_SOLICITANTE
	
	Autor:			CARLOS GOMEZ
	Fecha:			05/10/2016
	Descripcion:	SE AGREGAN LOS CAMPOS ID_CATEGORIA_SERVICIO
	
*/
SELECT
	NVL(FECHA_HORA_EJECUCION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_EJECUCION", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ID_MOTIVO_RECHAZO, 0) AS "ID_MOTIVO_RECHAZO", 
	NVL(OBSERVACIONES_INTERNAS, '-') AS "OBSERVACIONES_INTERNAS", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(ID_TRAZABILIDAD_PROCESO, 0) AS "ID_TRAZABILIDAD_PROCESO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(NUM_EMPLEADO_EJECUTA, 0) AS "NUM_EMPLEADO_EJECUTA", 
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO",
	(SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE TRAZABILIDAD.NUM_EMPLEADO_EJECUTA = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_EMPLEADO,
	(SELECT B.DESCRIPCION  FROM OTC_ESTADO_ORDEN_TRABAJO B WHERE B.ESTADO_ORDEN_TRABAJO = TRAZABILIDAD.ESTADO_ORDEN_TRABAJO) AS DESC_ESTADO_ORDEN,
	'' AS RESPONSABLE,
    (SELECT B.COD_UNIDAD_SIRH FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = TRAZABILIDAD.ID_UBICACION AND B.ID_ORDEN_TRABAJO = TRAZABILIDAD.ID_ORDEN_TRABAJO) AS COD_UNIDAD_SIRH,
	(SELECT B.ID_SECTOR_TALLER FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = TRAZABILIDAD.ID_UBICACION AND B.ID_ORDEN_TRABAJO = TRAZABILIDAD.ID_ORDEN_TRABAJO) AS ID_SECTOR_TALLER,
	(SELECT B.ID_CATEGORIA_SERVICIO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = TRAZABILIDAD.ID_UBICACION AND B.ID_ORDEN_TRABAJO = TRAZABILIDAD.ID_ORDEN_TRABAJO) AS ID_CATEGORIA_SERVICIO,
    (SELECT C.NOMBRE || ' ' || C.APELLIDO1 || ' ' || C.APELLIDO2  FROM EU_EMPLEADOS C WHERE C.NUM_EMPLEADO = (SELECT B.NUM_EMPLEADO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = TRAZABILIDAD.ID_UBICACION AND B.ID_ORDEN_TRABAJO = TRAZABILIDAD.ID_ORDEN_TRABAJO))AS NOMBRE_SOLICITANTE
FROM OTT_TRAZABILIDAD_PROCESO TRAZABILIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTH_TRAZABILIDAD_PROCESOLst
AS
/*
	
	Autor:			CARLOS GOMEZ
	Fecha:			09/12/2015
	Descripcion:	Vista para obtener los registros de la tabla OTH_TRAZABILIDAD_PROCESO
	
*/
SELECT
	NVL(FECHA_HORA_EJECUCION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_EJECUCION", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ID_MOTIVO_RECHAZO, 0) AS "ID_MOTIVO_RECHAZO", 
	NVL(OBSERVACIONES_INTERNAS, '-') AS "OBSERVACIONES_INTERNAS", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(ID_TRAZABILIDAD_PROCESO, 0) AS "ID_TRAZABILIDAD_PROCESO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(NUM_EMPLEADO_EJECUTA, 0) AS "NUM_EMPLEADO_EJECUTA", 
	NVL(ESTADO_ORDEN_TRABAJO, '-') AS "ESTADO_ORDEN_TRABAJO",
	(SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE TRAZABILIDAD.NUM_EMPLEADO_EJECUTA = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_EMPLEADO,
	(SELECT B.DESCRIPCION  FROM OTC_ESTADO_ORDEN_TRABAJO B WHERE B.ESTADO_ORDEN_TRABAJO = TRAZABILIDAD.ESTADO_ORDEN_TRABAJO) AS DESC_ESTADO_ORDEN
FROM OTH_TRAZABILIDAD_PROCESO TRAZABILIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_GENERAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			30/11/2015 09:23:14 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_GENERAL
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(CONSERVA_MOBILIARIO, 0) AS CONSERVA_MOBILIARIO, 
	NVL(REQUIERE_NUEVO_MOBILIARIO, 0) AS REQUIERE_NUEVO_MOBILIARIO, 
	NVL(OTROS_MOBILIARIO, '-') AS OTROS_MOBILIARIO, 
	NVL(OTRO_TIPO_REQUERIMIENTO, '-') AS OTRO_TIPO_REQUERIMIENTO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(CUENTA_CON_ALARMA, 0) AS CUENTA_CON_ALARMA, 
	NVL(REQUIERE_ALARMA, 0) AS REQUIERE_ALARMA, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(USUARIO, '-') AS USUARIO
FROM OTT_FICHA_TECNICA_GENERAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_GENERALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			30/11/2015 09:23:14 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_GENERAL
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(CONSERVA_MOBILIARIO, 0) AS "CONSERVA_MOBILIARIO", 
	NVL(REQUIERE_NUEVO_MOBILIARIO, 0) AS "REQUIERE_NUEVO_MOBILIARIO", 
	NVL(OTROS_MOBILIARIO, '-') AS "OTROS_MOBILIARIO", 
	NVL(OTRO_TIPO_REQUERIMIENTO, '-') AS "OTRO_TIPO_REQUERIMIENTO", 
	NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
	NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(CUENTA_CON_ALARMA, 0) AS "CUENTA_CON_ALARMA", 
	NVL(REQUIERE_ALARMA, 0) AS "REQUIERE_ALARMA", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(USUARIO, '-') AS "USUARIO"
FROM OTT_FICHA_TECNICA_GENERAL;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_DETALLE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/12/2015 02:00:31 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_DETALLE
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO, 
	NVL(ID_SUBCOMPONENTE, 0) AS ID_SUBCOMPONENTE, 
	NVL(ID_REQUERIMIENTO, 0) AS ID_REQUERIMIENTO, 
	NVL(VALOR, '-') AS VALOR, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_FICHA_TECNICA_DETALLE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_DETALLELst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            17/12/2015 02:00:31 p.m.
    Descripcion:    Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_DETALLE
    
    CONTROL DE CAMBIOS
    
    Autor:            CARLOS GOMEZ ONDOY
    Fecha:            15/01/2016
    Descripcion:    SE AGREGAN LOS CAMPOS DESC_ESPACIO, DESC_SUBCOMPONENTE, DESC_REQUERIMIENTO, NOMBRE_UNIDAD
    NOMBRE_UBICACION, NOMBRE_CONTACTO, TELEFONO, CORREO_ELECTRONICO, FECHA_SOLICITUD, JUSTIFICACION_SOLICITUD, CONSERVA_MOBILIARIO
    REQUIERE_NUEVO_MOBILIARIO, OTROS_MOBILIARIO, OTRO_TIPO_REQUERIMIENTO, CUENTA_CON_ALARMA, REQUIERE_ALARMA
    
     Autor:            CARLOS GOMEZ ONDOY
    Fecha:            29/01/2016
    Descripcion:    SE AGREGAN EL CAMPO TIPO_VALOR, DESC_TOTAL_REQ
    
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
    NVL(ID_ESPACIO, 0) AS "ID_ESPACIO", 
    NVL(ID_SUBCOMPONENTE, 0) AS "ID_SUBCOMPONENTE", 
    NVL(ID_REQUERIMIENTO, 0) AS "ID_REQUERIMIENTO", 
   (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO) AS ID_REQUERIMIENTO_PADRE,
   (SELECT B.DESCRIPCION FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO)) AS DESCRIPCION_PADRE,
   (SELECT C.DESCRIPCION FROM OTM_REQUERIMIENTO C WHERE C.ID_REQUERIMIENTO =  (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO =  (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO))) AS DESCRIPCION_ABUELO, 
    (SELECT B.DESCRIPCION FROM OTM_ESPACIO B WHERE B.ID_ESPACIO = A.ID_ESPACIO) AS DESC_ESPACIO,
    (SELECT B.DESCRIPCION FROM OTM_SUBCOMPONENTE B WHERE B.ID_ESPACIO = A.ID_ESPACIO AND B.ID_SUBCOMPONENTE = A.ID_SUBCOMPONENTE) AS DESC_SUBCOMPONENTE,
    (SELECT B.DESCRIPCION FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO) AS DESC_REQUERIMIENTO,        
   (SELECT C.DESCRIPCION FROM OTM_REQUERIMIENTO C WHERE C.ID_REQUERIMIENTO =  (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO =  (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO)))   
   ||  ','   ||  
   (SELECT B.DESCRIPCION FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = (SELECT B.ID_REQUERIMIENTO_PADRE FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO))
   || ',' ||   
   (SELECT B.DESCRIPCION FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO)
     AS DESC_TOTAL_REQ,
    '' AS NOMBRE_UNIDAD,
     (SELECT B.COD_UNIDAD_SIRH FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS COD_UNIDAD_SIRH,
    (SELECT B.DESCRIPCION FROM OTM_UBICACION B WHERE B.ID_UBICACION = A.ID_UBICACION) AS NOMBRE_UBICACION,
    (SELECT B.NOMBRE_PERSONA_CONTACTO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS NOMBRE_CONTACTO,
    (SELECT B.TELEFONO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS TELEFONO,
    (SELECT C.CORREO_INSTITUCIONAL FROM EU_EMPLEADOS C WHERE C.NUM_EMPLEADO = (SELECT B.NUM_EMPLEADO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO)) AS CORREO_ELECTRONICO,
    (SELECT B.FECHA_HORA_SOLICITA FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS FECHA_SOLICITUD,
    (SELECT B.DESCRIPCION_TRABAJO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS JUSTIFICACION_SOLICITUD,
    (SELECT B.CONSERVA_MOBILIARIO FROM OTT_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS CONSERVA_MOBILIARIO,
    (SELECT B.REQUIERE_NUEVO_MOBILIARIO FROM OTT_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS REQUIERE_NUEVO_MOBILIARIO,
    (SELECT B.OTROS_MOBILIARIO FROM OTT_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS OTROS_MOBILIARIO,
    (SELECT B.OTRO_TIPO_REQUERIMIENTO FROM OTT_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS OTRO_TIPO_REQUERIMIENTO,
    (SELECT B.CUENTA_CON_ALARMA FROM OTT_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS CUENTA_CON_ALARMA,
    (SELECT B.REQUIERE_ALARMA FROM OTT_FICHA_TECNICA_GENERAL B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO) AS REQUIERE_ALARMA,
    NVL(VALOR, '-') AS "VALOR", 
    (SELECT B.TIPO_VALOR FROM OTM_REQUERIMIENTO B WHERE B.ID_REQUERIMIENTO = A.ID_REQUERIMIENTO) AS TIPO_VALOR,
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_FICHA_TECNICA_DETALLE A;
/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_ESPACIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/12/2015 02:00:31 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_ESPACIO
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO
FROM OTT_FICHA_TECNICA_ESPACIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_ESPACIOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/12/2015 02:00:31 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_ESPACIO
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ID_ESPACIO, 0) AS "ID_ESPACIO"
FROM OTT_FICHA_TECNICA_ESPACIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_SUBCOMP
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/12/2015 02:00:31 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_SUBCOMP
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO, 
	NVL(ID_SUBCOMPONENTE, 0) AS ID_SUBCOMPONENTE
FROM OTT_FICHA_TECNICA_SUBCOMP;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_FICHA_TECNICA_SUBCOMPLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/12/2015 02:00:31 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_FICHA_TECNICA_SUBCOMP
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ID_ESPACIO, 0) AS "ID_ESPACIO", 
	NVL(ID_SUBCOMPONENTE, 0) AS "ID_SUBCOMPONENTE"
FROM OTT_FICHA_TECNICA_SUBCOMP;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UNIDAD_TIEMPO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			15/01/2016 02:29:16 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UNIDAD_TIEMPO
*/
SELECT
	NVL(ID_UNIDAD_TIEMPO, 0) AS ID_UNIDAD_TIEMPO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(UNIDAD, 0) AS UNIDAD, 
	NVL(VALOR, 0) AS VALOR, 
	NVL(ESTADO, '-') AS ESTADO, 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_UNIDAD_TIEMPO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UNIDAD_TIEMPOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            15/01/2016 02:29:16 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_UNIDAD_TIEMPO
    
    CONTROL DE CAMBIOS
    
    Autor:            Carlos Gomez Ondoy
    Fecha:            24/02/2016
    Descripcion:     se agrega el campo POSEE_REGISTROS_ASOCIADOS
    
*/
SELECT
    NVL(ID_UNIDAD_TIEMPO, 0) AS "ID_UNIDAD_TIEMPO", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(UNIDAD, 0) AS "UNIDAD", 
    NVL(VALOR, 0) AS "VALOR", 
    NVL(ESTADO, '-') AS "ESTADO", 
    (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    CASE 
        WHEN (SELECT COUNT(OTF_EXCEPCION_PERIODO.ID_UNIDAD_TIEMPO) FROM OTF_EXCEPCION_PERIODO WHERE OTF_EXCEPCION_PERIODO.ID_UNIDAD_TIEMPO = OTM_UNIDAD_TIEMPO.ID_UNIDAD_TIEMPO) > 0 THEN 1
        WHEN (SELECT COUNT(OTH_TIEMPO_OPERARIO.ID_UNIDAD_TIEMPO) FROM OTH_TIEMPO_OPERARIO WHERE OTH_TIEMPO_OPERARIO.ID_UNIDAD_TIEMPO = OTM_UNIDAD_TIEMPO.ID_UNIDAD_TIEMPO) > 0 THEN 1
        WHEN (SELECT COUNT(OTT_TIEMPO_OPERARIO.ID_UNIDAD_TIEMPO) FROM OTT_TIEMPO_OPERARIO WHERE OTT_TIEMPO_OPERARIO.ID_UNIDAD_TIEMPO = OTM_UNIDAD_TIEMPO.ID_UNIDAD_TIEMPO) > 0 THEN 1
        WHEN (SELECT COUNT(OTT_VIABILIDAD_TECNICA.ID_UNIDAD_TIEMPO) FROM OTT_VIABILIDAD_TECNICA WHERE OTT_VIABILIDAD_TECNICA.ID_UNIDAD_TIEMPO = OTM_UNIDAD_TIEMPO.ID_UNIDAD_TIEMPO) > 0 THEN 1
        WHEN (SELECT COUNT(OTH_VIABILIDAD_TECNICA.ID_UNIDAD_TIEMPO) FROM OTH_VIABILIDAD_TECNICA WHERE OTH_VIABILIDAD_TECNICA.ID_UNIDAD_TIEMPO = OTM_UNIDAD_TIEMPO.ID_UNIDAD_TIEMPO) > 0 THEN 1
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS  
FROM OTM_UNIDAD_TIEMPO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE FORCE VIEW V_OTF_PERIODO_CIERRE
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            18/01/2016 
    Descripcion:      Vista para obtener los registros de la tabla OTF_PERIODO_CIERRE
*/
   SELECT NVL (ID_PERIODO_CIERRE, 0) AS "ID_PERIODO_CIERRE",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (UNIDAD_CIERRE, '-') AS "UNIDAD_CIERRE",
          (CASE UNIDAD_CIERRE
              WHEN 'MNT' THEN 'Mantenimiento'
              WHEN 'DIS' THEN 'Diseño'
           END)
             "DESCRIPCION_UNIDAD_CIERRE",
          NVL (
             TO_DATE (TO_CHAR (FECHA_INICIO_CIERRE, 'DD-MM-YYYY'),
                      'DD-MM-YYYY'),
             TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "FECHA_INICIO_CIERRE",
          NVL (
             TO_DATE (TO_CHAR (FECHA_FIN_CIERRE, 'DD-MM-YYYY'), 'DD-MM-YYYY'),
             TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "FECHA_FIN_CIERRE",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          NVL (USUARIO, '-') AS "USUARIO"
     FROM OTF_PERIODO_CIERRE;

/*------------------------------------------------------------------------------------------------------------------------*/	 
CREATE OR REPLACE FORCE VIEW V_OTF_PERIODO_CIERRELST
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            18/01/2016 
    Descripcion:      Vista para obtener los registros de la tabla OTF_PERIODO_CIERRE
*/
   SELECT NVL (ID_PERIODO_CIERRE, 0) AS "ID_PERIODO_CIERRE",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (UNIDAD_CIERRE, '-') AS "UNIDAD_CIERRE",
          (CASE UNIDAD_CIERRE
              WHEN 'MNT' THEN 'Mantenimiento'
              WHEN 'DIS' THEN 'Diseño'
           END)
             "DESCRIPCION_UNIDAD_CIERRE",
          NVL (
             TO_DATE (TO_CHAR (FECHA_INICIO_CIERRE, 'DD-MM-YYYY'),
                      'DD-MM-YYYY'),
             TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "FECHA_INICIO_CIERRE",
          NVL (
             TO_DATE (TO_CHAR (FECHA_FIN_CIERRE, 'DD-MM-YYYY'), 'DD-MM-YYYY'),
             TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "FECHA_FIN_CIERRE",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          NVL (USUARIO, '-') AS "USUARIO"
     FROM OTF_PERIODO_CIERRE;
	 
/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_AREA_PROFESIONAL
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            20/01/2016 11:22:41 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_AREA_PROFESIONAL
	
	CONTROL DE CAMBIOS
	
	Autor:            CARLOS GOMEZ ONDOY
    Fecha:            23/02/2016
    Descripcion:      SE AGREGA EL CAMPO POSEE_REGISTROS_ASOCIADOS
	
*/
SELECT
    NVL(ID_AREA_PROFESIONAL, 0) AS ID_AREA_PROFESIONAL, 
    NVL(ID_UBICACION, 0) AS ID_UBICACION, 
    NVL(SUFIJO, '-') AS SUFIJO, 
    NVL(DESCRIPCION, '-') AS DESCRIPCION, 
    NVL(ESTADO, '-') AS ESTADO, 
    (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(USUARIO, '-') AS USUARIO, 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP,
	CASE 
        WHEN (SELECT COUNT(OTF_OPERARIO_AREA.ID_AREA_PROFESIONAL) FROM OTF_OPERARIO_AREA WHERE OTF_OPERARIO_AREA.ID_AREA_PROFESIONAL = OTM_AREA_PROFESIONAL.ID_AREA_PROFESIONAL) > 0 THEN 1
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS     
FROM OTM_AREA_PROFESIONAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_AREA_PROFESIONALLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            20/01/2016 11:22:41 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_AREA_PROFESIONAL
	
	CONTROL DE CAMBIOS
	
	Autor:            CARLOS GOMEZ ONDOY
    Fecha:            23/02/2016
    Descripcion:      SE AGREGA EL CAMPO POSEE_REGISTROS_ASOCIADOS
*/
SELECT
    NVL(ID_AREA_PROFESIONAL, 0) AS "ID_AREA_PROFESIONAL", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(SUFIJO, '-') AS "SUFIJO", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(ESTADO, '-') AS "ESTADO", 
    (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	CASE 
        WHEN (SELECT COUNT(OTF_OPERARIO_AREA.ID_AREA_PROFESIONAL) FROM OTF_OPERARIO_AREA WHERE OTF_OPERARIO_AREA.ID_AREA_PROFESIONAL = OTM_AREA_PROFESIONAL.ID_AREA_PROFESIONAL) > 0 THEN 1
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS   
FROM OTM_AREA_PROFESIONAL;

/*------------------------------------------------------------------------------------------------------------------------*/



CREATE OR REPLACE VIEW V_OTF_EXCEPCION_PERIODO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/01/2016 01:58:41 p.m.
	Descripcion:	Vista para obtener los registros de la tabla OTF_EXCEPCION_PERIODO
	
	CONTROL DE CAMBIOS
	
	Autor:            CARLOS GOMEZ ONDOY
    Fecha:            20/01/2016 
    Descripcion:    SE AGREGAN EL CAMPO UNIDAD_INTERNA
	
*/
SELECT
	NVL(ID_EXCEPCION_PERIODO, 0) AS ID_EXCEPCION_PERIODO, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_UNIDAD_TIEMPO, 0) AS ID_UNIDAD_TIEMPO, 
	NVL(VIGENCIA, 0) AS VIGENCIA, 
	NVL(UNIDAD_INTERNA, '-') AS "UNIDAD_INTERNA", 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_EXCEPCION_PERIODO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_EXCEPCION_PERIODOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            18/01/2016 01:58:41 p.m.
    Descripcion:    Vista para obtener los registros de la tabla OTF_EXCEPCION_PERIODO
    
    CONTROL DE CAMBIOS
    
    Autor:            CARLOS GOMEZ ONDOY
    Fecha:            19/01/2016 
    Descripcion:    SE AGREGAN LOS CAMPOS IDENTIFICACION, NOMBRE_FUNCIONARIO, DESCRIPCION_UNIDAD_TIEMPO, UNIDAD_UNIDAD_TIEMPO, VALOR_UNIDAD_TIEMPO, TIEMPO_ASIGNADO, TIEMPO_RESTANTE
    
    Autor:            CARLOS GOMEZ ONDOY
    Fecha:            20/01/2016 
    Descripcion:    SE AGREGAN EL CAMPO UNIDAD_INTERNA
    
*/
SELECT
    NVL(ID_EXCEPCION_PERIODO, 0) AS "ID_EXCEPCION_PERIODO", 
    NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
    (SELECT B.ID_PERSONAL FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A .NUM_EMPLEADO) AS IDENTIFICACION,
    (SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS NOMBRE_FUNCIONARIO,
    NVL(ID_UNIDAD_TIEMPO, 0) AS "ID_UNIDAD_TIEMPO", 
    (SELECT B.DESCRIPCION FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) AS DESCRIPCION_UNIDAD_TIEMPO,
    (SELECT B.UNIDAD FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) AS UNIDAD_UNIDAD_TIEMPO,
    (SELECT B.VALOR FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) AS VALOR_UNIDAD_TIEMPO,
     (SELECT B.VALOR FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) || '  '||
     CASE  (SELECT B.UNIDAD FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) 
                  WHEN 1 THEN 'Minutos'
                  WHEN 2 THEN 'Horas'
                  WHEN 3 THEN 'Dias'
                  WHEN 4 THEN 'Semanas'
                  WHEN 5 THEN 'Meses'
                  WHEN 6 THEN 'Años'
    END AS TIEMPO_ASIGNADO,
    '' AS TIEMPO_RESTANTE,
    NVL(VIGENCIA, 0) AS "VIGENCIA", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(UNIDAD_INTERNA, '-') AS "UNIDAD_INTERNA", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTF_EXCEPCION_PERIODO A;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTF_OPERARIO_AREA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			27/01/2016 12:12:35 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_OPERARIO_AREA
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(ID_AREA_PROFESIONAL, 0) AS ID_AREA_PROFESIONAL, 
	NVL(CATEGORIA_LABORAL, '-') AS CATEGORIA_LABORAL, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_OPERARIO_AREA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_OPERARIO_AREALst
AS
/*
    Autor:            Cesar Bermudez Garcia
    Fecha:            27/01/2016 12:12:35 p.m.
    Descripcion:    Vista para obtener los registros de la tabla OTF_OPERARIO_AREA
    
    CONTROL DE CAMBIOS
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            05/02/2016 
    Descripcion:    Se agrega el campo NUM_EMPLEADO_SECTOR
    
	Autor:			Cesar Bermudez Garcia
	Fecha:			27/01/2016 12:12:35 p.m.
	Descripcion:	Vista para obtener los registros de la tabla OTF_OPERARIO_AREA
	
	Autor:			Cesar Bermudez Y Carlos Ondoy
	Fecha:			05/02/2016 12:12:35 p.m.
	Descripcion:	Se agregan dos columnas nuevas AREA Y NUM_EMPLEADO_SECTOR
*/
SELECT
    NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
    NVL(ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
    NVL(ID_AREA_PROFESIONAL, 0) AS "ID_AREA_PROFESIONAL", 
    (SELECT DESCRIPCION FROM OTM_AREA_PROFESIONAL WHERE OPERARIO.ID_AREA_PROFESIONAL = ID_AREA_PROFESIONAL) AS "AREA",
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS EMPLEADOS WHERE OPERARIO.NUM_EMPLEADO = EMPLEADOS.NUM_EMPLEADO) AS NOMBRE_EMPLEADO,
    (SELECT ID_PERSONAL FROM EU_EMPLEADOS EMPLEADOS WHERE OPERARIO.NUM_EMPLEADO = EMPLEADOS.NUM_EMPLEADO) AS CEDULA,
    NVL(CATEGORIA_LABORAL, '-') AS "CATEGORIA_LABORAL", 
    NVL(ESTADO, '-') AS "ESTADO", 
    (CASE CATEGORIA_LABORAL
        WHEN 'PRO' THEN 'Profesional'
        WHEN 'OPE' THEN 'Operario'
        END) "CATEGORIA",
      (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESCRIPCION_ESTADO",
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    NVL(NUM_EMPLEADO, 0)  || ',' ||   NVL(ID_SECTOR_TALLER, 0) AS NUM_EMPLEADO_SECTOR,
    CASE 
        WHEN (SELECT COUNT(B.NUM_EMPLEADO) FROM OTT_OPERARIO_ORDEN_TRAB B WHERE B.NUM_EMPLEADO = OPERARIO.NUM_EMPLEADO AND B.ID_SECTOR_TALLER = OPERARIO.ID_SECTOR_TALLER) > 0 THEN 1        
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS
FROM OTF_OPERARIO_AREA OPERARIO;


/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_DOCUMENTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			28/02/2016 11:08:50 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_DOCUMENTO
*/
SELECT
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(TAMANIO_MAXIMO, 0) AS TAMANIO_MAXIMO, 
	NVL(FORMATOS_ADMITIDOS, '-') AS FORMATOS_ADMITIDOS, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(PROTEGIDO, 0) AS PROTEGIDO
FROM OTM_TIPO_DOCUMENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_DOCUMENTOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			28/01/2016 09:49:24 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_DOCUMENTO
*/
SELECT
	NVL(ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(TAMANIO_MAXIMO, 0) AS "TAMANIO_MAXIMO", 
	NVL(FORMATOS_ADMITIDOS, '-') AS "FORMATOS_ADMITIDOS", 
	NVL(ESTADO, '-') AS "ESTADO", 
	(CASE ESTADO
		WHEN 'ACT' THEN 'Activo'
		WHEN 'INA' THEN 'Inactivo'
	END) "DESCRIPCION_ESTADO",
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	NVL(PROTEGIDO, 0) AS "PROTEGIDO"
FROM OTM_TIPO_DOCUMENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ETAPA_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/01/2016 04:13:10 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ETAPA_ORDEN_TRABAJO
*/
SELECT
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ORDEN, 0) AS ORDEN, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_ETAPA_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ETAPA_ORDEN_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/01/2016 04:13:10 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ETAPA_ORDEN_TRABAJO
*/
SELECT
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS "ID_ETAPA_ORDEN_TRABAJO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ORDEN, 0) AS "ORDEN", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_ETAPA_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_OPERARIO_ORDEN_TRAB
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/02/2016 11:07:52 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_OPERARIO_ORDEN_TRAB
	
	
	CONTROL DE CAMBIOS
	
	Autor:            César Bermúdez García
    Fecha:            05/02/2016 
    Descripcion:      Se devuelven fechas vacías en caso de estar en nulo
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO, 
	NVL(CARGO, '-') AS CARGO, 
	NVL(FECHA_PROPUESTA, TO_DATE('','DD-MM-YYYY')) AS FECHA_PROPUESTA, 
	NVL(FECHA_EJECUTA, TO_DATE('','DD-MM-YYYY')) AS FECHA_EJECUTA, 
	NVL(FECHA_DESDE, TO_DATE('','DD-MM-YYYY')) AS FECHA_DESDE, 
	NVL(FECHA_HASTA, TO_DATE('','DD-MM-YYYY')) AS FECHA_HASTA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_OPERARIO_ORDEN_TRAB;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_OPERARIO_ORDEN_TRABLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            03/02/2016 11:07:52 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_OPERARIO_ORDEN_TRAB
	
	CONTROL DE CAMBIOS
	
	Autor:            Carlos Gómez Ondoy
    Fecha:            05/02/2016 
    Descripcion:      Se agregan los campos CEDULA, NOMBRE_EMPLEADO y DESC_AREA
	
	Autor:            Carlos Gómez Ondoy
    Fecha:            08/02/2016 
    Descripcion:      Se agrega el campo DESC_TIEMPO
	
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/02/2016 11:07:52 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_OPERARIO_ORDEN_TRAB
	
	CAMBIOS:
    
        Autor:            Cesar Bermudez Garcia
        Fecha:            08/02/2016
        Descripcion:       Se agregan las columnas de nombre completo, número de cédula y un campo vacio para el area profesional.
		
		Autor:            Cesar Bermudez Garcia
        Fecha:            15/02/2016
        Descripcion:      Se agrega el campo de clasificación a la vista
	
		
		Autor:            Cesar Bermudez Garcia
        Fecha:            18/02/2016
        Descripcion:      Se envian las fechas nulas en campos vacios, se agregan las columnaS:
							TIEMPO_REAL_CLAS,TIEMPO_EST_CLAS,ID_UNIDAD_TIEMPO_REAL,ID_UNIDAD_TIEMPO_EST
							TIEMPO_REAL Y TIEMPO_EST
*/
        SELECT NVL (NUM_EMPLEADO, 0) AS "NUM_EMPLEADO",
          NVL (ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO",
          NVL (ID_ETAPA_ORDEN_TRABAJO, 0) AS "ID_ETAPA_ORDEN_TRABAJO",
          NVL (CARGO, '-') AS "CARGO",
          NVL (FECHA_PROPUESTA, TO_DATE ('', 'DD-MM-YYYY'))
             AS "FECHA_PROPUESTA",
          NVL (FECHA_EJECUTA, TO_DATE ('', 'DD-MM-YYYY')) AS "FECHA_EJECUTA",
          NVL (FECHA_DESDE, TO_DATE ('', 'DD-MM-YYYY')) AS "FECHA_DESDE",
          NVL (FECHA_HASTA, TO_DATE ('', 'DD-MM-YYYY')) AS "FECHA_HASTA",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          (SELECT B.ID_PERSONAL
             FROM EU_EMPLEADOS B
            WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS CEDULA,
             (SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS NOMBRE_EMPLEADO,
          (SELECT C.DESCRIPCION
             FROM OTM_AREA_PROFESIONAL C
            WHERE C.ID_AREA_PROFESIONAL =
                     (SELECT B.ID_AREA_PROFESIONAL
                        FROM OTF_OPERARIO_AREA B
                       WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO
                             AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER))
             AS DESC_AREA,
          (SELECT D.TIEMPO
             FROM OTT_TIEMPO_OPERARIO D
            WHERE     D.NUM_EMPLEADO = A.NUM_EMPLEADO
                  AND D.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                  AND D.ID_UBICACION = A.ID_UBICACION
                  AND D.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND D.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                  AND D.CLASIFICACION = 'EST')
          || ' '
          || (SELECT C.DESCRIPCION
                FROM OTM_UNIDAD_TIEMPO C
               WHERE C.ID_UNIDAD_TIEMPO =
                        (SELECT B.ID_UNIDAD_TIEMPO
                           FROM OTT_TIEMPO_OPERARIO B
                          WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                                AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                                AND B.ID_UBICACION = A.ID_UBICACION
                                AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                                AND B.ID_ETAPA_ORDEN_TRABAJO =
                                       A.ID_ETAPA_ORDEN_TRABAJO
                                AND B.CLASIFICACION = 'EST'))
             AS DESC_TIEMPO_ESTIMADO,
             (SELECT D.TIEMPO
             FROM OTT_TIEMPO_OPERARIO D
            WHERE     D.NUM_EMPLEADO = A.NUM_EMPLEADO
                  AND D.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                  AND D.ID_UBICACION = A.ID_UBICACION
                  AND D.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND D.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                  AND D.CLASIFICACION = 'RAL')
          || ' '
          || (SELECT C.DESCRIPCION
                FROM OTM_UNIDAD_TIEMPO C
               WHERE C.ID_UNIDAD_TIEMPO =
                        (SELECT B.ID_UNIDAD_TIEMPO
                           FROM OTT_TIEMPO_OPERARIO B
                          WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                                AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                                AND B.ID_UBICACION = A.ID_UBICACION
                                AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                                AND B.ID_ETAPA_ORDEN_TRABAJO =
                                       A.ID_ETAPA_ORDEN_TRABAJO
                                AND B.CLASIFICACION = 'RAL'))
             AS DESC_TIEMPO_REAL,
          NVL (
             (SELECT B.CLASIFICACION
                FROM OTT_TIEMPO_OPERARIO B
               WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                     AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                     AND B.ID_UBICACION = A.ID_UBICACION
                     AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                     AND B.CLASIFICACION = 'RAL'),
             0)
             AS "TIEMPO_REAL_CLAS",
          NVL (
             (SELECT B.CLASIFICACION
                FROM OTT_TIEMPO_OPERARIO B
               WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                     AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                     AND B.ID_UBICACION = A.ID_UBICACION
                     AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                     AND B.CLASIFICACION = 'EST'),
             0)
             AS "TIEMPO_EST_CLAS",
          NVL (
             (SELECT B.ID_UNIDAD_TIEMPO
                FROM OTT_TIEMPO_OPERARIO B
               WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                     AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                     AND B.ID_UBICACION = A.ID_UBICACION
                     AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                     AND B.CLASIFICACION = 'RAL'),
             0)
             AS "ID_UNIDAD_TIEMPO_REAL",
          NVL (
             (SELECT B.ID_UNIDAD_TIEMPO
                FROM OTT_TIEMPO_OPERARIO B
               WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                     AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                     AND B.ID_UBICACION = A.ID_UBICACION
                     AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                     AND B.CLASIFICACION = 'EST'),
             0)
             AS "ID_UNIDAD_TIEMPO_EST",
          NVL (
             (SELECT B.TIEMPO
                FROM OTT_TIEMPO_OPERARIO B
               WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                     AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                     AND B.ID_UBICACION = A.ID_UBICACION
                     AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                     AND B.CLASIFICACION = 'RAL'),
             0)
             AS "TIEMPO_REAL",
          NVL (
             (SELECT B.TIEMPO
                FROM OTT_TIEMPO_OPERARIO B
               WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                     AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                     AND B.ID_UBICACION = A.ID_UBICACION
                     AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                     AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                     AND B.CLASIFICACION = 'EST'),
             0)
             AS "TIEMPO_EST"
     FROM OTT_OPERARIO_ORDEN_TRAB A;





/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_TIEMPO_OPERARIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/02/2016 11:07:52 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_TIEMPO_OPERARIO
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO, 
	NVL(TIEMPO, 0) AS TIEMPO, 
	NVL(ID_UNIDAD_TIEMPO, 0) AS ID_UNIDAD_TIEMPO, 
	NVL(CLASIFICACION, '-') AS CLASIFICACION, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_TIEMPO_OPERARIO;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_TIEMPO_OPERARIOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            03/02/2016 11:07:52 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_TIEMPO_OPERARIO
    
    CONTROL DE CAMBIOS
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            10/02/2016
    Descripcion:    Se agregan los campos CEDULA, NOMBRE_EMPLEADO, DESC_AREA, DESC_TIEMPO_REAL, CARGO
    
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
	NVL(ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS "ID_ETAPA_ORDEN_TRABAJO", 
	NVL(TIEMPO, 0) AS "TIEMPO", 
	NVL(ID_UNIDAD_TIEMPO, 0) AS "ID_UNIDAD_TIEMPO", 
	NVL(CLASIFICACION, '-') AS "CLASIFICACION", 
	NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT B.ID_PERSONAL
             FROM EU_EMPLEADOS B
            WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS CEDULA,
             (SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
             AS NOMBRE_EMPLEADO,
             (SELECT C.DESCRIPCION
             FROM OTM_AREA_PROFESIONAL C
            WHERE C.ID_AREA_PROFESIONAL =
                     (SELECT B.ID_AREA_PROFESIONAL
                        FROM OTF_OPERARIO_AREA B
                       WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO
                             AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER))
             AS DESC_AREA,
             (SELECT D.TIEMPO
             FROM OTT_TIEMPO_OPERARIO D
            WHERE     D.NUM_EMPLEADO = A.NUM_EMPLEADO
                  AND D.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                  AND D.ID_UBICACION = A.ID_UBICACION
                  AND D.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                  AND D.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO
                  AND D.CLASIFICACION = 'EST')
          || ' '
          || (SELECT C.DESCRIPCION
                FROM OTM_UNIDAD_TIEMPO C
               WHERE C.ID_UNIDAD_TIEMPO =
                        (SELECT B.ID_UNIDAD_TIEMPO
                           FROM OTT_TIEMPO_OPERARIO B
                          WHERE     B.NUM_EMPLEADO = A.NUM_EMPLEADO
                                AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                                AND B.ID_UBICACION = A.ID_UBICACION
                                AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                                AND B.ID_ETAPA_ORDEN_TRABAJO =
                                       A.ID_ETAPA_ORDEN_TRABAJO
                                       AND B.CLASIFICACION = 'EST'))
             AS DESC_TIEMPO_REAL,
             (SELECT B.CARGO FROM OTT_OPERARIO_ORDEN_TRAB B 
                                WHERE  B.NUM_EMPLEADO = A.NUM_EMPLEADO
                                AND B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER
                                AND B.ID_UBICACION = A.ID_UBICACION
                                AND B.ID_ORDEN_TRABAJO = A.ID_ORDEN_TRABAJO
                                AND B.ID_ETAPA_ORDEN_TRABAJO = A.ID_ETAPA_ORDEN_TRABAJO) AS CARGO
FROM OTT_TIEMPO_OPERARIO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_VIABILIDAD_TECNICA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/02/2016 03:07:35 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_VIABILIDAD_TECNICA
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_UNIDAD_TIEMPO, 0) AS ID_UNIDAD_TIEMPO, 
	NVL(TIEMPO_RESPUESTA, 0) AS TIEMPO_RESPUESTA, 
	NVL(VIABILIDAD, 0) AS VIABILIDAD, 
	NVL(ESTIMACION_PRESUPUESTARIA, 0) AS ESTIMACION_PRESUPUESTARIA, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_VIABILIDAD_TECNICA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_VIABILIDAD_TECNICALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/02/2016 03:07:35 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_VIABILIDAD_TECNICA
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			20/10/2016
	Descripcion:	Se agrega el campo VALOR_UNIDAD_TIEMPO, UNIDAD
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ID_UNIDAD_TIEMPO, 0) AS "ID_UNIDAD_TIEMPO", 
	NVL(TIEMPO_RESPUESTA, 0) AS "TIEMPO_RESPUESTA", 
	NVL(VIABILIDAD, 0) AS "VIABILIDAD", 
	NVL(ESTIMACION_PRESUPUESTARIA, 0) AS "ESTIMACION_PRESUPUESTARIA", 
	NVL(DETALLE, '-') AS "DETALLE", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT B.VALOR FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) AS VALOR_UNIDAD_TIEMPO,
	(SELECT B.UNIDAD FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = A.ID_UNIDAD_TIEMPO) AS UNIDAD
FROM OTT_VIABILIDAD_TECNICA A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ANTEPROYECTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/02/2016 11:00:10 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ANTEPROYECTO
*/
SELECT
	NVL(ID_UNIDAD_TIEMPO, 0) AS ID_UNIDAD_TIEMPO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(VERSION, 0) AS VERSION, 
	NVL(EDITABLE, 0) AS EDITABLE, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ACTIVIDADES_CONTEMPLADAS, '-') AS ACTIVIDADES_CONTEMPLADAS, 
	NVL(CANTIDAD, 0) AS CANTIDAD, 
	NVL(UNIDAD_MEDIDA, '-') AS UNIDAD_MEDIDA, 
	NVL(AVAL_PLANTA_FISICA, 0) AS AVAL_PLANTA_FISICA, 
	NVL(AVAL_FORESTA, 0) AS AVAL_FORESTA, 
	NVL(TIEMPO_RESPUESTA, 0) AS TIEMPO_RESPUESTA, 
	NVL(FECHA_ENVIA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_ENVIA, 
	NVL(FECHA_RESPONDE, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_RESPONDE, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_ANTEPROYECTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ANTEPROYECTOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/02/2016 11:00:10 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ANTEPROYECTO
	
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			07/03/2016
	Descripcion:	Se agregan los campos NUMERO_ORDEN_PDAGO, DESCRIPCION_ORDEN_TRABAJO, CATEGORIA_ORDEN_TRABAJO, ACTIVIDAD_ORDEN_TRABAJO
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			11/03/2016
	Descripcion:	Se agregan los campos VALOR_UNIDAD_TIEMPO
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			18/08/2016
	Descripcion:	Se modifica la consulta del campo OBSERVACIONES, tenia error de subconsulta
	
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_UNIDAD_TIEMPO, 0) AS "ID_UNIDAD_TIEMPO", 
    NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
    NVL(VERSION, 0) AS "VERSION", 
    NVL(EDITABLE, 0) AS "EDITABLE", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(ACTIVIDADES_CONTEMPLADAS, '-') AS "ACTIVIDADES_CONTEMPLADAS", 
    NVL(CANTIDAD, 0) AS "CANTIDAD", 
    NVL(UNIDAD_MEDIDA, '-') AS "UNIDAD_MEDIDA", 
    NVL(AVAL_PLANTA_FISICA, 0) AS "AVAL_PLANTA_FISICA", 
    NVL(AVAL_FORESTA, 0) AS "AVAL_FORESTA", 
    NVL(TIEMPO_RESPUESTA, 0) AS "TIEMPO_RESPUESTA", 
    NVL(FECHA_ENVIA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_ENVIA", 
    NVL(FECHA_RESPONDE, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_RESPONDE", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT MAX(TP.OBSERVACIONES) FROM OTT_TRAZABILIDAD_PROCESO TP WHERE TP.ID_ORDEN_TRABAJO = AP.ID_ORDEN_TRABAJO AND TP.ID_UBICACION = AP.ID_UBICACION) AS OBSERVACIONES,
	(SELECT B.NUMERO_ORDEN FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = AP.ID_UBICACION AND B.ID_ORDEN_TRABAJO = AP.ID_ORDEN_TRABAJO) AS NUMERO_ORDEN_PDAGO,
	(SELECT B.DESCRIPCION_TRABAJO FROM OTT_ORDEN_TRABAJO B WHERE B.ID_UBICACION = AP.ID_UBICACION AND B.ID_ORDEN_TRABAJO = AP.ID_ORDEN_TRABAJO) AS DESCRIPCION_ORDEN_TRABAJO,
	(SELECT B.DESCRIPCION FROM OTM_CATEGORIA_SERVICIO B WHERE B.ID_CATEGORIA_SERVICIO = (SELECT C.ID_CATEGORIA_SERVICIO FROM OTT_ORDEN_TRABAJO C WHERE C.ID_UBICACION = AP.ID_UBICACION AND C.ID_ORDEN_TRABAJO = AP.ID_ORDEN_TRABAJO))  AS CATEGORIA_ORDEN_TRABAJO,
	(SELECT B.DESCRIPCION FROM OTM_ACTIVIDAD B WHERE B.ID_ACTIVIDAD = (SELECT C.ID_ACTIVIDAD FROM OTT_ORDEN_TRABAJO C WHERE C.ID_UBICACION = AP.ID_UBICACION AND C.ID_ORDEN_TRABAJO = AP.ID_ORDEN_TRABAJO))  AS ACTIVIDAD_ORDEN_TRABAJO	,
	(SELECT B.VALOR FROM OTM_UNIDAD_TIEMPO B WHERE B.ID_UNIDAD_TIEMPO = AP.ID_UNIDAD_TIEMPO) AS VALOR_UNIDAD_TIEMPO
FROM OTT_ANTEPROYECTO AP;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DOCUMENTO_ANTEPROYECT
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/02/2016 11:26:35 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DOCUMENTO_ANTEPROYECT
*/
SELECT
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
	NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO, 
	NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS ID_ADJUNTO_ORDEN_TRABAJO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(VERSION, 0) AS VERSION, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DOCUMENTO_ANTEPROYECT;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DOCUMENTO_ANTEPROYECTLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/02/2016 11:26:35 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DOCUMENTO_ANTEPROYECT
*/
SELECT NVL (ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO",
          NVL (ID_ETAPA_ORDEN_TRABAJO, 0) AS "ID_ETAPA_ORDEN_TRABAJO",
          NVL (ID_ADJUNTO_ORDEN_TRABAJO, 0) AS "ID_ADJUNTO_ORDEN_TRABAJO",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO",
          NVL (VERSION, 0) AS "VERSION",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
		(SELECT NOMBRE_ARCHIVO FROM V_OTT_ADJUNTO_ORDEN_TRABAJOLST WHERE DA.ID_ADJUNTO_ORDEN_TRABAJO = ID_ADJUNTO_ORDEN_TRABAJO)
			AS NOMBRE_ARCHIVO,
		(SELECT DESC_TIPO_DOCUMENTO FROM V_OTT_ADJUNTO_ORDEN_TRABAJOLST WHERE DA.ID_ADJUNTO_ORDEN_TRABAJO = ID_ADJUNTO_ORDEN_TRABAJO)
			AS DESC_TIPO_DOCUMENTO,
		(SELECT DESCRIPCION FROM V_OTT_ADJUNTO_ORDEN_TRABAJOLST WHERE DA.ID_ADJUNTO_ORDEN_TRABAJO = ID_ADJUNTO_ORDEN_TRABAJO)
			AS DESCRIPCION
     FROM OTT_DOCUMENTO_ANTEPROYECT DA;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTM_UNIDAD_ENCARGADA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/03/2016 12:10:33 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UNIDAD_ENCARGADA
*/
SELECT
	NVL(ID_LUGAR_TRABAJO, 0) AS ID_LUGAR_TRABAJO, 
	NVL(COD_UNIDAD_SIRH, 0) AS COD_UNIDAD_SIRH, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_UNIDAD_ENCARGADA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UNIDAD_ENCARGADALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/03/2016 12:10:33 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UNIDAD_ENCARGADA
*/
   SELECT NVL (ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO",
          NVL (COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          (SELECT NOMBRE
             FROM OTM_LUGAR_TRABAJO
            WHERE ID_LUGAR_TRABAJO = UE.ID_LUGAR_TRABAJO)
             AS DESCRIPCION,
          (SELECT ESTADO
             FROM OTM_LUGAR_TRABAJO
            WHERE ID_LUGAR_TRABAJO = UE.ID_LUGAR_TRABAJO)
             AS ESTADO
     FROM OTM_UNIDAD_ENCARGADA UE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_RUBRO_DECISION_INICIA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			16/03/2016 09:48:14 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_RUBRO_DECISION_INICIA
*/
SELECT
	NVL(ID_RUBRO_DECISION_INICIA, 0) AS ID_RUBRO_DECISION_INICIA, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ORDEN, 0) AS ORDEN, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_RUBRO_DECISION_INICIA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_RUBRO_DECISION_INICIALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			16/03/2016 09:48:14 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_RUBRO_DECISION_INICIA

	Autor:			Cesar Bermudez
	Fecha:			10/05/2016
	Descripcion:	Se agrega campo DESC_ESTADO
*/
   SELECT NVL (ID_RUBRO_DECISION_INICIA, 0) AS "ID_RUBRO_DECISION_INICIA",
          NVL (DESCRIPCION, '-') AS "DESCRIPCION",
          NVL (ORDEN, 0) AS "ORDEN",
          NVL (ESTADO, '-') AS "ESTADO",
          CASE ESTADO
             WHEN 'ACT' THEN 'Activo'
             WHEN 'INA' THEN 'Inactivo'
          END
             AS DESC_ESTADO,
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP"
     FROM OTM_RUBRO_DECISION_INICIA;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTT_DESICION_INICIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/03/2016 08:50:32 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DESICION_INICIAL
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_TIPO_OBRA, 0) AS ID_TIPO_OBRA, 
	NVL(FECHA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DESICION_INICIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DESICION_INICIALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			17/03/2016 08:50:32 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DESICION_INICIAL
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ID_TIPO_OBRA, 0) AS "ID_TIPO_OBRA", 
	NVL(FECHA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_DESICION_INICIAL;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTM_VIA_CONTRATO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:01:21 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_VIA_CONTRATO
*/
SELECT
	NVL(ID_VIA_CONTRATO, 0) AS ID_VIA_CONTRATO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(TOPE_ECONOMICO, 0) AS TOPE_ECONOMICO, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_VIA_CONTRATO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_VIA_CONTRATOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:01:21 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_VIA_CONTRATO
*/
   SELECT NVL (ID_VIA_CONTRATO, 0) AS "ID_VIA_CONTRATO",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (DESCRIPCION, '-') AS "DESCRIPCION",
          NVL (TOPE_ECONOMICO, 0) AS "TOPE_ECONOMICO",
          NVL (ESTADO, '-') AS "ESTADO",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          '' AS POSEE_REGISTROS_ASOCIADOS,
           (CASE ESTADO
                WHEN 'ACT' THEN 'Activo' 
                 WHEN 'INA' THEN 'Inactivo' 
            END) "DESC_ESTADO"
     FROM OTM_VIA_CONTRATO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTH_CONTRATACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 09:56:09 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTH_CONTRATACION
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(VERSION, 0) AS VERSION, 
	NVL(ID_VIA_CONTRATO, 0) AS ID_VIA_CONTRATO, 
	NVL(EDITABLE, 0) AS EDITABLE, 
	NVL(NUMERO_SOLICITUD, 0) AS NUMERO_SOLICITUD, 
	NVL(NUMERO_DECISION_INICIAL, '-') AS NUMERO_DECISION_INICIAL, 
	NVL(NUMERO_CONTRATO, '-') AS NUMERO_CONTRATO, 
	NVL(NOMBRE_CONTRATO, '-') AS NOMBRE_CONTRATO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTH_CONTRATACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTH_CONTRATACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 09:56:09 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTH_CONTRATACION
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(VERSION, 0) AS "VERSION", 
	NVL(ID_VIA_CONTRATO, 0) AS "ID_VIA_CONTRATO", 
	NVL(EDITABLE, 0) AS "EDITABLE", 
	NVL(NUMERO_SOLICITUD, 0) AS "NUMERO_SOLICITUD", 
	NVL(NUMERO_DECISION_INICIAL, '-') AS "NUMERO_DECISION_INICIAL", 
	NVL(NUMERO_CONTRATO, '-') AS "NUMERO_CONTRATO", 
	NVL(NOMBRE_CONTRATO, '-') AS "NOMBRE_CONTRATO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTH_CONTRATACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ETAPA_VIA_CONTRATO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 09:56:09 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ETAPA_VIA_CONTRATO
*/
SELECT
	NVL(ID_VIA_CONTRATO, 0) AS ID_VIA_CONTRATO, 
	NVL(ID_ETAPA_CONTRATACION, 0) AS ID_ETAPA_CONTRATACION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_ETAPA_VIA_CONTRATO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ETAPA_VIA_CONTRATOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 09:56:09 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ETAPA_VIA_CONTRATO
*/
SELECT
    NVL(ID_VIA_CONTRATO, 0) AS "ID_VIA_CONTRATO", 
    NVL(ID_ETAPA_CONTRATACION, 0) AS "ID_ETAPA_CONTRATACION", 
    NVL(ESTADO, '-') AS "ESTADO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT DESCRIPCION FROM OTM_ETAPA_CONTRATACION WHERE ID_ETAPA_CONTRATACION = EVC.ID_ETAPA_CONTRATACION)
    AS DESC_ETAPA_CONTRAT
FROM OTM_ETAPA_VIA_CONTRATO EVC;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTT_CONTRATACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			07/07/2016 04:50:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_CONTRATACION
*/
SELECT
	NVL(ID_ETAPA_CONTRATACION, 0) AS ID_ETAPA_CONTRATACION, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(VERSION, 0) AS VERSION, 
	NVL(ID_VIA_CONTRATO, 0) AS ID_VIA_CONTRATO, 
	NVL(EDITABLE, 0) AS EDITABLE, 
	NVL(NUMERO_SOLICITUD, '-') AS NUMERO_SOLICITUD, 
	NVL(NUMERO_DECISION_INICIAL, '-') AS NUMERO_DECISION_INICIAL, 
	NVL(NUMERO_CONTRATO, '-') AS NUMERO_CONTRATO, 
	NVL(NOMBRE_CONTRATO, '-') AS NOMBRE_CONTRATO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_CONTRATACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_CONTRATACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			07/07/2016 04:50:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_CONTRATACION
*/
SELECT
	NVL(ID_ETAPA_CONTRATACION, 0) AS "ID_ETAPA_CONTRATACION", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(VERSION, 0) AS "VERSION", 
	NVL(ID_VIA_CONTRATO, 0) AS "ID_VIA_CONTRATO", 
	NVL(EDITABLE, 0) AS "EDITABLE", 
	NVL(NUMERO_SOLICITUD, '-') AS "NUMERO_SOLICITUD", 
	NVL(NUMERO_DECISION_INICIAL, '-') AS "NUMERO_DECISION_INICIAL", 
	NVL(NUMERO_CONTRATO, '-') AS "NUMERO_CONTRATO", 
	NVL(NOMBRE_CONTRATO, '-') AS "NOMBRE_CONTRATO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_CONTRATACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ENCARGADO_CONTRATO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 12:03:08 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ENCARGADO_CONTRATO
*/
SELECT
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_ENCARGADO_CONTRATO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ENCARGADO_CONTRATOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 12:03:08 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ENCARGADO_CONTRATO
*/
   SELECT NVL (NUM_EMPLEADO, 0) AS "NUM_EMPLEADO",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (ESTADO, '-') AS "ESTADO",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          (SELECT ID_PERSONAL
             FROM EU_EMPLEADOS
            WHERE EC.NUM_EMPLEADO = NUM_EMPLEADO)
             AS ID_PERSONAL,
          (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2
             FROM EU_EMPLEADOS
            WHERE EC.NUM_EMPLEADO = NUM_EMPLEADO)
             AS NOMBRE,
          (CASE ESTADO
              WHEN 'ACT' THEN 1
              WHEN 'INA' THEN 0
           END)
             AS ESTADO_ACTIVO,
             (CASE ESTADO
                WHEN 'ACT' THEN 'Activo' 
                WHEN 'INA' THEN 'Inactivo' 
            END) "DESC_ESTADO"                
     FROM OTM_ENCARGADO_CONTRATO EC;


/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DOCUMENTO_CONTRATACION
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            20/04/2016 03:32:02 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_DOCUMENTO_CONTRATACION
    
    Autor:           Cesar Bermudez
    Fecha:           9/05/2016
    Descripcion:    sea agrega el campo NUMERO_LINEA
*/
SELECT
    NVL(ID_UBICACION, 0) AS ID_UBICACION, 
    NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
    NVL(VERSION, 0) AS VERSION, 
    NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
    NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS ID_ETAPA_ORDEN_TRABAJO, 
    NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS ID_ADJUNTO_ORDEN_TRABAJO, 
    NVL(ID_ETAPA_CONTRATACION, 0) AS ID_ETAPA_CONTRATACION, 
    NVL(DOCUMENTO_TRAMITADO, 0) AS DOCUMENTO_TRAMITADO, 
    NVL(ORIGEN, '-') AS ORIGEN, 
    NVL(FECHA_HORA_REGISTRO, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_REGISTRO, 
    NVL(NUMERO_LINEA, 0) AS NUMERO_LINEA, 
    NVL(USUARIO, '-') AS USUARIO, 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DOCUMENTO_CONTRATACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DOCUMENTO_CONTRATLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            20/04/2016 03:32:02 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_DOCUMENTO_CONTRATACION
    
    Autor:           Cesar Bermudez
    Fecha:           9/05/2016
    Descripcion:    sea agrega el campo NUMERO_LINEA
    
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
    NVL(VERSION, 0) AS "VERSION", 
    NVL(ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO", 
    NVL(ID_ETAPA_ORDEN_TRABAJO, 0) AS "ID_ETAPA_ORDEN_TRABAJO", 
    NVL(ID_ADJUNTO_ORDEN_TRABAJO, 0) AS "ID_ADJUNTO_ORDEN_TRABAJO", 
    NVL(NUMERO_LINEA, 0) AS "NUMERO_LINEA", 
    NVL(ID_ETAPA_CONTRATACION, 0) AS "ID_ETAPA_CONTRATACION", 
    NVL(DOCUMENTO_TRAMITADO, 0) AS "DOCUMENTO_TRAMITADO", 
    NVL(ORIGEN, '-') AS "ORIGEN", 
    NVL(FECHA_HORA_REGISTRO, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_REGISTRO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2
        FROM EU_EMPLEADOS
        WHERE DOC.USUARIO = NUM_EMPLEADO OR DOC.USUARIO = ID_PERSONAL)
        AS RESPONSABLE,
    (SELECT NOMBRE_ARCHIVO FROM OTT_ADJUNTO_ORDEN_TRABAJO WHERE DOC.ID_ADJUNTO_ORDEN_TRABAJO = ID_ADJUNTO_ORDEN_TRABAJO)
    AS NOMBRE_ARCHIVO,
    (SELECT DESCRIPCION FROM OTT_ADJUNTO_ORDEN_TRABAJO WHERE DOC.ID_ADJUNTO_ORDEN_TRABAJO = ID_ADJUNTO_ORDEN_TRABAJO)
    AS DESCRIPCION
FROM OTT_DOCUMENTO_CONTRATACION DOC;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_DETALLE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_DETALLE
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS ID_PRE_ORDEN_TRABAJO, 
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO, 
	NVL(ID_SUBCOMPONENTE, 0) AS ID_SUBCOMPONENTE, 
	NVL(ID_REQUERIMIENTO, 0) AS ID_REQUERIMIENTO, 
	NVL(VALOR, '-') AS VALOR, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_FICHA_TECNICA_DETALLE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_DETALLELst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_DETALLE
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS "ID_PRE_ORDEN_TRABAJO", 
	NVL(ID_ESPACIO, 0) AS "ID_ESPACIO", 
	NVL(ID_SUBCOMPONENTE, 0) AS "ID_SUBCOMPONENTE", 
	NVL(ID_REQUERIMIENTO, 0) AS "ID_REQUERIMIENTO", 
	NVL(VALOR, '-') AS "VALOR", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTF_FICHA_TECNICA_DETALLE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_ESPACIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_ESPACIO
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS ID_PRE_ORDEN_TRABAJO, 
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO
FROM OTF_FICHA_TECNICA_ESPACIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_ESPACIOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_ESPACIO
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS "ID_PRE_ORDEN_TRABAJO", 
	NVL(ID_ESPACIO, 0) AS "ID_ESPACIO"
FROM OTF_FICHA_TECNICA_ESPACIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_GENERAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_GENERAL
	
	CONTROL DE CAMBIOS 
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			01/09/2016 
	Descripcion:    Se agrega el campo CUENTA_CON_PRESUPUESTO
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS ID_PRE_ORDEN_TRABAJO, 
	NVL(CONSERVA_MOBILIARIO, 0) AS CONSERVA_MOBILIARIO, 
	NVL(REQUIERE_NUEVO_MOBILIARIO, 0) AS REQUIERE_NUEVO_MOBILIARIO, 
	NVL(OTROS_MOBILIARIO, '-') AS OTROS_MOBILIARIO, 
	NVL(OTRO_TIPO_REQUERIMIENTO, '-') AS OTRO_TIPO_REQUERIMIENTO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(CUENTA_CON_ALARMA, 0) AS CUENTA_CON_ALARMA, 
	NVL(REQUIERE_ALARMA, 0) AS REQUIERE_ALARMA, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(USUARIO, '-') AS USUARIO,
	NVL(CUENTA_CON_PRESUPUESTO, 0) AS CUENTA_CON_PRESUPUESTO
FROM OTF_FICHA_TECNICA_GENERAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_GENERALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_GENERAL
	
	CONTROL DE CAMBIOS 
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			01/09/2016 
	Descripcion:    Se agrega el campo CUENTA_CON_PRESUPUESTO
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS "ID_PRE_ORDEN_TRABAJO", 
	NVL(CONSERVA_MOBILIARIO, 0) AS "CONSERVA_MOBILIARIO", 
	NVL(REQUIERE_NUEVO_MOBILIARIO, 0) AS "REQUIERE_NUEVO_MOBILIARIO", 
	NVL(OTROS_MOBILIARIO, '-') AS "OTROS_MOBILIARIO", 
	NVL(OTRO_TIPO_REQUERIMIENTO, '-') AS "OTRO_TIPO_REQUERIMIENTO", 
	NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
	NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(CUENTA_CON_ALARMA, 0) AS "CUENTA_CON_ALARMA", 
	NVL(REQUIERE_ALARMA, 0) AS "REQUIERE_ALARMA", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(USUARIO, '-') AS "USUARIO",
	NVL(CUENTA_CON_PRESUPUESTO, 0) AS CUENTA_CON_PRESUPUESTO
FROM OTF_FICHA_TECNICA_GENERAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_SUBCOMP
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_SUBCOMP
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS ID_PRE_ORDEN_TRABAJO, 
	NVL(ID_ESPACIO, 0) AS ID_ESPACIO, 
	NVL(ID_SUBCOMPONENTE, 0) AS ID_SUBCOMPONENTE
FROM OTF_FICHA_TECNICA_SUBCOMP;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_FICHA_TECNICA_SUBCOMPLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_FICHA_TECNICA_SUBCOMP
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS "ID_PRE_ORDEN_TRABAJO", 
	NVL(ID_ESPACIO, 0) AS "ID_ESPACIO", 
	NVL(ID_SUBCOMPONENTE, 0) AS "ID_SUBCOMPONENTE"
FROM OTF_FICHA_TECNICA_SUBCOMP;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_PRE_ORDEN_TRABAJO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 11:54:35 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_PRE_ORDEN_TRABAJO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			26/04/2016
	Descripcion:	Se agrega el campo INCLUIDA_EN_RECEPCION
	
*/
SELECT
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS ID_PRE_ORDEN_TRABAJO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_LUGAR_TRABAJO, 0) AS ID_LUGAR_TRABAJO, 
	NVL(ID_CATEGORIA_SERVICIO, 0) AS ID_CATEGORIA_SERVICIO, 
	NVL(ID_ACTIVIDAD, 0) AS ID_ACTIVIDAD, 
	NVL(NUM_EMPLEADO, 0) AS NUM_EMPLEADO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(FECHA_HORA_SOLICITA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_SOLICITA, 
	NVL(COD_UNIDAD_SIRH, 0) AS COD_UNIDAD_SIRH, 
	NVL(NOMBRE_PERSONA_CONTACTO, '-') AS NOMBRE_PERSONA_CONTACTO, 
	NVL(TELEFONO, '-') AS TELEFONO, 
	NVL(SENNAS_EXACTAS, '-') AS SENNAS_EXACTAS, 
	NVL(DESCRIPCION_TRABAJO, '-') AS DESCRIPCION_TRABAJO, 
	NVL(NOMBRE_IMAGEN1, '-') AS NOMBRE_IMAGEN1, 
	NVL(IMAGEN1, '') AS IMAGEN1, 
	NVL(NOMBRE_IMAGEN2, '-') AS NOMBRE_IMAGEN2, 
	NVL(IMAGEN2, '') AS IMAGEN2, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP,
	NVL(INCLUIDA_EN_RECEPCION, 0) AS INCLUIDA_EN_RECEPCION,
	NVL(ID_UBICACION_ORIGEN, 0) AS ID_UBICACION_ORIGEN
FROM OTF_PRE_ORDEN_TRABAJO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_PRE_ORDEN_TRABAJOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 11:54:35 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_PRE_ORDEN_TRABAJO
	
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			19/04/2016 
	Descripcion:    Se agregan los campos de NOMBRE_SOLICITANTE, ID_PERSONAL, ESTADO_ACTUAL_ORDEN_TRABAJO
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			21/04/2016 
	Descripcion:    Se agregan los campos de NUMERO_ORDEN, INCLUIDA_EN_RECEPCION, TIPO_ORDEN_TRABAJO, ID_SECTOR_TALLER, ES_EMERGENCIA
	
*/
SELECT
    NVL(ID_PRE_ORDEN_TRABAJO, 0) AS "ID_PRE_ORDEN_TRABAJO", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_LUGAR_TRABAJO, 0) AS "ID_LUGAR_TRABAJO", 
    NVL(ID_CATEGORIA_SERVICIO, 0) AS "ID_CATEGORIA_SERVICIO", 
    NVL(ID_ACTIVIDAD, 0) AS "ID_ACTIVIDAD", 
    NVL(NUM_EMPLEADO, 0) AS "NUM_EMPLEADO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(FECHA_HORA_SOLICITA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_SOLICITA", 
    NVL(COD_UNIDAD_SIRH, 0) AS "COD_UNIDAD_SIRH", 
    NVL(NOMBRE_PERSONA_CONTACTO, '-') AS "NOMBRE_PERSONA_CONTACTO", 
    NVL(TELEFONO, '-') AS "TELEFONO", 
    NVL(SENNAS_EXACTAS, '-') AS "SENNAS_EXACTAS", 
    NVL(DESCRIPCION_TRABAJO, '-') AS "DESCRIPCION_TRABAJO", 
    NVL(NOMBRE_IMAGEN1, '-') AS "NOMBRE_IMAGEN1", 
    NVL(IMAGEN1, '') AS "IMAGEN1", 
    NVL(NOMBRE_IMAGEN2, '-') AS "NOMBRE_IMAGEN2", 
    NVL(IMAGEN2, '') AS "IMAGEN2", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT B.NOMBRE FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) || ' ' || 
    (SELECT B.APELLIDO1 FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) || ' ' || 
    (SELECT B.APELLIDO2 FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) AS "NOMBRE_SOLICITANTE",
    (SELECT B.ID_PERSONAL FROM EU_EMPLEADOS B WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO) AS "ID_PERSONAL",
    (SELECT B.ESTADO FROM OTF_REVISION_PRE_ORDEN_TRA B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO AND TIME_STAMP = (SELECT MAX(C.TIME_STAMP) FROM OTF_REVISION_PRE_ORDEN_TRA C WHERE C.ID_UBICACION = A.ID_UBICACION AND C.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO   )) AS ESTADO_ACTUAL_ORDEN_TRABAJO,
	0 AS NUMERO_ORDEN,
	NVL(INCLUIDA_EN_RECEPCION, 0) AS INCLUIDA_EN_RECEPCION,
	'ORD' AS TIPO_ORDEN_TRABAJO,
	0 AS ID_SECTOR_TALLER,
	0 AS ES_EMERGENCIA,
	 (SELECT B.DESCRIPCION
		 FROM OTM_CATEGORIA_SERVICIO B
		WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
		 AS DESC_CATEGORIA_SERVICIO,
	  (SELECT B.DESCRIPCION
		 FROM OTC_ESTADO_ORDEN_TRABAJO B
		WHERE B.ESTADO_ORDEN_TRABAJO = (SELECT B.ESTADO FROM OTF_REVISION_PRE_ORDEN_TRA B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO AND TIME_STAMP = (SELECT MAX(C.TIME_STAMP) FROM OTF_REVISION_PRE_ORDEN_TRA C WHERE C.ID_UBICACION = A.ID_UBICACION AND C.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO )))
		 AS DESC_ESTADO_ORDEN,
	  NVL (SUBSTR (SENNAS_EXACTAS, 0, 20), '-') AS "PARTE_SENNAS_EXACTAS",
	  (SELECT B.NOMBRE
		 FROM OTM_LUGAR_TRABAJO B
		WHERE B.ID_LUGAR_TRABAJO = A.ID_LUGAR_TRABAJO)
		 AS DESC_LUGAR_TRABAJO,
	  (SELECT B.DESCRIPCION
		 FROM OTM_ACTIVIDAD B
		WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO
			  AND B.ID_ACTIVIDAD = A.ID_ACTIVIDAD)
		 AS DESC_ACTIVIDAD,
		 (SELECT B.REQUIERE_FICHA_TECNICA
             FROM OTM_CATEGORIA_SERVICIO B
            WHERE B.ID_CATEGORIA_SERVICIO = A.ID_CATEGORIA_SERVICIO)
             AS CATEG_REQUIERE_FICHA_TECNICA,
			 CASE
             WHEN (SELECT COUNT (B.ID_UBICACION)
                     FROM OTF_FICHA_TECNICA_GENERAL B
                    WHERE B.ID_UBICACION = A.ID_UBICACION
                          AND B.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO) > 0
             THEN
                1
             ELSE
                0
          END
             AS POSEE_FICHA_TECNICA,
			 'Ordinaria' AS DESC_TIPO_ORDEN,
			 0 AS CONSECUTIVO,
			 '' AS ID_ORDEN_TRABAJO,
			 0 AS PARA_IMPRESION_RECEPCION,
	NVL(ID_UBICACION_ORIGEN, 0) AS ID_UBICACION_ORIGEN
FROM OTF_PRE_ORDEN_TRABAJO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_REVISION_PRE_ORDEN_TRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_REVISION_PRE_ORDEN_TRA
*/
SELECT
	NVL(ID_REVISION_PRE_ORDEN_TRA, 0) AS ID_REVISION_PRE_ORDEN_TRA, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS ID_PRE_ORDEN_TRABAJO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_REVISION_PRE_ORDEN_TRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_REVISION_PRE_ORDENLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			14/04/2016 08:27:11 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_REVISION_PRE_ORDEN_TRA
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			22/04/2016
	Descripcion:	Se agregan los campos DESC_ESTADO_ORDEN, RESPONSABLE, COD_UNIDAD_SIRH, NOMBRE_SOLICITANTE
	
*/
SELECT
	NVL(ID_REVISION_PRE_ORDEN_TRA, 0) AS "ID_REVISION_PRE_ORDEN_TRA", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_PRE_ORDEN_TRABAJO, 0) AS "ID_PRE_ORDEN_TRABAJO", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT B.DESCRIPCION FROM OTC_ESTADO_ORDEN_TRABAJO B WHERE B.ESTADO_ORDEN_TRABAJO = A.ESTADO) AS DESC_ESTADO_ORDEN,
	'' AS RESPONSABLE,
	(SELECT B.COD_UNIDAD_SIRH FROM OTF_PRE_ORDEN_TRABAJO B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO) AS COD_UNIDAD_SIRH,
	(SELECT B.NOMBRE_SOLICITANTE FROM V_OTF_PRE_ORDEN_TRABAJOLst B WHERE B.ID_UBICACION = A.ID_UBICACION AND B.ID_PRE_ORDEN_TRABAJO = A.ID_PRE_ORDEN_TRABAJO) AS NOMBRE_SOLICITANTE
FROM OTF_REVISION_PRE_ORDEN_TRA A;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_LINEA_ADJUDICACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			07/07/2016 04:50:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_LINEA_ADJUDICACION
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(VERSION, 0) AS VERSION, 
	NVL(NUMERO_LINEA, 0) AS NUMERO_LINEA, 
	NVL(MONTO_ADJUDICADO, 0) AS MONTO_ADJUDICADO, 
	NVL(ADJUDICATARIO, '-') AS ADJUDICATARIO, 
	NVL(FECHA_INICIO_OBRA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_INICIO_OBRA, 
	NVL(PLAZO_EN_DIAS, 0) AS PLAZO_EN_DIAS, 
	NVL(FORMA_CALCULO_DIAS, '-') AS FORMA_CALCULO_DIAS, 
	NVL(FECHA_FIN_ESTIMADA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_FIN_ESTIMADA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_LINEA_ADJUDICACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_LINEA_ADJUDICACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			07/07/2016 04:50:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_LINEA_ADJUDICACION
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(VERSION, 0) AS "VERSION", 
	NVL(NUMERO_LINEA, 0) AS "NUMERO_LINEA", 
	NVL(MONTO_ADJUDICADO, 0) AS "MONTO_ADJUDICADO", 
	NVL(ADJUDICATARIO, '-') AS "ADJUDICATARIO", 
	NVL(FECHA_INICIO_OBRA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_INICIO_OBRA", 
	NVL(PLAZO_EN_DIAS, 0) AS "PLAZO_EN_DIAS", 
	NVL(FORMA_CALCULO_DIAS, '-') AS "FORMA_CALCULO_DIAS", 
	NVL(FECHA_FIN_ESTIMADA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_FIN_ESTIMADA", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_LINEA_ADJUDICACION;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTM_SUBCATEGORIA_MATERIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/05/2016 09:54:58 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SUBCATEGORIA_MATERIAL
*/
SELECT
	NVL(ID_SUBCATEGORIA_MATERIAL, 0) AS ID_SUBCATEGORIA_MATERIAL, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_SUBCATEGORIA_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SUBCATEGORIA_MATERIALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/05/2016 09:54:58 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SUBCATEGORIA_MATERIAL
*/
SELECT
	NVL(ID_SUBCATEGORIA_MATERIAL, 0) AS "ID_SUBCATEGORIA_MATERIAL", 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESC_ESTADO",
	CASE 
        WHEN (SELECT COUNT(B.ID_SUBCATEGORIA_MATERIAL) FROM OTM_SUBCATEGORIA_CATEGOR B WHERE B.ID_SUBCATEGORIA_MATERIAL = A.ID_SUBCATEGORIA_MATERIAL) > 0 THEN 1        
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS,
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_SUBCATEGORIA_MATERIAL A;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTM_CATEGORIA_MATERIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/05/2016 05:14:54 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_CATEGORIA_MATERIAL
*/
SELECT
	NVL(ID_CATEGORIA_MATERIAL, 0) AS ID_CATEGORIA_MATERIAL, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_CATEGORIA_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_CATEGORIA_MATERIALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/05/2016 05:14:54 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_CATEGORIA_MATERIAL
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			23/05/2016
	Descripcion:	Se agrega el campo POSEE_REGISTROS_ASOCIADOS
	
*/
SELECT
	NVL(ID_CATEGORIA_MATERIAL, 0) AS "ID_CATEGORIA_MATERIAL", 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	(CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESC_ESTADO",
	CASE 
        WHEN (SELECT COUNT(B.ID_CATEGORIA_MATERIAL) FROM OTM_MATERIAL B WHERE B.ID_CATEGORIA_MATERIAL = A.ID_CATEGORIA_MATERIAL) > 0 THEN 1        
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS,
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_CATEGORIA_MATERIAL A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SUBCATEGORIA_CATEGOR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/05/2016 05:14:54 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SUBCATEGORIA_CATEGOR
*/
SELECT
	NVL(ID_CATEGORIA_MATERIAL, 0) AS ID_CATEGORIA_MATERIAL, 
	NVL(ID_SUBCATEGORIA_MATERIAL, 0) AS ID_SUBCATEGORIA_MATERIAL, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_SUBCATEGORIA_CATEGOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_SUBCATEGORIA_CATEGORLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			19/05/2016 05:14:54 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_SUBCATEGORIA_CATEGOR
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez ONDOY
	Fecha:			12/07/2016 
	Descripcion:	Se agrega el campo POSEE_REGISTROS_ASOCIADOS 
	
	Autor:			Carlos Gómez ONDOY
	Fecha:			22/11/2016 
	Descripcion:	Se agregan los campos ESTADO_SUBCATEG_MATE, UBICACION_SUBCATEG_MATE
	
*/
SELECT
	NVL(ID_CATEGORIA_MATERIAL, 0) AS "ID_CATEGORIA_MATERIAL", 
	NVL(ID_SUBCATEGORIA_MATERIAL, 0) AS "ID_SUBCATEGORIA_MATERIAL", 
	NVL(USUARIO, '-') AS "USUARIO", 
	(SELECT B.DESCRIPCION  FROM OTM_SUBCATEGORIA_MATERIAL B WHERE B.ID_SUBCATEGORIA_MATERIAL = A.ID_SUBCATEGORIA_MATERIAL) AS DESCRIPCION_SUBCATEG_MATE,
	(SELECT B.ESTADO  FROM OTM_SUBCATEGORIA_MATERIAL B WHERE B.ID_SUBCATEGORIA_MATERIAL = A.ID_SUBCATEGORIA_MATERIAL) AS ESTADO_SUBCATEG_MATE,
	(SELECT B.ID_UBICACION_ADMINISTRA  FROM OTM_SUBCATEGORIA_MATERIAL B WHERE B.ID_SUBCATEGORIA_MATERIAL = A.ID_SUBCATEGORIA_MATERIAL) AS UBICACION_SUBCATEG_MATE,
	CASE 
        WHEN (SELECT COUNT(B.ID_CATEGORIA_MATERIAL) FROM OTM_MATERIAL B WHERE B.ID_CATEGORIA_MATERIAL = A.ID_CATEGORIA_MATERIAL AND B.ID_SUBCATEGORIA_MATERIAL = A.ID_SUBCATEGORIA_MATERIAL) > 0 THEN 1        
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS,
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_SUBCATEGORIA_CATEGOR A;

/*------------------------------------------------------------------------------------------------------------------------*/



CREATE OR REPLACE VIEW V_OTM_UNIDAD_MEDIDA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			23/05/2016 10:24:54 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_UNIDAD_MEDIDA
*/
SELECT
	NVL(ID_UNIDAD_MEDIDA, 0) AS ID_UNIDAD_MEDIDA, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ACRONIMO, '-') AS ACRONIMO, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_UNIDAD_MEDIDA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_UNIDAD_MEDIDALst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            23/05/2016 10:24:54 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_UNIDAD_MEDIDA
*/
SELECT
    NVL(ID_UNIDAD_MEDIDA, 0) AS "ID_UNIDAD_MEDIDA", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(ACRONIMO, '-') AS "ACRONIMO", 
    NVL(ESTADO, '-') AS "ESTADO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
    END) "DESC_ESTADO",
    CASE 
        WHEN (SELECT COUNT(B.ID_UNIDAD_MEDIDA) FROM OTM_MATERIAL B WHERE B.ID_UNIDAD_MEDIDA = A.ID_UNIDAD_MEDIDA) > 0 THEN 1        
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS,
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_UNIDAD_MEDIDA A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ALMACEN_BODEGA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			23/05/2016 02:48:06 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_ALMACEN_BODEGA
*/
SELECT
	NVL(ID_ALMACEN_BODEGA, 0) AS ID_ALMACEN_BODEGA, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(TIPO, '-') AS TIPO, 
	NVL(ID_SECTOR_TALLER, 0) AS ID_SECTOR_TALLER, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_ALMACEN_BODEGA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ALMACEN_BODEGALst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            23/05/2016 02:48:06 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_ALMACEN_BODEGA
*/
SELECT NVL (ID_ALMACEN_BODEGA, 0) AS "ID_ALMACEN_BODEGA",
          NVL (ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA",
          NVL (DESCRIPCION, '-') AS "DESCRIPCION",
          NVL (TIPO, '-') AS "TIPO",
          NVL (ID_SECTOR_TALLER, 0) AS "ID_SECTOR_TALLER",
          (SELECT B.NOMBRE  FROM OTM_SECTOR_TALLER B
            WHERE B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER) AS "DESC_SECTOR_TALLER",
          (SELECT B.NUM_EMPLEADO_COORDINADOR FROM OTM_SECTOR_TALLER B
            WHERE B.ID_SECTOR_TALLER = A.ID_SECTOR_TALLER) AS "COORDINADOR_SECTOR_TALLER",
          NVL (ESTADO, '-') AS "ESTADO",
          NVL (USUARIO, '-') AS "USUARIO",
     (CASE TIPO
        WHEN 'ALM' THEN 'Almacén' 
        WHEN 'BOD' THEN 'Bodega' 
           END)"DESC_TIPO",
    (CASE ESTADO
        WHEN 'ACT' THEN 'Activo' 
        WHEN 'INA' THEN 'Inactivo' 
           END)"DESC_ESTADO",
          CASE
             WHEN (SELECT COUNT (B.ID_ALMACEN_BODEGA)
                     FROM OTF_INVENTARIO B
                    WHERE B.ID_ALMACEN_BODEGA = A.ID_ALMACEN_BODEGA) > 0
             THEN   1
             ELSE   0
          END AS "POSEE_REGISTROS_ASOCIADOS",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))  AS "TIME_STAMP",
    CASE 
            WHEN (SELECT COUNT(ID_ALMACEN_BODEGA) FROM OTF_INVENTARIO I
            WHERE I.ID_ALMACEN_BODEGA = A.ID_ALMACEN_BODEGA AND I.ID_UBICACION_ADMINISTRA =A.ID_UBICACION_ADMINISTRA )   > 0
             THEN   1
             ELSE  0    
		   END AS "PERTENECE_INVENTARIO"
FROM OTM_ALMACEN_BODEGA A;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTM_VIA_COMPRA_CONTRATO
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            27/05/2016 02:21:33 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_VIA_COMPRA_CONTRATO
*/
SELECT
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
    NVL(ID_UBICACION, 0) AS ID_UBICACION, 
    NVL(DESCRIPCION, '-') AS DESCRIPCION, 
    NVL(TOPE_ECONOMICO, 0) AS TOPE_ECONOMICO, 
    NVL(ESTADO, '-') AS ESTADO, 
    NVL(AMBITO, '-') AS AMBITO, 
    NVL(USUARIO, '-') AS USUARIO, 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_VIA_COMPRA_CONTRATO;
/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTM_VIA_COMPRA_CONTRATOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            27/05/2016 02:21:33 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_VIA_COMPRA_CONTRATO
*/
   SELECT NVL (ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (DESCRIPCION, '-') AS "DESCRIPCION",
          NVL (TOPE_ECONOMICO, 0) AS "TOPE_ECONOMICO",
          NVL (ESTADO, '-') AS "ESTADO",
          NVL (AMBITO, '-') AS "AMBITO",
          (CASE ESTADO
              WHEN 'ACT' THEN 'Activo'
              WHEN 'INA' THEN 'Inactivo'
           END)
             "DESC_ESTADO",
          (CASE AMBITO
              WHEN 'CON' THEN 'Contrataciones'
              WHEN 'COM' THEN 'Compras'
              WHEN 'AMB' THEN 'Ambos'
           END)
             "DESC_AMBITO",
          '' AS "POSEE_REGISTROS_ASOCIADOS",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP"
     FROM OTM_VIA_COMPRA_CONTRATO;
/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTM_MATERIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/05/2016 11:14:50 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_MATERIAL
*/
SELECT
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ID_CATEGORIA_MATERIAL, 0) AS ID_CATEGORIA_MATERIAL, 
	NVL(ID_SUBCATEGORIA_MATERIAL, 0) AS ID_SUBCATEGORIA_MATERIAL, 
	NVL(ID_UNIDAD_MEDIDA, 0) AS ID_UNIDAD_MEDIDA, 
	NVL(PARTIDA_PRESUPUESTARIA, '-') AS PARTIDA_PRESUPUESTARIA, 
	NVL(CLASIFICACION, '-') AS CLASIFICACION, 
	NVL(PUNTO_REORDEN, 0) AS PUNTO_REORDEN, 
	NVL(MAXIMO_ALMACEN, 0) AS MAXIMO_ALMACEN, 
	NVL(MAXIMO_BODEGA, 0) AS MAXIMO_BODEGA, 
	NVL(COSTO_PROMEDIO, 0) AS COSTO_PROMEDIO, 
	NVL(UBICACION_FISICA, '-') AS UBICACION_FISICA, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL
FROM OTM_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_MATERIALLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            29/05/2016 11:14:50 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTM_MATERIAL
	
	CONTROL DE CAMBIOS
	
    Autor:            CARLOS GOMEZ ONDOY
    Fecha:            12/07/2016
    Descripcion:    Se modifican los campos COSTO_TOTAL, CANTIDAD_EXISTENCIA y se elimina el campo ID_ALMACEN_BODEGA
	
    Autor:            CARLOS GOMEZ ONDOY
    Fecha:            31/10/2016
    Descripcion:    Se agregan los campos POSEE_REGISTROS_ASOCIADOS
	
    Autor:            Mauricio Salas Chaves
    Fecha:            20/01/2017
    Descripcion:    Se agregan los campos CANTIDAD_DISPONIBLE, SELECCIONADO
    
    Autor:            Mauricio Salas Chaves
    Fecha:            24/01/2017
    Descripcion:    Se agregan los campos DESC_CATEGORIA, DESC_SUBCATEGORIA, DESC_UNIDAD_MEDIDA
    
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			22/02/2017
	Descripcion:	Se agregan los campos ID_ALMACEN_BODEGA
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			11/04/2017
	Descripcion:	Se agregan los campos CANTIDAD_EXISTENCIA_UNIDAD
	
*/
    SELECT NVL (DESCRIPCION, '-') AS "DESCRIPCION",
          NVL (ID_CATEGORIA_MATERIAL, 0) AS "ID_CATEGORIA_MATERIAL",
          (SELECT DESCRIPCION
             FROM OTM_CATEGORIA_MATERIAL
            WHERE ID_CATEGORIA_MATERIAL = MAT.ID_CATEGORIA_MATERIAL
                  AND ID_UBICACION_ADMINISTRA = MAT.ID_UBICACION_ADMINISTRA)
             AS "DESC_CATEGORIA",
          NVL (ID_SUBCATEGORIA_MATERIAL, 0) AS "ID_SUBCATEGORIA_MATERIAL",
          (SELECT DESCRIPCION
             FROM OTM_SUBCATEGORIA_MATERIAL
            WHERE ID_SUBCATEGORIA_MATERIAL = MAT.ID_SUBCATEGORIA_MATERIAL
                  AND ID_UBICACION_ADMINISTRA = MAT.ID_UBICACION_ADMINISTRA)
             AS "DESC_SUBCATEGORIA",
          NVL (ID_UNIDAD_MEDIDA, 0) AS "ID_UNIDAD_MEDIDA",
          (SELECT DESCRIPCION
             FROM OTM_UNIDAD_MEDIDA
            WHERE ID_UNIDAD_MEDIDA = MAT.ID_UNIDAD_MEDIDA)
             AS "DESC_UNIDAD_MEDIDA",
          NVL (PARTIDA_PRESUPUESTARIA, '-') AS "PARTIDA_PRESUPUESTARIA",
          NVL (CLASIFICACION, '-') AS "CLASIFICACION",
          NVL (PUNTO_REORDEN, 0) AS "PUNTO_REORDEN",
          NVL (MAXIMO_ALMACEN, 0) AS "MAXIMO_ALMACEN",
          NVL (MAXIMO_BODEGA, 0) AS "MAXIMO_BODEGA",
          NVL (COSTO_PROMEDIO, 0) AS "COSTO_PROMEDIO",
          NVL (UBICACION_FISICA, '-') AS "UBICACION_FISICA",
          NVL (ESTADO, '-') AS "ESTADO",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          NVL (ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA",
          NVL (ID_MATERIAL, 0) AS "ID_MATERIAL",
          NVL (
             (SELECT CANTIDAD_DISPONIBLE
                FROM OTF_INVENTARIO
               WHERE ID_MATERIAL = MAT.ID_MATERIAL
                     AND ID_UBICACION_ADMINISTRA =
                            MAT.ID_UBICACION_ADMINISTRA
                     AND ID_ALMACEN_BODEGA =
                            (SELECT C.ID_ALMACEN_BODEGA
                               FROM OTM_ALMACEN_BODEGA C
                              WHERE C.ID_UBICACION_ADMINISTRA =
                                       MAT.ID_UBICACION_ADMINISTRA
                                    AND C.TIPO = 'ALM')),
             0)
             AS CANTIDAD_EXISTENCIA,
          NVL (
             (SELECT CANTIDAD_DISPONIBLE - CANTIDAD_RESERVADA
                FROM OTF_INVENTARIO
               WHERE ID_MATERIAL = MAT.ID_MATERIAL
                     AND ID_UBICACION_ADMINISTRA =
                            MAT.ID_UBICACION_ADMINISTRA
                     AND ID_ALMACEN_BODEGA =
                            (SELECT C.ID_ALMACEN_BODEGA
                               FROM OTM_ALMACEN_BODEGA C
                              WHERE C.ID_UBICACION_ADMINISTRA =
                                       MAT.ID_UBICACION_ADMINISTRA
                                    AND C.TIPO = 'ALM')),
             0)
             AS CANTIDAD_DISPONIBLE,
          (CASE ESTADO
              WHEN 'ACT' THEN 'Activo'
              WHEN 'INA' THEN 'Inactivo'
           END)
             "DESC_ESTADO",
          NVL (
             (SELECT CANTIDAD_DISPONIBLE
                FROM OTF_INVENTARIO
               WHERE ID_MATERIAL = MAT.ID_MATERIAL
                     AND ID_UBICACION_ADMINISTRA =
                            MAT.ID_UBICACION_ADMINISTRA
                     AND ID_ALMACEN_BODEGA =
                            (SELECT C.ID_ALMACEN_BODEGA
                               FROM OTM_ALMACEN_BODEGA C
                              WHERE C.ID_UBICACION_ADMINISTRA =
                                       MAT.ID_UBICACION_ADMINISTRA
                                    AND C.TIPO = 'ALM'))
             * COSTO_PROMEDIO,
             0)
             AS "COSTO_TOTAL",
          CASE
             WHEN (SELECT COUNT (B.ID_ALMACEN_BODEGA)
                     FROM OTF_INVENTARIO B
                    WHERE B.ID_UBICACION_ADMINISTRA =
                             MAT.ID_UBICACION_ADMINISTRA
                          AND B.ID_MATERIAL = MAT.ID_MATERIAL) > 0
             THEN
                1
             ELSE
                0
          END
             AS "POSEE_REGISTROS_ASOCIADOS",
          0 AS SELECCIONADO,
            NVL (
             (SELECT SUM(CANTIDAD_DISPONIBLE)
                FROM OTF_INVENTARIO
               WHERE ID_MATERIAL = MAT.ID_MATERIAL
                     AND ID_UBICACION_ADMINISTRA =
                            MAT.ID_UBICACION_ADMINISTRA ),  0)  || ' '  
                             || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA = MAT.ID_UNIDAD_MEDIDA)
             AS CANTIDAD_EXISTENCIA_UNIDAD
     FROM OTM_MATERIAL MAT;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTF_INVENTARIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/05/2016 02:56:19 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_INVENTARIO
*/
SELECT
	NVL(ID_ALMACEN_BODEGA, 0) AS ID_ALMACEN_BODEGA, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD_DISPONIBLE, 0) AS CANTIDAD_DISPONIBLE, 
	NVL(CANTIDAD_RESERVADA, 0) AS CANTIDAD_RESERVADA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_INVENTARIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_INVENTARIOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			29/05/2016 02:56:19 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_INVENTARIO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			22/02/2017
	Descripcion:	Se agrega el campo DESCRIPCION_ALMACEN_BODEGA
    
    Autor:            Mauricio Salas Chaves
    Fecha:            27/01/2017
    Descripcion:     Se agregan los campos DISPONIBLE, PARTIDA_PRESUPUESTARIA, DESC_MATERIAL, SELECCIONADO
*/
SELECT
	NVL(ID_ALMACEN_BODEGA, 0) AS "ID_ALMACEN_BODEGA", 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(CANTIDAD_DISPONIBLE, 0) AS "CANTIDAD_DISPONIBLE", 
	NVL(CANTIDAD_RESERVADA, 0) AS "CANTIDAD_RESERVADA", 
    NVL(CANTIDAD_DISPONIBLE - CANTIDAD_RESERVADA, 0) AS "DISPONIBLE",
	NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT PARTIDA_PRESUPUESTARIA FROM OTM_MATERIAL WHERE ID_MATERIAL = OTF_INVENTARIO.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = OTF_INVENTARIO.ID_UBICACION_ADMINISTRA) AS "PARTIDA_PRESUPUESTARIA",
    (SELECT DESCRIPCION FROM OTM_MATERIAL WHERE ID_MATERIAL = OTF_INVENTARIO.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = OTF_INVENTARIO.ID_UBICACION_ADMINISTRA) AS "DESC_MATERIAL",
    0 AS SELECCIONADO,   
	(SELECT B. DESCRIPCION FROM OTM_ALMACEN_BODEGA B WHERE B.ID_ALMACEN_BODEGA =  OTF_INVENTARIO.ID_ALMACEN_BODEGA ) AS DESCRIPCION_ALMACEN_BODEGA
FROM OTF_INVENTARIO;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTL_DETALLE_MATERIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/06/2016 02:18:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_DETALLE_MATERIAL
*/
SELECT
	NVL(ID_DETALLE_MATERIAL, 0) AS ID_DETALLE_MATERIAL, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD_SOLICITADA, 0) AS CANTIDAD_SOLICITADA, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_DETALLE_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_DETALLE_MATERIALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/06/2016 02:18:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_DETALLE_MATERIAL
*/
SELECT
	NVL(ID_DETALLE_MATERIAL, 0) AS "ID_DETALLE_MATERIAL", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(CANTIDAD_SOLICITADA, 0) AS "CANTIDAD_SOLICITADA", 
	NVL(DETALLE, '-') AS "DETALLE", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_DETALLE_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DETALLE_MATERIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/06/2016 02:18:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DETALLE_MATERIAL
*/
SELECT
	NVL(ID_DETALLE_MATERIAL, 0) AS ID_DETALLE_MATERIAL, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD_SOLICITADA, 0) AS CANTIDAD_SOLICITADA, 
	NVL(CANTIDAD_RESERVADA, 0) AS CANTIDAD_RESERVADA, 
	NVL(CANTIDAD_RETIRADA, 0) AS CANTIDAD_RETIRADA, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(VIA_DESPACHO, '-') AS VIA_DESPACHO, 
	NVL(ID_ALMACEN_BODEGA, 0) AS ID_ALMACEN_BODEGA, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DETALLE_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DETALLE_MATERIALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/06/2016 02:18:29 p.m.
	Descripcion:	Vista para obtener los registros de la tabla OTT_DETALLE_MATERIAL
	
	CONTROL DE CAMBIOS 
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			29/06/2016 
	Descripcion:	Se agrea el campo DISPONIBLE_ALMACEN_SOLICITUD
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			27/09/2016 
	Descripcion:	Se agrega el campo DISP_ALMACEN_SOLICITUD_MEDIDA
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			07/10/2016
	Descripcion:	Se agrega el campo PARTIDA_PRESUPUESTARIA
	
	Autor:			Carlos Gomez Ondoy
	Fecha:			22/11/2016
	Descripcion:	Se agrega el campo COSTO_UNITARIO
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			22/11/2016 
	Descripcion:	Se agregan los campos DESCRIPCION_ALMACEN, DESCRIPCION_COMPRA 
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			01/12/2016 
	Descripcion:	Se modifican los campos para el acrónimo
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			13/02/2017
	Descripcion:	Se modifican los campos para el acrónimo
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			20/02/2017
	Descripcion:	Se modifican los campos para el acrónimo
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			13/04/2017
	Descripcion:	Se modifica el campo CANTIDAD_DISPONIBLE_INVENTARIO
	
	Autor:			CARLOS GOMEZ ONDOY
	Fecha:			24/04/2017
	Descripcion:	Se agrega el campo DISP_ALM_SOLIC_MEDIDA_RESERV
	
	
*/

  SELECT NVL (ID_DETALLE_MATERIAL, 0) AS "ID_DETALLE_MATERIAL",
          NVL (ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO",
          NVL (ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA",
          NVL (ID_MATERIAL, 0) AS "ID_MATERIAL",
          NVL (CANTIDAD_SOLICITADA, 0) AS "CANTIDAD_SOLICITADA",
          NVL (CANTIDAD_RESERVADA, 0) AS "CANTIDAD_RESERVADA",
          NVL (CANTIDAD_RETIRADA, 0) AS "CANTIDAD_RETIRADA",
          NVL (DETALLE, '-') AS "DETALLE",
          NVL (VIA_DESPACHO, '-') AS "VIA_DESPACHO",
          NVL (ID_ALMACEN_BODEGA, 0) AS "ID_ALMACEN_BODEGA",
          NVL (ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO",
          NVL (ESTADO, '-') AS "ESTADO",
          NVL (USUARIO, '-') AS "USUARIO",
          NVL (
             (SELECT B.DESCRIPCION
                FROM OTM_ALMACEN_BODEGA B
               WHERE B.ID_UBICACION_ADMINISTRA = DM.ID_UBICACION_ADMINISTRA
                     AND B.ID_ALMACEN_BODEGA = DM.ID_ALMACEN_BODEGA),
             '')
             AS DESCRIPCION_ALMACEN,
          NVL (
             (SELECT B.DESCRIPCION
                FROM OTM_VIA_COMPRA_CONTRATO B
               WHERE B.ID_UBICACION = DM.ID_UBICACION_ADMINISTRA
                     AND B.ID_VIA_COMPRA_CONTRATO = DM.ID_VIA_COMPRA_CONTRATO),
             '')
             AS DESCRIPCION_COMPRA,
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          (SELECT DESCRIPCION
             FROM OTM_MATERIAL
            WHERE ID_MATERIAL = DM.ID_MATERIAL)
             AS DESCRIPCION,
          (SELECT PARTIDA_PRESUPUESTARIA
             FROM OTM_MATERIAL
            WHERE ID_MATERIAL = DM.ID_MATERIAL)
             AS PARTIDA_PRESUPUESTARIA,
          (SELECT ID_UNIDAD_MEDIDA
             FROM OTM_MATERIAL
            WHERE ID_MATERIAL = DM.ID_MATERIAL)
             AS ID_UNIDAD_MEDIDA,
          (SELECT ACRONIMO
             FROM OTM_UNIDAD_MEDIDA UM
            WHERE UM.ID_UNIDAD_MEDIDA = (SELECT ID_UNIDAD_MEDIDA
                                           FROM OTM_MATERIAL
                                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             AS UNIDAD_DESCRIPCION,
          NVL ( (SELECT COSTO_PROMEDIO * CANTIDAD_SOLICITADA
                   FROM OTM_MATERIAL
                  WHERE ID_MATERIAL = DM.ID_MATERIAL),
               0)
             AS COSTO_PROMEDIO,
          NVL ( (SELECT COSTO_PROMEDIO
                   FROM OTM_MATERIAL
                  WHERE ID_MATERIAL = DM.ID_MATERIAL),
               0)
             AS COSTO_UNITARIO,
          CASE ESTADO
             WHEN 'PEN' THEN 'Pendiente de aprobación'
             WHEN 'APR' THEN 'Aprobada'
             WHEN 'DEN' THEN 'Denegada'
             WHEN 'PEV' THEN 'Pendiente de envío'
             WHEN 'EPC' THEN 'En proceso de compra'
             WHEN 'REB' THEN 'Recibido en bodega'
          END
             AS DESC_ESTADO,
          NVL (
             (SELECT CANTIDAD_DISPONIBLE
                FROM OTF_INVENTARIO
               WHERE     DM.ID_MATERIAL = ID_MATERIAL
                     AND DM.ID_UBICACION_ADMINISTRA = ID_UBICACION_ADMINISTRA
                     AND VIA_DESPACHO = 'ALM'
                     AND ID_ALMACEN_BODEGA = DM.ID_ALMACEN_BODEGA),
             0)
			 || ' ' || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             AS CANTIDAD_DISPONIBLE_INVENTARIO,
          NVL (CANTIDAD_SOLICITADA, 0) || ' '
          || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             AS "CANTIDAD_SOLICITADA_MEDIDA",
          NVL (CANTIDAD_RESERVADA, 0) || ' '
          || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             AS "CANTIDAD_RESERVADA_MEDIDA",
          NVL (CANTIDAD_RETIRADA, 0) || ' '
          || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             AS "CANTIDAD_RETIRADA_MEDIDA",
          (CASE NVL (ID_ALMACEN_BODEGA, 0)
              WHEN 0
              THEN
                 (SELECT B.CANTIDAD_DISPONIBLE - B.CANTIDAD_RESERVADA
                    FROM OTF_INVENTARIO B
                   WHERE B.ID_ALMACEN_BODEGA =
                            (SELECT C.ID_ALMACEN_BODEGA
                               FROM OTM_ALMACEN_BODEGA C
                              WHERE C.ID_UBICACION_ADMINISTRA =
                                       DM.ID_UBICACION_ADMINISTRA
                                    AND C.TIPO = 'ALM')
                         AND B.ID_UBICACION_ADMINISTRA =
                                DM.ID_UBICACION_ADMINISTRA
                         AND B.ID_MATERIAL = DM.ID_MATERIAL)
              ELSE
                 (SELECT B.CANTIDAD_DISPONIBLE - B.CANTIDAD_RESERVADA
                    FROM OTF_INVENTARIO B
                   WHERE B.ID_ALMACEN_BODEGA = DM.ID_ALMACEN_BODEGA
                         AND B.ID_UBICACION_ADMINISTRA =
                                DM.ID_UBICACION_ADMINISTRA
                         AND B.ID_MATERIAL = DM.ID_MATERIAL)
           END)
             DISPONIBLE_ALMACEN_SOLICITUD,
          (CASE NVL (ID_ALMACEN_BODEGA, 0)
              WHEN 0
              THEN 0
              ELSE
                 (SELECT B.CANTIDAD_DISPONIBLE - B.CANTIDAD_RESERVADA
                    FROM OTF_INVENTARIO B
                   WHERE B.ID_ALMACEN_BODEGA = DM.ID_ALMACEN_BODEGA
                         AND B.ID_UBICACION_ADMINISTRA =
                                DM.ID_UBICACION_ADMINISTRA
                         AND B.ID_MATERIAL = DM.ID_MATERIAL)
           END)
          || ' '
          || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             DISP_ALMACEN_SOLICITUD_MEDIDA,
		(CASE NVL (ID_ALMACEN_BODEGA, 0)
              WHEN 0
              THEN 0
              ELSE
                 (SELECT B.CANTIDAD_DISPONIBLE - B.CANTIDAD_RESERVADA
                    FROM OTF_INVENTARIO B
                   WHERE B.ID_ALMACEN_BODEGA = DM.ID_ALMACEN_BODEGA
                         AND B.ID_UBICACION_ADMINISTRA =
                                DM.ID_UBICACION_ADMINISTRA
                         AND B.ID_MATERIAL = DM.ID_MATERIAL) +  NVL (CANTIDAD_RESERVADA, 0)
           END)
          || ' '
          || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = DM.ID_MATERIAL))
             DISP_ALM_SOLIC_MEDIDA_RESERV
     FROM OTT_DETALLE_MATERIAL DM;	 
	 

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_SOLICITUD_MATERIAL
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/06/2016 02:18:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_MATERIAL
	
	CONTROL DE CAMBIOS 
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			27/06/2016
	Descripcion:	Seagrega el campo HISTORIAL_JUSTIFICACION
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			19/07/2016
	Descripcion:	Seagrega el campo ESTADO_SOL_MATERIAL
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(NO_REQUIERE_MATERIAL, 0) AS NO_REQUIERE_MATERIAL, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ID_TIPO_DOCUMENTO_SOLICITA, 0) AS ID_TIPO_DOCUMENTO_SOLICITA, 
	NVL(ID_ETAPA_ORDEN_TRABAJO_SOL, 0) AS ID_ETAPA_ORDEN_TRABAJO_SOL, 
	NVL(ID_ADJUNTO_SOLICITA, 0) AS ID_ADJUNTO_SOLICITA, 
	NVL(ID_TIPO_DOCUMENTO_RESPUESTA, 0) AS ID_TIPO_DOCUMENTO_RESPUESTA, 
	NVL(ID_ETAPA_ORDEN_TRABAJO_RES, 0) AS ID_ETAPA_ORDEN_TRABAJO_RES, 
	NVL(ID_ADJUNTO_RESPUESTA, 0) AS ID_ADJUNTO_RESPUESTA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(HISTORIAL_JUSTIFICACION, '-') AS HISTORIAL_JUSTIFICACION, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP,
	NVL(ESTADO_SOL_MATERIAL, '-') AS ESTADO_SOL_MATERIAL
FROM OTT_SOLICITUD_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_SOLICITUD_MATERIALLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			03/06/2016 02:18:29 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_MATERIAL
	
	CONTROL DE CAMBIOS 
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			19/07/2016
	Descripcion:	Seagrega el campo HISTORIAL_JUSTIFICACION, ESTADO_SOL_MATERIAL
	
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ORDEN_TRABAJO, '-') AS "ID_ORDEN_TRABAJO", 
	NVL(NO_REQUIERE_MATERIAL, 0) AS "NO_REQUIERE_MATERIAL", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ID_TIPO_DOCUMENTO_SOLICITA, 0) AS "ID_TIPO_DOCUMENTO_SOLICITA", 
	NVL(ID_ETAPA_ORDEN_TRABAJO_SOL, 0) AS "ID_ETAPA_ORDEN_TRABAJO_SOL", 
	NVL(ID_ADJUNTO_SOLICITA, 0) AS "ID_ADJUNTO_SOLICITA", 
	NVL(ID_TIPO_DOCUMENTO_RESPUESTA, 0) AS "ID_TIPO_DOCUMENTO_RESPUESTA", 
	NVL(ID_ETAPA_ORDEN_TRABAJO_RES, 0) AS "ID_ETAPA_ORDEN_TRABAJO_RES", 
	NVL(ID_ADJUNTO_RESPUESTA, 0) AS "ID_ADJUNTO_RESPUESTA", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(HISTORIAL_JUSTIFICACION, '-') AS HISTORIAL_JUSTIFICACION, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	NVL(ESTADO_SOL_MATERIAL, '-') AS ESTADO_SOL_MATERIAL
FROM OTT_SOLICITUD_MATERIAL;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DETALLE_RETIRO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			21/06/2016 02:32:03 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DETALLE_RETIRO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_RETIRO, 0) AS ID_SOLICITUD_RETIRO, 
	NVL(ID_DETALLE_MATERIAL, 0) AS ID_DETALLE_MATERIAL, 
	NVL(CANTIDAD_SOLICITADA, 0) AS CANTIDAD_SOLICITADA, 
	NVL(CANTIDAD_RETIRADA, 0) AS CANTIDAD_RETIRADA, 
	NVL(COSTO_CALCULADO, 0) AS COSTO_CALCULADO, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DETALLE_RETIRO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_DETALLE_RETIROLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			21/06/2016 02:32:03 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DETALLE_RETIRO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			30/06/2016
	Descripcion:	Se agregan los campos DISPONIBLE_ALMACEN_SOLICITUD, DESCRIPCION_UBICACION, DETALLE_MATERIAL
					NOMBRE_SOLICITANTE, NOMBRE_TALLER, ID_ORDEN_TRABAJO, ALMACEN_BODEGA, ID_ALMACEN_BODEGA, NUMERO_SALIDA
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			01/07/2016
	Descripcion:	Se agregan los campos ID_MATERIAL
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			26/03/2017
	Descripcion:	Se agregan los campos CANTIDAD_SOLICITADA_MEDIDA
	
*/
SELECT NVL (ANNO, 0) AS "ANNO",
        NVL (ID_SOLICITUD_RETIRO, 0) AS "ID_SOLICITUD_RETIRO",
        NVL (ID_DETALLE_MATERIAL, 0) AS "ID_DETALLE_MATERIAL",
        NVL (CANTIDAD_SOLICITADA, 0) AS "CANTIDAD_SOLICITADA",
        NVL (CANTIDAD_RETIRADA, 0) AS "CANTIDAD_RETIRADA",
        NVL (COSTO_CALCULADO, 0) AS "COSTO_CALCULADO",
        NVL (ESTADO, '-') AS "ESTADO",
        NVL (USUARIO, '-') AS "USUARIO",
        NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
            AS "TIME_STAMP",
        (SELECT ID_MATERIAL
            FROM V_OTT_DETALLE_MATERIALLST
        WHERE ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)
            AS CODIGO,
        (SELECT DESCRIPCION
            FROM V_OTT_DETALLE_MATERIALLST
        WHERE ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)
            AS DESCRIPCION,
            CASE ESTADO
            WHEN 'PEN' THEN 'Pendiente'
            WHEN 'RET' THEN 'Retirada'
        END
            AS DESC_ESTADO,
		(SELECT B.CANTIDAD_DISPONIBLE - B.CANTIDAD_RESERVADA  FROM OTF_INVENTARIO B WHERE
			    B.ID_ALMACEN_BODEGA = (SELECT C.ID_ALMACEN_BODEGA FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)
			AND B.ID_UBICACION_ADMINISTRA = (SELECT C.ID_UBICACION_ADMINISTRA FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)		 
			AND B.ID_MATERIAL = (SELECT C.ID_MATERIAL FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)
			) AS DISPONIBLE_ALMACEN_SOLICITUD,
		(SELECT B.UBICACION_FISICA FROM OTM_MATERIAL B WHERE B.ID_MATERIAL = (SELECT C.ID_MATERIAL FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)) AS DESCRIPCION_UBICACION,
		(SELECT C.DETALLE FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL) AS DETALLE_MATERIAL,
		(SELECT B.NOMBRE
                FROM EU_EMPLEADOS B
               WHERE B.ID_PERSONAL = (SELECT C.USUARIO FROM OTT_SOLICITUD_RETIRO C WHERE C.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO))
          || ' '
          || (SELECT B.APELLIDO1
                FROM EU_EMPLEADOS B
               WHERE B.ID_PERSONAL = (SELECT C.USUARIO FROM OTT_SOLICITUD_RETIRO C WHERE C.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO))
          || ' '
          || (SELECT B.APELLIDO2
                FROM EU_EMPLEADOS B
               WHERE B.ID_PERSONAL = (SELECT C.USUARIO FROM OTT_SOLICITUD_RETIRO C WHERE C.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO))
             AS "NOMBRE_SOLICITANTE",			 
		(SELECT B.NOMBRE FROM OTM_SECTOR_TALLER B WHERE B.ID_SECTOR_TALLER = 
		(SELECT C.ID_SECTOR_TALLER FROM OTT_ORDEN_TRABAJO C 
			WHERE C.ID_UBICACION = (SELECT D.ID_UBICACION FROM OTT_SOLICITUD_RETIRO D WHERE D.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO) 
			AND C.ID_ORDEN_TRABAJO = (SELECT D.ID_ORDEN_TRABAJO FROM OTT_SOLICITUD_RETIRO D WHERE D.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO) )) NOMBRE_TALLER,
     	(SELECT D.ID_ORDEN_TRABAJO FROM OTT_SOLICITUD_RETIRO D WHERE D.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO) AS ID_ORDEN_TRABAJO,
		(SELECT D.ID_UBICACION FROM OTT_SOLICITUD_RETIRO D WHERE D.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO) AS ID_UBICACION,
		(SELECT B.DESCRIPCION FROM OTM_ALMACEN_BODEGA B WHERE B.ID_ALMACEN_BODEGA = (SELECT C.ID_ALMACEN_BODEGA FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)) AS ALMACEN_BODEGA,
		(SELECT C.ID_ALMACEN_BODEGA FROM OTT_DETALLE_MATERIAL C WHERE C.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL) AS ID_ALMACEN_BODEGA,
		(SELECT B.NUMERO_SALIDA FROM OTT_SOLICITUD_RETIRO B WHERE B.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO) AS NUMERO_SALIDA,		
		(SELECT B.ID_MATERIAL FROM OTT_DETALLE_MATERIAL B WHERE B.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL) AS ID_MATERIAL,
		(SELECT B.FECHA_HORA_RETIRO FROM OTT_SOLICITUD_RETIRO B WHERE B.ID_SOLICITUD_RETIRO = ODR.ID_SOLICITUD_RETIRO) AS FECHA_HORA_RETIRO,
		 NVL (CANTIDAD_SOLICITADA, 0) || ' '
          || (SELECT ACRONIMO
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = (SELECT B.ID_MATERIAL
             FROM OTT_DETALLE_MATERIAL B
            WHERE B.ID_DETALLE_MATERIAL = ODR.ID_DETALLE_MATERIAL)))
             AS "CANTIDAD_SOLICITADA_MEDIDA"
    FROM OTT_DETALLE_RETIRO ODR;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTT_SOLICITUD_RETIRO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			21/06/2016 02:45:32 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_RETIRO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_RETIRO, 0) AS ID_SOLICITUD_RETIRO, 
	NVL(ESTADO_SOLICITUD_RETIRO, '-') AS ESTADO_SOLICITUD_RETIRO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO, 
	NVL(FECHA_RETIRO, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_RETIRO, 
	NVL(JORNADA_RETIRO, '-') AS JORNADA_RETIRO, 
	NVL(NUMERO_SALIDA, 0) AS NUMERO_SALIDA, 
	NVL(FECHA_HORA_IMPRESION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_IMPRESION, 
	NVL(FECHA_HORA_RETIRO, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_RETIRO, 
	NVL(USUARIO_RETIRA, '-') AS USUARIO_RETIRA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_SOLICITUD_RETIRO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_SOLICITUD_RETIROLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			21/06/2016 02:45:32 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_RETIRO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			11/07/2016 
	Descripcion:	Se agrega el campo COORD_ENCARGADO, ANNO_ORDEN
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			16/09/2016 
	Descripcion:	Se agrega el campo CANTIDAD_LINEAS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			13/03/2017
	Descripcion:	Se agrega el campo FECHA_REGISTRO, DESC_EST_SOL_RET
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			26/03/2017
	Descripcion:	Se agrega el campo SOLICITANTE_GESTION_SALIDA
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			26/04/2017
	Descripcion:	Se agrega el campo FECHA_REGISTRO_FILTRO
	
*/
SELECT NVL (ANNO, 0) AS ANNO,
          NVL (ID_SOLICITUD_RETIRO, 0) AS ID_SOLICITUD_RETIRO,
          NVL (ESTADO_SOLICITUD_RETIRO, '-') AS ESTADO_SOLICITUD_RETIRO,
          NVL (ID_UBICACION, 0) AS ID_UBICACION,
          NVL (ID_ORDEN_TRABAJO, '-') AS ID_ORDEN_TRABAJO,
          NVL (FECHA_RETIRO, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS FECHA_RETIRO,
          NVL (JORNADA_RETIRO, '-') AS JORNADA_RETIRO,
          NVL (NUMERO_SALIDA, 0) AS NUMERO_SALIDA,
          NVL (FECHA_HORA_IMPRESION, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS FECHA_HORA_IMPRESION,
          NVL (FECHA_HORA_RETIRO, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS FECHA_HORA_RETIRO,
          NVL (USUARIO_RETIRA, '-') AS USUARIO_RETIRA,
          NVL (USUARIO, '-') AS USUARIO,
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS TIME_STAMP,
          (SELECT ID_SECTOR_TALLER
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS ID_SECTOR_TALLER,
          (SELECT NOMBRE_TALLER
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS NOMBRE_TALLER,
          (SELECT TIPO_ORDEN_TRABAJO
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS TIPO_ORDEN_TRABAJO,
          (SELECT DESC_TIPO_ORDEN
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS DESC_TIPO_ORDEN,
          (SELECT ESTADO_ORDEN_TRABAJO
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS ESTADO_ORDEN_TRABAJO,
          (SELECT DESC_ESTADO_ORDEN
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS DESC_ESTADO_ORDEN,
          (SELECT NOMBRE_SOLICITANTE
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS NOMBRE_SOLICITANTE,
          (SELECT FECHA_ASIGNACION
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS FECHA_ASIGNACION,
              (SELECT COORD_ENCARGADO
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS COORD_ENCARGADO,
              (SELECT ANNO
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS ANNO_ORDEN,
              (SELECT ES_EMERGENCIA
             FROM V_OTT_ORDEN_TRABAJOLST OT
            WHERE OT.ID_ORDEN_TRABAJO = SR.ID_ORDEN_TRABAJO
                  AND OT.ID_UBICACION = SR.ID_UBICACION)
             AS ES_EMERGENCIA,
			 (SELECT COUNT(B.ID_DETALLE_MATERIAL) FROM OTT_DETALLE_RETIRO B WHERE B.ANNO = SR.ANNO AND B.ID_SOLICITUD_RETIRO = SR.ID_SOLICITUD_RETIRO) AS CANTIDAD_LINEAS,
             TO_CHAR(FECHA_REGISTRO, 'DD-MM-YYYY HH24:MI:SS') AS FECHA_REGISTRO,
			 (SELECT B.DESCRIPCION FROM OTC_ESTADO_SOLICITUD_RET B WHERE B.ESTADO_SOLICITUD_RETIRO = SR.ESTADO_SOLICITUD_RETIRO) AS DESC_EST_SOL_RET,
			 (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS WHERE ID_PERSONAL = SR.USUARIO) AS "SOLICITANTE_GESTION_SALIDA",
			    NVL (FECHA_REGISTRO, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS FECHA_REGISTRO_FILTRO
     FROM OTT_SOLICITUD_RETIRO SR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_SOLICITUD_REINGRESO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			28/07/2016 03:19:18 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_REINGRESO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_REINGRESO, 0) AS ID_SOLICITUD_REINGRESO, 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA, 
	NVL(ID_DETALLE_MATERIAL, 0) AS ID_DETALLE_MATERIAL, 
	NVL(CANTIDAD_REINGRESO, 0) AS CANTIDAD_REINGRESO, 
	NVL(CANTIDAD_RECIBIDA, 0) AS CANTIDAD_RECIBIDA, 
	NVL(TIPO_SOLICITUD_REINGRESO, '-') AS TIPO_SOLICITUD_REINGRESO, 
	NVL(COSTO_CALCULADO, 0) AS COSTO_CALCULADO, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_SOLICITUD_REINGRESO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_SOLICITUD_REINGRESOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			28/07/2016 03:19:18 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_REINGRESO
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			29/07/2016
	Descripcion:	Se agregan los campos ID_MATERIAL, DESCRIPCION, DESC_ESTADO, DESC_TIPO_SOL_REIN, CANTIDAD_REINGRESO_MEDIDA, ID_UBICACION, ID_ORDEN_TRABAJO
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			03/08/2016
	Descripcion:	Se agregan los campos CANTIDAD_SOLICITADA_MEDIDA, CANTIDAD_RETIRADA_MEDIDA
	
*/
SELECT
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_SOLICITUD_REINGRESO, 0) AS "ID_SOLICITUD_REINGRESO", 
	NVL(ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA", 
	NVL(ID_DETALLE_MATERIAL, 0) AS "ID_DETALLE_MATERIAL", 
	NVL(CANTIDAD_REINGRESO, 0) AS "CANTIDAD_REINGRESO", 
	NVL(CANTIDAD_RECIBIDA, 0) AS "CANTIDAD_RECIBIDA", 
	NVL(TIPO_SOLICITUD_REINGRESO, '-') AS "TIPO_SOLICITUD_REINGRESO", 
	NVL(COSTO_CALCULADO, 0) AS "COSTO_CALCULADO", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	(SELECT B.ID_UBICACION FROM V_OTT_DETALLE_MATERIALLst B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS ID_UBICACION,
	(SELECT B.ID_ORDEN_TRABAJO FROM V_OTT_DETALLE_MATERIALLst B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS ID_ORDEN_TRABAJO,
	(SELECT B.ID_MATERIAL FROM V_OTT_DETALLE_MATERIALLst B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS ID_MATERIAL,
	(SELECT B.DETALLE FROM V_OTT_DETALLE_MATERIALLst B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS DESCRIPCION,
	(CASE ESTADO
              WHEN 'PEN' THEN 'Pendiente'
              WHEN 'APR' THEN 'Aprobada'
			  WHEN 'DEN' THEN 'Denegada'
	END) DESC_ESTADO,
	(CASE TIPO_SOLICITUD_REINGRESO
              WHEN 'CUS' THEN 'Custodia'
              WHEN 'DEV' THEN 'Devolución'
	END) DESC_TIPO_SOL_REIN,	
	NVL (CANTIDAD_REINGRESO, 0) || ' '
          || (SELECT DESCRIPCION
                FROM OTM_UNIDAD_MEDIDA UM
               WHERE UM.ID_UNIDAD_MEDIDA =
                        (SELECT ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL
                          WHERE ID_MATERIAL = 
							(SELECT B.ID_MATERIAL 
							  FROM V_OTT_DETALLE_MATERIALLst B 
							    WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL)))
             AS "CANTIDAD_REINGRESO_MEDIDA"	,	
    (SELECT B.CANTIDAD_SOLICITADA_MEDIDA FROM V_OTT_DETALLE_MATERIALLst B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS "CANTIDAD_SOLICITADA_MEDIDA",	
	(SELECT B.CANTIDAD_RETIRADA_MEDIDA FROM V_OTT_DETALLE_MATERIALLst B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS "CANTIDAD_RETIRADA_MEDIDA"			 
FROM OTT_SOLICITUD_REINGRESO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_INCIDENTE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:25:01 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_INCIDENTE
*/
SELECT
	NVL(ID_TIPO_INCIDENTE, 0) AS ID_TIPO_INCIDENTE, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_TIPO_INCIDENTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TIPO_INCIDENTELst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:25:01 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TIPO_INCIDENTE
*/
SELECT
	NVL(ID_TIPO_INCIDENTE, 0) AS "ID_TIPO_INCIDENTE", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	(CASE ESTADO
		  WHEN 'ACT' THEN 'Activo'
		  WHEN 'INA' THEN 'Inactivo'
	END) DESC_ESTADO,
	CASE 
        WHEN (SELECT COUNT(B.ID_TIPO_INCIDENTE) FROM OTF_INCIDENTE_ALMACEN B WHERE B.ID_TIPO_INCIDENTE = A.ID_TIPO_INCIDENTE) > 0 THEN 1
        ELSE 0 
    END AS POSEE_REGISTROS_ASOCIADOS 
FROM OTM_TIPO_INCIDENTE A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_ADJUNTO_INCIDENTE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 04:42:19 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_ADJUNTO_INCIDENTE
*/
SELECT
	NVL(ID_ADJUNTO_INCIDENTE, 0) AS ID_ADJUNTO_INCIDENTE, 
	NVL(ID_INCIDENTE_ALMACEN, 0) AS ID_INCIDENTE_ALMACEN, 
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(ORIGEN, '-') AS ORIGEN, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_ADJUNTO_INCIDENTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_ADJUNTO_INCIDENTELst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 04:42:19 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_ADJUNTO_INCIDENTE
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			08/08/2016 
	Descripcion:	Se agrega el campo DESC_TIPO_DOCUMENTO
	
*/
SELECT
	NVL(ID_ADJUNTO_INCIDENTE, 0) AS "ID_ADJUNTO_INCIDENTE", 
	NVL(ID_INCIDENTE_ALMACEN, 0) AS "ID_INCIDENTE_ALMACEN", 
	NVL(ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO", 
	NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
	NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(ORIGEN, '-') AS "ORIGEN", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	(SELECT B.DESCRIPCION FROM OTM_TIPO_DOCUMENTO B WHERE B.ID_TIPO_DOCUMENTO = A.ID_TIPO_DOCUMENTO) AS DESC_TIPO_DOCUMENTO
FROM OTF_ADJUNTO_INCIDENTE A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_INCIDENTE_ALMACEN
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 04:42:19 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_INCIDENTE_ALMACEN
*/
SELECT
	NVL(ID_INCIDENTE_ALMACEN, 0) AS ID_INCIDENTE_ALMACEN, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(ID_ALMACEN_BODEGA, 0) AS ID_ALMACEN_BODEGA, 
	NVL(ID_TIPO_INCIDENTE, 0) AS ID_TIPO_INCIDENTE, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(FECHA_INCLUSION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_INCLUSION, 
	NVL(OBSERVACIONES_REVISOR, '-') AS OBSERVACIONES_REVISOR, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTF_INCIDENTE_ALMACEN;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTF_INCIDENTE_ALMACENLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 04:42:19 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTF_INCIDENTE_ALMACEN
*/
SELECT
	NVL(ID_INCIDENTE_ALMACEN, 0) AS "ID_INCIDENTE_ALMACEN", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(ID_ALMACEN_BODEGA, 0) AS "ID_ALMACEN_BODEGA", 
	NVL(ID_TIPO_INCIDENTE, 0) AS "ID_TIPO_INCIDENTE", 
	NVL(DETALLE, '-') AS "DETALLE", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(FECHA_INCLUSION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_INCLUSION", 
	NVL(OBSERVACIONES_REVISOR, '-') AS "OBSERVACIONES_REVISOR", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
	(CASE ESTADO
		  WHEN 'CRE' THEN 'Creado'
		  WHEN 'PEN' THEN 'Pendiente'
		  WHEN 'ATE' THEN 'Atendido'
	END) DESC_ESTADO,
	(SELECT B.DESCRIPCION FROM OTM_TIPO_INCIDENTE B WHERE B.ID_TIPO_INCIDENTE = A.ID_TIPO_INCIDENTE) AS DESC_TIPO_INCIDENTE
FROM OTF_INCIDENTE_ALMACEN A;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTC_ESTADO_GESTION_COMPRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_GESTION_COMPRA
*/
SELECT
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION
FROM OTC_ESTADO_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_ESTADO_GESTION_COMPRALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_GESTION_COMPRA
*/
SELECT
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION"
FROM OTC_ESTADO_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_TRAZABIL_GESTION_COMP
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABIL_GESTION_COMP
*/
SELECT
	NVL(ID_TRAZABIL_GESTION_COMP, 0) AS ID_TRAZABIL_GESTION_COMP, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_TRAZABIL_GESTION_COMP;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_TRAZABIL_GESTION_COMPLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            18/08/2016 02:18:37 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTL_TRAZABIL_GESTION_COMP
    
    Autor:            Mauricio Salas Chaves
    Fecha:            05/09/2016
    Descripcion:    Se agregan los campos DESC_ESTADO, RESPONSABLE
*/
SELECT
    NVL(ID_TRAZABIL_GESTION_COMP, 0) AS "ID_TRAZABIL_GESTION_COMP", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ESTADO, '-') AS "ESTADO", 
    (SELECT DESCRIPCION FROM  OTC_ESTADO_GESTION_COMPRA WHERE ESTADO = TRAZABILIDAD.ESTADO) AS "DESC_ESTADO",
    NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
    NVL(USUARIO, '-') AS "USUARIO", 
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS WHERE ID_PERSONAL = TRAZABILIDAD.USUARIO) AS "RESPONSABLE",
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_TRAZABIL_GESTION_COMP TRAZABILIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_FLUJO_GESTION_COMPRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_FLUJO_GESTION_COMPRA
*/
SELECT
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(ORDEN, 0) AS ORDEN, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_FLUJO_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_FLUJO_GESTION_COMPRALst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_FLUJO_GESTION_COMPRA
*/
SELECT
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(ORDEN, 0) AS "ORDEN", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_FLUJO_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_GESTION_COMPRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_GESTION_COMPRA
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_REGISTRO_SOLICITUD, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(NUMERO_CHEQUE, '-') AS NUMERO_CHEQUE, 
	NVL(NUMERO_GESTION_GECO, '-') AS NUMERO_GESTION_GECO, 
	NVL(FECHA_HORA_IMPRESION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_IMPRESION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_GESTION_COMPRALst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            18/08/2016 02:18:37 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_GESTION_COMPRA
    
    Autor:            Mauricio Salas Chaves
    Fecha:            01/09/2016
    Descripcion:     Se agrega el campo FECHA_ASIGNA_SUPERVISOR
    
    Autor:            Mauricio Salas Chaves
    Fecha:            05/09/2016
    Descripcion:     Se agrega el campo DESC_VIA_COMPRA
    
    Autor:            Mauricio Salas Chaves
    Fecha:            01/02/2016
    Descripcion:     Se agrega el campo OT_RELACIONADAS
    
    Autor:            Mauricio Salas Chaves
    Fecha:            06/02/2017
    Descripcion:     Se agrega el campo ID_PROVEEDOR_ADJ
    
    Autor:            Mauricio Salas Chaves
    Fecha:            20/02/2017
    Descripcion:     Se agrega el campo POSEE_INGRESO_VALIDA_MONTOS
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    (SELECT DESCRIPCION FROM OTM_VIA_COMPRA_CONTRATO WHERE ID_VIA_COMPRA_CONTRATO = A.ID_VIA_COMPRA_CONTRATO) AS "DESC_VIA_COMPRA",
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_REGISTRO_SOLICITUD", 
    NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
    NVL(NUMERO_CHEQUE, '-') AS "NUMERO_CHEQUE", 
    NVL(NUMERO_GESTION_GECO, '-') AS "NUMERO_GESTION_GECO", 
    NVL(FECHA_HORA_IMPRESION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_IMPRESION", 
    NVL(ESTADO, '-') AS "ESTADO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT WM_CONCAT(DISTINCT ID_ORDEN_TRABAJO) FROM OTT_DETALLE_MATERIAL WHERE ID_DETALLE_MATERIAL IN (SELECT ID_DETALLE_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = A.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = A.ID_VIA_COMPRA_CONTRATO AND ANNO = A.ANNO AND NUMERO_GESTION = A.NUMERO_GESTION)) AS "OT_RELACIONADAS",
    (SELECT B.DESCRIPCION FROM  OTC_ESTADO_GESTION_COMPRA B WHERE B.ESTADO = A.ESTADO) AS DESC_ESTADO,
    NVL (SUBSTR(A.ANNO,3) || '-' || A.NUMERO_GESTION, '-') AS NUMERO_GESTION_COMPRA,
    (SELECT MAX(TIME_STAMP) FROM OTL_TRAZABIL_GESTION_COMP TRAZABILIDAD WHERE TRAZABILIDAD.ESTADO = 'APS' AND TRAZABILIDAD.ID_UBICACION = A.ID_UBICACION AND TRAZABILIDAD.ID_VIA_COMPRA_CONTRATO = A.ID_VIA_COMPRA_CONTRATO AND TRAZABILIDAD.ANNO = A.ANNO AND TRAZABILIDAD.NUMERO_GESTION = A.NUMERO_GESTION) AS "FECHA_ASIGNA_SUPERVISOR",
    NVL((SELECT IDENTIFICACION FROM OTT_PROVEEDOR_COTIZACION WHERE ID_UBICACION = A.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = A.ID_VIA_COMPRA_CONTRATO AND ANNO = A.ANNO AND NUMERO_GESTION = A.NUMERO_GESTION AND ADJUDICADO = 1), '-') AS "ID_PROVEEDOR_ADJ",
    CASE
             WHEN (SELECT COUNT (TIME_STAMP)
                     FROM OTT_GESTION_INGRESO_MATER
                    WHERE ID_UBICACION = A.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = A.ID_VIA_COMPRA_CONTRATO AND ANNO = A.ANNO AND NUMERO_GESTION = A.NUMERO_GESTION AND ESTADO_GESTION_INGRESO = 'VAM') > 0
             THEN
                1
             ELSE
                0
          END
             AS "POSEE_INGRESO_VALIDA_MONTOS"
FROM OTT_GESTION_COMPRA A;


/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_LINEA_GESTION_COMPRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			18/08/2016 02:18:37 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_LINEA_GESTION_COMPRA
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ID_LINEA_GESTION_COMPRA, 0) AS ID_LINEA_GESTION_COMPRA, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(ID_DETALLE_MATERIAL, 0) AS ID_DETALLE_MATERIAL, 
	NVL(CANTIDAD_SOLICITADA, 0) AS CANTIDAD_SOLICITADA, 
	NVL(CANTIDAD_INGRESA, 0) AS CANTIDAD_INGRESA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_LINEA_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_LINEA_GESTION_COMPRALst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            18/08/2016 02:18:37 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_LINEA_GESTION_COMPRA
    
    CONTROL DE CAMBIOS 
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            24/08/2016 
    Descripcion:    Se agregan los campos CANTIDAD_SOLICITADA_MEDIDA, DETALLE
    
    Autor:            Mauricio Salas Chaves
    Fecha:            02/09/2016
    Descripcion:    Se agrega el campo ID_MATERIAL_TABLA el cual busca el campo en OTT_DETALLE_MATERIAL en caso de que venga nulo
	
	Autor:            Carlos Gómez Ondoy
    Fecha:            19/09/2016 
    Descripcion:    Se agregan los campos FECHA_ASIGNACION
    
    Autor:            Mauricio Salas Chaves
    Fecha:           01/02/2016
    Descripcion:    Se agregan los campos NUMERO_GESTION_COMPRA
    
    Autor:            Mauricio Salas Chaves
    Fecha:           08/02/2016
    Descripcion:    Se agregan los campos ES_EMERGENCIA, FECHA_SOLICITUD, CANTIDAD_RESTANTE
    
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ID_LINEA_GESTION_COMPRA, 0) AS "ID_LINEA_GESTION_COMPRA", 
    NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
    NVL(ID_DETALLE_MATERIAL, 0) AS "ID_DETALLE_MATERIAL", 
    NVL(CANTIDAD_SOLICITADA, 0) AS "CANTIDAD_SOLICITADA", 
    NVL(CANTIDAD_INGRESA, 0) AS "CANTIDAD_INGRESA", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    NVL ( (SELECT D.DESCRIPCION FROM OTM_MATERIAL D
    WHERE D.ID_MATERIAL = CASE
                                                WHEN (A.ID_MATERIAL IS NOT NULL)
                                                THEN
                                                    A.ID_MATERIAL
                                                ELSE
                                                    (SELECT ID_MATERIAL FROM OTT_DETALLE_MATERIAL WHERE ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL)
                                            END),  '-')  AS "DESCRIPCION",
    NVL ( (SELECT B.OBSERVACIONES FROM OTT_GESTION_COMPRA B
    WHERE B.ID_UBICACION = A.ID_UBICACION  AND B.ID_VIA_COMPRA_CONTRATO = A.ID_VIA_COMPRA_CONTRATO 
    AND B.ANNO = A.ANNO  AND B.NUMERO_GESTION = A.NUMERO_GESTION ),  '-')  AS "OBSERVACIONES",
    NVL ((SELECT DM.ID_ORDEN_TRABAJO FROM OTT_DETALLE_MATERIAL DM
    WHERE DM.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL  ),  '-')  AS "NUMERO_OT",
    (SELECT B.CANTIDAD_SOLICITADA_MEDIDA FROM V_OTT_DETALLE_MATERIALLST B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS CANTIDAD_SOLICITADA_MEDIDA,
    (SELECT B.DETALLE FROM V_OTT_DETALLE_MATERIALLST B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS DETALLE,
    CASE
        WHEN (A.ID_MATERIAL IS NOT NULL)
        THEN
            A.ID_MATERIAL
        ELSE
            (SELECT ID_MATERIAL FROM OTT_DETALLE_MATERIAL WHERE ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL)
    END AS "ID_MATERIAL_TABLA",
    (SELECT B.FECHA_ASIGNACION FROM V_OT_DETALLE_MATERIAL B WHERE B.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL) AS FECHA_ASIGNACION,
    NVL (SUBSTR(A.ANNO,3) || '-' || A.NUMERO_GESTION || '-' || A.ID_LINEA_GESTION_COMPRA, '-') AS "NUMERO_GESTION_COMPRA",
    (CASE (SELECT TIPO_ORDEN_TRABAJO FROM OTT_ORDEN_TRABAJO WHERE ID_ORDEN_TRABAJO = (SELECT DM.ID_ORDEN_TRABAJO FROM OTT_DETALLE_MATERIAL DM
                                                              WHERE DM.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL))
    WHEN 'EME' THEN 
        1
    ELSE 
        0
    END)  AS "ES_EMERGENCIA",
     (SELECT FECHA_HORA_SOLICITA FROM OTT_ORDEN_TRABAJO WHERE ID_ORDEN_TRABAJO = (SELECT DM.ID_ORDEN_TRABAJO FROM OTT_DETALLE_MATERIAL DM
                                                              WHERE DM.ID_DETALLE_MATERIAL = A.ID_DETALLE_MATERIAL)) AS "FECHA_SOLICITUD",
   A.CANTIDAD_SOLICITADA - NVL(A.CANTIDAD_INGRESA, 0) AS "CANTIDAD_RESTANTE"
FROM OTT_LINEA_GESTION_COMPRA A;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTM_PROVEEDOR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:35:36 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_PROVEEDOR
*/
SELECT NVL (IDENTIFICACION, '-') AS IDENTIFICACION,
          NVL (TIPO_PROVEEDOR, '-') AS TIPO_PROVEEDOR,
          NVL (NOMBRE, '-') AS NOMBRE,
          NVL (DIRECCION, '-') AS DIRECCION,
          NVL (SITIO_WEB, '-') AS SITIO_WEB,
          NVL (OBSERVACIONES, '-') AS OBSERVACIONES,
          NVL (ESTADO, '-') AS ESTADO,
          NVL (USUARIO, '-') AS USUARIO,
          NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS TIME_STAMP
     FROM OTM_PROVEEDOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_PROVEEDORLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:35:36 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_PROVEEDOR
	
	Autor:			JMCR
	Fecha:			05/08/2016
	Descripcion:    Agrego la descripciones del estado y el tipo_proveedor
*/
 SELECT NVL (A.IDENTIFICACION, '-') AS "IDENTIFICACION",
          NVL (A.TIPO_PROVEEDOR, '-') AS "TIPO_PROVEEDOR",
          NVL (A.NOMBRE, '-') AS "NOMBRE",
          NVL (A.DIRECCION, '-') AS "DIRECCION",
          NVL (A.SITIO_WEB, '-') AS "SITIO_WEB",
          NVL (A.OBSERVACIONES, '-') AS "OBSERVACIONES",
          NVL (A.ESTADO, '-') AS "ESTADO",
          NVL (A.USUARIO, '-') AS "USUARIO",
          NVL (A.TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
             AS "TIME_STAMP",
          CASE A.ESTADO
             WHEN 'ACT' THEN 'Activo'
             WHEN 'INA' THEN 'Inactivo'
          END
             AS "DESC_ESTADO",
          CASE A.TIPO_PROVEEDOR
             WHEN 'FIS' THEN 'Físico'
             WHEN 'JUR' THEN 'Jurídico'
          END
             AS "DESC_TIPO_PROVEEDOR",
          CASE
             WHEN (SELECT COUNT (B.IDENTIFICACION)
                     FROM OTM_CORREO_PROVEEDOR B
                    WHERE B.IDENTIFICACION = A.IDENTIFICACION) > 0
                  OR (SELECT COUNT (C.IDENTIFICACION)
                        FROM OTM_TELEFONO_PROVEEDOR C
                       WHERE C.IDENTIFICACION = A.IDENTIFICACION) > 0
             THEN
                1
             ELSE
                0
          END
             AS "POSEE_REGISTROS_ASOCIADOS"
     FROM ORDENES_TRABAJO.OTM_PROVEEDOR A;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTM_CORREO_PROVEEDOR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:37:27 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_CORREO_PROVEEDOR
*/
SELECT
	NVL(IDENTIFICACION, '-') AS IDENTIFICACION, 
	NVL(CORREO, '-') AS CORREO, 
	NVL(NOMBRE, '-') AS NOMBRE, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_CORREO_PROVEEDOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_CORREO_PROVEEDORLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:37:27 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_CORREO_PROVEEDOR
*/
SELECT
	NVL(IDENTIFICACION, '-') AS "IDENTIFICACION", 
	NVL(CORREO, '-') AS "CORREO", 
	NVL(NOMBRE, '-') AS "NOMBRE", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_CORREO_PROVEEDOR;

/*------------------------------------------------------------------------------------------------------------------------*/
CREATE OR REPLACE VIEW V_OTM_TELEFONO_PROVEEDOR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:38:48 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TELEFONO_PROVEEDOR
*/
SELECT
	NVL(IDENTIFICACION, '-') AS IDENTIFICACION, 
	NVL(TELEFONO, '-') AS TELEFONO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTM_TELEFONO_PROVEEDOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_TELEFONO_PROVEEDORLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			04/08/2016 03:38:48 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTM_TELEFONO_PROVEEDOR
*/
SELECT
	NVL(IDENTIFICACION, '-') AS "IDENTIFICACION", 
	NVL(TELEFONO, '-') AS "TELEFONO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTM_TELEFONO_PROVEEDOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_ESTADO_TRASLADO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 08:59:53 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_TRASLADO
*/
SELECT
	NVL(ESTADO_TRASLADO, '-') AS ESTADO_TRASLADO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION
FROM OTC_ESTADO_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTC_ESTADO_TRASLADOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 08:59:53 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_TRASLADO
*/
SELECT
	NVL(ESTADO_TRASLADO, '-') AS "ESTADO_TRASLADO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION"
FROM OTC_ESTADO_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_LINEA_TRASLADO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:07:05 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_LINEA_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS ID_SOLICITUD_TRASLADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ALMACEN, 0) AS ID_ALMACEN, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD_REQUERIDA, 0) AS CANTIDAD_REQUERIDA, 
	NVL(CANTIDAD_RETIRADA, 0) AS CANTIDAD_RETIRADA, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_LINEA_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_LINEA_TRASLADOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:07:05 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_LINEA_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS "ID_SOLICITUD_TRASLADO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ALMACEN, 0) AS "ID_ALMACEN", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(CANTIDAD_REQUERIDA, 0) AS "CANTIDAD_REQUERIDA", 
	NVL(CANTIDAD_RETIRADA, 0) AS "CANTIDAD_RETIRADA", 
	NVL(DETALLE, '-') AS "DETALLE", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_LINEA_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_SOLICITUD_TRASLADO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:09:43 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_SOLICITUD_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS ID_SOLICITUD_TRASLADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(FECHA_PROPUESTA_SALIDA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_PROPUESTA_SALIDA, 
	NVL(JORNADA_RETIRO, '-') AS JORNADA_RETIRO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP, 
	NVL(USUARIO, '-') AS USUARIO
FROM OTL_SOLICITUD_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_SOLICITUD_TRASLADOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:09:43 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_SOLICITUD_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS "ID_SOLICITUD_TRASLADO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(FECHA_PROPUESTA_SALIDA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_PROPUESTA_SALIDA", 
	NVL(JORNADA_RETIRO, '-') AS "JORNADA_RETIRO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
	NVL(USUARIO, '-') AS "USUARIO"
FROM OTL_SOLICITUD_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTL_TRAZABIL_SOL_TRASLADO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:12:03 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABIL_SOL_TRASLADO
*/
SELECT
	NVL(ID_TRAZABIL_SOL_TRASLADO, 0) AS ID_TRAZABIL_SOL_TRASLADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS ID_SOLICITUD_TRASLADO, 
	NVL(ESTADO_TRASLADO, '-') AS ESTADO_TRASLADO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_TRAZABIL_SOL_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTL_TRAZABIL_SOL_TRASLADOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:12:03 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABIL_SOL_TRASLADO
*/
SELECT
	NVL(ID_TRAZABIL_SOL_TRASLADO, 0) AS "ID_TRAZABIL_SOL_TRASLADO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS "ID_SOLICITUD_TRASLADO", 
	NVL(ESTADO_TRASLADO, '-') AS "ESTADO_TRASLADO", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_TRAZABIL_SOL_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_LINEA_TRASLADO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:16:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_LINEA_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS ID_SOLICITUD_TRASLADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ALMACEN, 0) AS ID_ALMACEN, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD_REQUERIDA, 0) AS CANTIDAD_REQUERIDA, 
	NVL(CANTIDAD_RETIRADA, 0) AS CANTIDAD_RETIRADA, 
	NVL(DETALLE, '-') AS DETALLE, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_LINEA_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_LINEA_TRASLADOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:16:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_LINEA_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS "ID_SOLICITUD_TRASLADO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_ALMACEN, 0) AS "ID_ALMACEN", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(CANTIDAD_REQUERIDA, 0) AS "CANTIDAD_REQUERIDA", 
	NVL(CANTIDAD_RETIRADA, 0) AS "CANTIDAD_RETIRADA", 
	NVL(DETALLE, '-') AS "DETALLE", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_LINEA_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_SOLICITUD_TRASLADO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:18:06 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_TRASLADO
*/
SELECT
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_SOLICITUD_TRASLADO, 0) AS ID_SOLICITUD_TRASLADO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_ALMACEN, 0) AS ID_ALMACEN, 
	NVL(ID_BODEGA, 0) AS ID_BODEGA, 
	NVL(ESTADO_TRASLADO, '-') AS ESTADO_TRASLADO, 
	NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_REGISTRO_SOLICITUD, 
	NVL(FECHA_PROPUESTA_SALIDA, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_PROPUESTA_SALIDA, 
	NVL(JORNADA_RETIRO, '-') AS JORNADA_RETIRO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_SOLICITUD_TRASLADO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_SOLICITUD_TRASLADOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			09/08/2016 09:18:06 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_SOLICITUD_TRASLADO
*/
 SELECT NVL (A.ANNO, 0) AS "ANNO",
          NVL (A.ID_SOLICITUD_TRASLADO, 0) AS "ID_SOLICITUD_TRASLADO",
          NVL (A.ID_UBICACION, 0) AS "ID_UBICACION",
          NVL (A.ID_ALMACEN, 0) AS "ID_ALMACEN",
          NVL (A.ID_BODEGA, 0) AS "ID_BODEGA",
          NVL (A.ESTADO_TRASLADO, '-') AS "ESTADO_TRASLADO",
          NVL (A.FECHA_REGISTRO_SOLICITUD, TO_DATE ('01-01-1900', 'DD-MM-YYYY')) AS "FECHA_REGISTRO_SOLICITUD",
          NVL (A.FECHA_PROPUESTA_SALIDA, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))  AS "FECHA_PROPUESTA_SALIDA",
          NVL (A.JORNADA_RETIRO, '-') AS "JORNADA_RETIRO",
          NVL (A.OBSERVACIONES, '-') AS "OBSERVACIONES",
          NVL (A.USUARIO, '-') AS "USUARIO",
          NVL (A.TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))  AS "TIME_STAMP",
          NVL (SUBSTR(A.ANNO,3) || '-' || A.ID_SOLICITUD_TRASLADO, '-') AS "NUMERO_SOLICITUD",
          NVL ((SELECT B.DESCRIPCION   FROM OTC_ESTADO_TRASLADO B WHERE B.ESTADO_TRASLADO = A.ESTADO_TRASLADO),'-') AS "DESC_ESTADO_TRASLADO",
         (SELECT  ST.NOMBRE_COORDINADOR  FROM OTM_ALMACEN_BODEGA  AB INNER JOIN   ORDENES_TRABAJO.V_OTM_SECTOR_TALLERLST ST 
		  ON ST.ID_SECTOR_TALLER = AB.ID_SECTOR_TALLER WHERE AB.ID_ALMACEN_BODEGA = A.ID_ALMACEN) AS "ENCARGADO", 
		 (SELECT RTRIM (XMLAGG (XMLELEMENT (e, C.USUARIO || '-'||C.OBSERVACIONES || ', ')).EXTRACT ('//text()'),', ')
          FROM OTL_TRAZABIL_SOL_TRASLADO C  WHERE C.ID_UBICACION = A.ID_UBICACION AND C.ANNO = A.ANNO   
		  AND C.ID_SOLICITUD_TRASLADO = A.ID_SOLICITUD_TRASLADO ) AS "OBSERVACIONES_DEVUELTAS",
          NVL ((SELECT  D.DESCRIPCION  FROM OTM_ALMACEN_BODEGA  D WHERE D.ID_ALMACEN_BODEGA = A.ID_ALMACEN) ,  '-') AS "NOMBRE_BODEGA"
          FROM OTT_SOLICITUD_TRASLADO A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ADJUNTO_COTIZACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/08/2016 11:52:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ADJUNTO_COTIZACION
*/
SELECT
	NVL(IDENTIFICACION, '-') AS IDENTIFICACION, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_ADJUNTO_COTIZACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ADJUNTO_COTIZACIONLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            25/08/2016 11:52:30 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_ADJUNTO_COTIZACION
    
    Autor:            Mauricio Salas Chaves
    Fecha:            01/09/2016
    Descripcion:     Se agrega el campo NOMBRE_PROVEEDOR
*/
SELECT
    NVL(IDENTIFICACION, '-') AS "IDENTIFICACION", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO", 
    NVL(ARCHIVO, '') AS "ARCHIVO", 
    NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
    NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT NOMBRE FROM OTM_PROVEEDOR WHERE IDENTIFICACION = ADJUNTO.IDENTIFICACION) AS "NOMBRE_PROVEEDOR"
FROM OTT_ADJUNTO_COTIZACION ADJUNTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_GRUPO_GESTION_COMPRA
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/08/2016 11:52:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_GRUPO_GESTION_COMPRA
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ID_GRUPO_GESTION_COMPRA, 0) AS ID_GRUPO_GESTION_COMPRA, 
	NVL(NUMERO_LINEA, 0) AS NUMERO_LINEA, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD_SOLICITADA, 0) AS CANTIDAD_SOLICITADA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_GRUPO_GESTION_COMPRA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_GRUPO_GESTION_COMPRALst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            25/08/2016 11:52:30 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_GRUPO_GESTION_COMPRA
    
    CONTROL DE CAMBIOS 
    
    Autor:            Carlos Gómez Ondoy
    Fecha:            07/09/2016
    Descripcion:    Se agregan los campos  DESCRIPCION, CANTIDAD_SOLICITADA_MEDIDA
    
    
    Autor:            Mauricio Salas Chaves
    Fecha:            12/09/2016
    Descripcion:     Se agregan los campos NOMBRE_MATERIAL, PARTIDA_PRESUPUESTARIA
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ID_GRUPO_GESTION_COMPRA, 0) AS "ID_GRUPO_GESTION_COMPRA", 
    NVL(NUMERO_LINEA, 0) AS "NUMERO_LINEA", 
    NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
    (SELECT DESCRIPCION FROM OTM_MATERIAL WHERE ID_UBICACION_ADMINISTRA = A.ID_UBICACION AND ID_MATERIAL = A.ID_MATERIAL) AS "NOMBRE_MATERIAL",
    (SELECT PARTIDA_PRESUPUESTARIA FROM OTM_MATERIAL WHERE ID_UBICACION_ADMINISTRA = A.ID_UBICACION AND ID_MATERIAL =    A.ID_MATERIAL) AS "PARTIDA_PRESUPUESTARIA",
    NVL(CANTIDAD_SOLICITADA, 0) AS "CANTIDAD_SOLICITADA", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT B.DESCRIPCION FROM OTM_MATERIAL B WHERE B.ID_UBICACION_ADMINISTRA = A.ID_UBICACION AND B.ID_MATERIAL = A.ID_MATERIAL) AS DESCRIPCION,
    NVL (CANTIDAD_SOLICITADA, 0) || ' '
          || (SELECT B.DESCRIPCION
                FROM OTM_UNIDAD_MEDIDA B
               WHERE B.ID_UNIDAD_MEDIDA =
                        (SELECT C.ID_UNIDAD_MEDIDA
                           FROM OTM_MATERIAL C
                          WHERE C.ID_MATERIAL = A.ID_MATERIAL AND C.ID_UBICACION_ADMINISTRA = A.ID_UBICACION))
             AS CANTIDAD_SOLICITADA_MEDIDA
FROM OTT_GRUPO_GESTION_COMPRA A;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_OFERTA_PROVEEDOR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/08/2016 11:52:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_OFERTA_PROVEEDOR
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ID_GRUPO_GESTION_COMPRA, 0) AS ID_GRUPO_GESTION_COMPRA, 
	NVL(IDENTIFICACION, '-') AS IDENTIFICACION, 
	NVL(MONTO, 0) AS MONTO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_OFERTA_PROVEEDOR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_OFERTA_PROVEEDORLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            25/08/2016 11:52:30 a.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_OFERTA_PROVEEDOR
    
    Autor:            Mauricio Salas
    Fecha:            01/09/2016
    Descripcion:    Se agrega el campo NOMBRE_PROVEEDOR, TIENE_ADJUNTO
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ID_GRUPO_GESTION_COMPRA, 0) AS "ID_GRUPO_GESTION_COMPRA", 
    NVL(IDENTIFICACION, '-') AS "IDENTIFICACION", 
    (SELECT NOMBRE FROM OTM_PROVEEDOR WHERE IDENTIFICACION = OFERTA.IDENTIFICACION) AS "NOMBRE_PROVEEDOR",
    NVL(MONTO, 0) AS "MONTO", 
    NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    CASE WHEN (SELECT COUNT(1) FROM OTT_ADJUNTO_COTIZACION WHERE IDENTIFICACION = OFERTA.IDENTIFICACION AND ID_UBICACION = OFERTA.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = OFERTA.ID_VIA_COMPRA_CONTRATO AND ANNO = OFERTA.ANNO AND NUMERO_GESTION = OFERTA.NUMERO_GESTION) > 0 THEN
        1
    ELSE
        0
    END AS "TIENE_ADJUNTO"
FROM OTT_OFERTA_PROVEEDOR OFERTA;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_PROVEEDOR_COTIZACION
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/08/2016 11:52:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_PROVEEDOR_COTIZACION
*/
SELECT
	NVL(IDENTIFICACION, '-') AS IDENTIFICACION, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(ID_NOTIFICACION, 0) AS ID_NOTIFICACION, 
	NVL(FECHA_HORA_NOTIFICACION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_HORA_NOTIFICACION, 
	NVL(ADJUDICADO, 0) AS ADJUDICADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_PROVEEDOR_COTIZACION;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_PROVEEDOR_COTIZACIONLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			25/08/2016 11:52:30 a.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_PROVEEDOR_COTIZACION
	
	CONTROL DE CAMBIOS
	
	Autor:			Carlos Gómez Ondoy
	Fecha:			31/08/2016
	Descripcion:	Se agregan los campos NOMBRE_PROVEEDOR, CORREO_PROVEDOR, TELEFONOS_PROVEEDOR, DESC_ESTADO
	
*/
SELECT
    NVL(IDENTIFICACION, '-') AS "IDENTIFICACION", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ESTADO, '-') AS "ESTADO", 
    NVL(ID_NOTIFICACION, 0) AS "ID_NOTIFICACION", 
    NVL(FECHA_HORA_NOTIFICACION, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_HORA_NOTIFICACION", 
    NVL(ADJUDICADO, 0) AS "ADJUDICADO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SELECT B.NOMBRE FROM OTM_PROVEEDOR B WHERE B.IDENTIFICACION = A.IDENTIFICACION) AS NOMBRE_PROVEEDOR,
    (SELECT RTRIM (
                 XMLAGG (XMLELEMENT (e, B.CORREO || ', ')).
                 EXTRACT ('//text()'),
                 ', ')
         FROM OTM_CORREO_PROVEEDOR B
        WHERE B.IDENTIFICACION = A.IDENTIFICACION)
         AS CORREO_PROVEDOR,
    (SELECT RTRIM (
                 XMLAGG (XMLELEMENT (e, B.TELEFONO || ', ')).
                 EXTRACT ('//text()'),
                 ', ')
         FROM OTM_TELEFONO_PROVEEDOR B
        WHERE B.IDENTIFICACION = A.IDENTIFICACION)
         AS TELEFONOS_PROVEEDOR,
       (CASE ESTADO
          WHEN 'ENV' THEN 'Enviado'
          WHEN 'PEN' THEN 'Pendiente de Envío'
        END) DESC_ESTADO
FROM OTT_PROVEEDOR_COTIZACION A;

/*------------------------------------------------------------------------------------------------------------------------*/


CREATE OR REPLACE VIEW V_OTT_ADJUNTO_GESTION_COMPR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/10/2016 12:03:02 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ADJUNTO_GESTION_COMPR
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ID_ADJUNTO_GESTION_COMPR, 0) AS ID_ADJUNTO_GESTION_COMPR, 
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(NUMERO_ORDEN_COMPRA, '-') AS NUMERO_ORDEN_COMPRA, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_ADJUNTO_GESTION_COMPR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTT_ADJUNTO_GESTION_COMPRLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/10/2016 12:03:02 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ADJUNTO_GESTION_COMPR
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
	NVL(ID_ADJUNTO_GESTION_COMPR, 0) AS "ID_ADJUNTO_GESTION_COMPR", 
	NVL(ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO", 
	NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(NUMERO_ORDEN_COMPRA, '-') AS "NUMERO_ORDEN_COMPRA", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_ADJUNTO_GESTION_COMPR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW V_OTM_ENCARGADO_ALMACEN
AS
SELECT NVL (NUM_EMPLEADO, 0) AS NUM_EMPLEADO,
	  NVL (ID_UBICACION_ADMINISTRA, 0) AS ID_UBICACION_ADMINISTRA,
	  NVL (ROL, '-') AS ROL,
	  NVL (ESTADO, '-') AS ESTADO,
	  NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
		 AS TIME_STAMP,
	  NVL (USUARIO, '-') AS USUARIO
 FROM OTM_ENCARGADO_ALMACEN;
 
 /*------------------------------------------------------------------------------------------------------------------------*/
 
CREATE OR REPLACE VIEW V_OTM_ENCARGADO_ALMACENLST
AS
SELECT NVL (NUM_EMPLEADO, 0) AS "NUM_EMPLEADO",
	  NVL (ID_UBICACION_ADMINISTRA, 0) AS "ID_UBICACION_ADMINISTRA",
	  NVL (ROL, '-') AS "ROL",
	  NVL (ESTADO, '-') AS "ESTADO",
	  NVL (TIME_STAMP, TO_DATE ('01-01-1900', 'DD-MM-YYYY'))
		 AS "TIME_STAMP",
	  NVL (USUARIO, '-') AS "USUARIO",
	  (SELECT B.ID_PERSONAL
		 FROM EU_EMPLEADOS B
		WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
		 AS "ID_PERSONAL",
		 (SELECT B.NOMBRE
			FROM EU_EMPLEADOS B
		   WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
	  || ' '
	  || (SELECT B.APELLIDO1
			FROM EU_EMPLEADOS B
		   WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
	  || ' '
	  || (SELECT B.APELLIDO2
			FROM EU_EMPLEADOS B
		   WHERE B.NUM_EMPLEADO = A.NUM_EMPLEADO)
		 AS "NOMBRE_ENCARGADO",
	  (CASE ROL
		  WHEN 'ENC' THEN 'Encargado'
		  WHEN 'ALI' THEN 'Alistador'
		  WHEN 'DES' THEN 'Despachador'
	   END)
		 "DESC_ROL",
	  (CASE ESTADO
		  WHEN 'ACT' THEN 'Activo'
		  WHEN 'INA' THEN 'Inactivo'
	   END)
		 "DESC_ESTADO"
 FROM OTM_ENCARGADO_ALMACEN A;
 
 /*------------------------------------------------------------------------------------------------------------------------*/
 
 CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTL_DET_APROVISIONAMIENTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			11/01/2017 01:45:14 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_DET_APROVISIONAMIENTO
*/
SELECT
	NVL(ID_DET_APROVISIONAMIENTO, 0) AS ID_DET_APROVISIONAMIENTO, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD, 0) AS CANTIDAD, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_DET_APROVISIONAMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTL_DET_APROVISIONAMIENTOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			11/01/2017 01:45:14 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_DET_APROVISIONAMIENTO
*/
SELECT
	NVL(ID_DET_APROVISIONAMIENTO, 0) AS "ID_DET_APROVISIONAMIENTO", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(CANTIDAD, 0) AS "CANTIDAD", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_DET_APROVISIONAMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_APROVISIONAMIENTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			11/01/2017 01:45:14 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_APROVISIONAMIENTO
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_REGISTRO_SOLICITUD, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_APROVISIONAMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_APROVISIONAMIENTOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            11/01/2017 01:45:14 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_APROVISIONAMIENTO
    
    Autor:            Mauricio Salas Chaves
    Fecha:            20/01/2016
    Descripcion:     Se agrega el campo DESC_VIA_COMPRA, ESTADO_DESC
*/
SELECT
    NVL(ID_UBICACION, 0) AS ID_UBICACION, 
    NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
    NVL(ANNO, 0) AS ANNO, 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
    (SELECT DESCRIPCION FROM OTM_VIA_COMPRA_CONTRATO WHERE ID_VIA_COMPRA_CONTRATO = OTT_APROVISIONAMIENTO.ID_VIA_COMPRA_CONTRATO) AS "DESC_VIA_COMPRA",
    NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_REGISTRO_SOLICITUD, 
    NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
    NVL(ESTADO, '-') AS ESTADO, 
    CASE WHEN (ESTADO = 'CRE') THEN 'Creado' ELSE 'Completado' END AS "ESTADO_DESC",
    NVL (SUBSTR(OTT_APROVISIONAMIENTO.ANNO,3) || '-' || OTT_APROVISIONAMIENTO.NUMERO_GESTION, '-') AS NUMERO_GESTION_COMPRA,
    NVL(USUARIO, '-') AS USUARIO, 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_APROVISIONAMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_DET_APROVISIONAMIENTO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			11/01/2017 01:45:14 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DET_APROVISIONAMIENTO
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(CANTIDAD, 0) AS CANTIDAD, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(ESTADO, '-') AS ESTADO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DET_APROVISIONAMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_DET_APROVISIONAMIENTOLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			11/01/2017 01:45:14 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DET_APROVISIONAMIENTO
*/
SELECT
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
	NVL(CANTIDAD, 0) AS "CANTIDAD", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(ESTADO, '-') AS "ESTADO", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_DET_APROVISIONAMIENTO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTC_ESTADO_AJUSTE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/01/2017 01:44:49 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_AJUSTE
*/
SELECT
	NVL(ESTADO_AJUSTE, '-') AS ESTADO_AJUSTE, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION
FROM OTC_ESTADO_AJUSTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTC_ESTADO_AJUSTELst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/01/2017 01:44:49 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTC_ESTADO_AJUSTE
*/
SELECT
	NVL(ESTADO_AJUSTE, '-') AS "ESTADO_AJUSTE", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION"
FROM OTC_ESTADO_AJUSTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTL_TRAZABILIDAD_AJUSTE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/01/2017 02:01:22 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABILIDAD_AJUSTE
*/
SELECT
	NVL(ID_TRAZABILIDAD_AJUSTE, 0) AS ID_TRAZABILIDAD_AJUSTE, 
	NVL(ESTADO_AJUSTE, '-') AS ESTADO_AJUSTE, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_TRAZABILIDAD_AJUSTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTL_TRAZABILIDAD_AJUSTELst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/01/2017 02:01:22 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABILIDAD_AJUSTE
*/
SELECT
	NVL(ID_TRAZABILIDAD_AJUSTE, 0) AS "ID_TRAZABILIDAD_AJUSTE", 
	NVL(ESTADO_AJUSTE, '-') AS "ESTADO_AJUSTE", 
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_TRAZABILIDAD_AJUSTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_AJUSTE_INVENTARIO
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/01/2017 02:01:22 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_AJUSTE_INVENTARIO
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO_AJUSTE, 0) AS CONSECUTIVO_AJUSTE, 
	NVL(ID_ALMACEN_BODEGA, 0) AS ID_ALMACEN_BODEGA, 
	NVL(ESTADO_AJUSTE, '-') AS ESTADO_AJUSTE, 
	NVL(TIPO_AJUSTE, '-') AS TIPO_AJUSTE, 
	NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_REGISTRO_SOLICITUD, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_AJUSTE_INVENTARIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_AJUSTE_INVENTARIOLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            24/01/2017 02:01:22 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_AJUSTE_INVENTARIO
    
    Autor:            Mauricio Salas Chaves
    Fecha:            24/01/2017
    Descripcion:     Se agregan los campos DESC_ESTADO, DESC_TIPO_AJUSTE, NUMERO_AJUSTE, ALMACEN_BODEGA
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(CONSECUTIVO_AJUSTE, 0) AS "CONSECUTIVO_AJUSTE", 
    NVL(ID_ALMACEN_BODEGA, 0) AS "ID_ALMACEN_BODEGA", 
    (SELECT DESCRIPCION FROM OTM_ALMACEN_BODEGA WHERE ID_ALMACEN_BODEGA = OTT_AJUSTE_INVENTARIO.ID_ALMACEN_BODEGA) AS "ALMACEN_BODEGA",
    NVL(ESTADO_AJUSTE, '-') AS "ESTADO_AJUSTE", 
    (SELECT DESCRIPCION FROM OTC_ESTADO_AJUSTE WHERE ESTADO_AJUSTE = OTT_AJUSTE_INVENTARIO.ESTADO_AJUSTE) AS "DESC_ESTADO",
    NVL(TIPO_AJUSTE, '-') AS "TIPO_AJUSTE", 
    CASE WHEN (TIPO_AJUSTE = 'IND') THEN 'Individual' WHEN  (TIPO_AJUSTE = 'GBL') THEN 'Global' ELSE 'Existencia' END AS "DESC_TIPO_AJUSTE",
    NVL(FECHA_REGISTRO_SOLICITUD, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_REGISTRO_SOLICITUD", 
    NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    (SUBSTR(ANNO,3,2) || '-' || CONSECUTIVO_AJUSTE) AS "NUMERO_AJUSTE"
FROM OTT_AJUSTE_INVENTARIO;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_DETALLE_AJUSTE
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			24/01/2017 02:01:22 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DETALLE_AJUSTE
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO_AJUSTE, 0) AS CONSECUTIVO_AJUSTE, 
	NVL(ID_MATERIAL, 0) AS ID_MATERIAL, 
	NVL(DIRECCION_AJUSTE, '-') AS DIRECCION_AJUSTE, 
	NVL(CANTIDAD, 0) AS CANTIDAD, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DETALLE_AJUSTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_DETALLE_AJUSTELst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            24/01/2017 02:01:22 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_DETALLE_AJUSTE
    
    Autor:            Mauricio Salas Chaves
    Fecha:            31/01/2017
    Descripcion:     Se agregan los campos DESC_MATERIAL, CANTIDAD_DISPONIBLE, DISPONIBLE, EXISTENCIA_POST, DIRECCION_DESC
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(CONSECUTIVO_AJUSTE, 0) AS "CONSECUTIVO_AJUSTE", 
    NVL(ID_MATERIAL, 0) AS "ID_MATERIAL", 
    (SELECT DESCRIPCION FROM OTM_MATERIAL WHERE ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = DETALLE_AJUSTE.ID_UBICACION) AS "DESC_MATERIAL",
    (SELECT CANTIDAD_DISPONIBLE FROM OTF_INVENTARIO WHERE ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = DETALLE_AJUSTE.ID_UBICACION AND ID_ALMACEN_BODEGA = (SELECT ID_ALMACEN_BODEGA FROM OTT_AJUSTE_INVENTARIO WHERE ID_UBICACION = DETALLE_AJUSTE.ID_UBICACION AND ANNO = DETALLE_AJUSTE.ANNO AND CONSECUTIVO_AJUSTE = DETALLE_AJUSTE.CONSECUTIVO_AJUSTE)) AS "CANTIDAD_DISPONIBLE",
    NVL((SELECT CANTIDAD_DISPONIBLE - CANTIDAD_RESERVADA FROM OTF_INVENTARIO WHERE ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = DETALLE_AJUSTE.ID_UBICACION AND ID_ALMACEN_BODEGA = (SELECT ID_ALMACEN_BODEGA FROM OTT_AJUSTE_INVENTARIO WHERE ID_UBICACION = DETALLE_AJUSTE.ID_UBICACION AND ANNO = DETALLE_AJUSTE.ANNO AND CONSECUTIVO_AJUSTE = DETALLE_AJUSTE.CONSECUTIVO_AJUSTE)),0) AS "DISPONIBLE",
    NVL(DIRECCION_AJUSTE, '-') AS "DIRECCION_AJUSTE", 
    CASE WHEN DIRECCION_AJUSTE = 'INC' THEN
        'Incremento'
    WHEN DIRECCION_AJUSTE = 'DEC' THEN
        'Decremento'
    END AS "DIRECCION_DESC",        
    NVL(CANTIDAD, 0) AS "CANTIDAD", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP", 
    CASE WHEN DIRECCION_AJUSTE = 'INC' THEN
        (SELECT
            (SELECT CANTIDAD_DISPONIBLE FROM OTF_INVENTARIO WHERE ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = DETALLE_AJUSTE.ID_UBICACION AND ID_ALMACEN_BODEGA = (SELECT ID_ALMACEN_BODEGA FROM OTT_AJUSTE_INVENTARIO WHERE ID_UBICACION = DETALLE_AJUSTE.ID_UBICACION AND ANNO = DETALLE_AJUSTE.ANNO AND CONSECUTIVO_AJUSTE = DETALLE_AJUSTE.CONSECUTIVO_AJUSTE))
            +
            (SELECT CANTIDAD FROM OTT_DETALLE_AJUSTE WHERE ID_UBICACION = DETALLE_AJUSTE.ID_UBICACION AND ANNO = DETALLE_AJUSTE.ANNO AND CONSECUTIVO_AJUSTE = DETALLE_AJUSTE.CONSECUTIVO_AJUSTE AND ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL)
        FROM DUAL) 
    WHEN DIRECCION_AJUSTE = 'DEC' THEN
        (SELECT
            (SELECT CANTIDAD_DISPONIBLE FROM OTF_INVENTARIO WHERE ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL AND ID_UBICACION_ADMINISTRA = DETALLE_AJUSTE.ID_UBICACION AND ID_ALMACEN_BODEGA = (SELECT ID_ALMACEN_BODEGA FROM OTT_AJUSTE_INVENTARIO WHERE ID_UBICACION = DETALLE_AJUSTE.ID_UBICACION AND ANNO = DETALLE_AJUSTE.ANNO AND CONSECUTIVO_AJUSTE = DETALLE_AJUSTE.CONSECUTIVO_AJUSTE))
            -
            (SELECT CANTIDAD FROM OTT_DETALLE_AJUSTE WHERE ID_UBICACION = DETALLE_AJUSTE.ID_UBICACION AND ANNO = DETALLE_AJUSTE.ANNO AND CONSECUTIVO_AJUSTE = DETALLE_AJUSTE.CONSECUTIVO_AJUSTE AND ID_MATERIAL = DETALLE_AJUSTE.ID_MATERIAL)
        FROM DUAL) 
    END AS "EXISTENCIA_POST"
FROM OTT_DETALLE_AJUSTE DETALLE_AJUSTE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_GESTION_INGRESO_MATER
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			01/02/2017 02:22:53 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_GESTION_INGRESO_MATER
*/
SELECT
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(ESTADO_GESTION_INGRESO, '-') AS ESTADO_GESTION_INGRESO, 
	NVL(IDENTIFICACION, '-') AS IDENTIFICACION, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(FECHA_INGRESO_REGISTRO, TO_DATE('01-01-1900','DD-MM-YYYY')) AS FECHA_INGRESO_REGISTRO, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_GESTION_INGRESO_MATER;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_GESTION_INGRESO_MATERLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            01/02/2017 02:22:53 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_GESTION_INGRESO_MATER
    
    Autor:            Mauricio Salas Chaves
    Fecha:            06 02 2017
    Descripcion:    Se agregan los campos DESC_ESTADO, NUMERO_GESTION_COMPRA
    
    Autor:            Mauricio Salas Chaves
    Fecha:            06 02 2017
    Descripcion:    Se agregan los campos DESC_VIA_COMPRA, NOMBRE_PROVEEDOR, RESPONSABLE
*/
SELECT
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    (SELECT DESCRIPCION FROM OTM_VIA_COMPRA_CONTRATO WHERE ID_VIA_COMPRA_CONTRATO = OTT_GESTION_INGRESO_MATER.ID_VIA_COMPRA_CONTRATO) AS "DESC_VIA_COMPRA",
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(CONSECUTIVO, 0) AS "CONSECUTIVO", 
    NVL(ESTADO_GESTION_INGRESO, '-') AS "ESTADO_GESTION_INGRESO", 
    (SELECT DESCRIPCION FROM  OTC_ESTADO_GESTION_INGRES WHERE OTT_GESTION_INGRESO_MATER.ESTADO_GESTION_INGRESO = ESTADO_GESTION_INGRESO) AS "DESC_ESTADO",
    NVL(IDENTIFICACION, '-') AS "IDENTIFICACION", 
    (SELECT NOMBRE FROM OTM_PROVEEDOR WHERE IDENTIFICACION = OTT_GESTION_INGRESO_MATER.IDENTIFICACION) AS "NOMBRE_PROVEEDOR",
    NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
    NVL(FECHA_INGRESO_REGISTRO, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "FECHA_INGRESO_REGISTRO", 
    NVL(USUARIO, '-') AS "USUARIO", 
    (SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS WHERE ID_PERSONAL = OTT_GESTION_INGRESO_MATER.USUARIO) AS "RESPONSABLE",
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    NVL (SUBSTR(ANNO,3) || '-' || NUMERO_GESTION || '-' || CONSECUTIVO, '-') AS "NUMERO_GESTION_COMPRA"    
FROM OTT_GESTION_INGRESO_MATER;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_ADJUNTO_GESTION_INGR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			01/02/2017 04:28:02 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ADJUNTO_GESTION_INGR
*/
SELECT
	NVL(ID_ADJUNTO_GESTION_INGR, 0) AS ID_ADJUNTO_GESTION_INGR, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(ID_TIPO_DOCUMENTO, 0) AS ID_TIPO_DOCUMENTO, 
	NVL(NUMERO_DOCUMENTO, '-') AS NUMERO_DOCUMENTO, 
	NVL(ARCHIVO, '') AS ARCHIVO, 
	NVL(NOMBRE_ARCHIVO, '-') AS NOMBRE_ARCHIVO, 
	NVL(DESCRIPCION, '-') AS DESCRIPCION, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_ADJUNTO_GESTION_INGR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_ADJUNTO_GESTION_INGRLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			01/02/2017 04:28:02 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_ADJUNTO_GESTION_INGR
*/
SELECT
	NVL(ID_ADJUNTO_GESTION_INGR, 0) AS "ID_ADJUNTO_GESTION_INGR", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
	NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(CONSECUTIVO, 0) AS "CONSECUTIVO", 
	NVL(ID_TIPO_DOCUMENTO, 0) AS "ID_TIPO_DOCUMENTO", 
	NVL(NUMERO_DOCUMENTO, '-') AS "NUMERO_DOCUMENTO", 
	NVL(ARCHIVO, '') AS "ARCHIVO", 
	NVL(NOMBRE_ARCHIVO, '-') AS "NOMBRE_ARCHIVO", 
	NVL(DESCRIPCION, '-') AS "DESCRIPCION", 
	NVL(USUARIO, '-') AS "USUARIO", 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTT_ADJUNTO_GESTION_INGR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_DETALLE_GESTION_INGR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			01/02/2017 04:28:02 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTT_DETALLE_GESTION_INGR
*/
SELECT
	NVL(ID_ADJUNTO_GESTION_INGR, 0) AS ID_ADJUNTO_GESTION_INGR, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(ID_LINEA_GESTION_COMPRA, 0) AS ID_LINEA_GESTION_COMPRA, 
	NVL(CANTIDAD_INGRESA, 0) AS CANTIDAD_INGRESA, 
	NVL(COSTO_INDIVIDUAL, 0) AS COSTO_INDIVIDUAL, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTT_DETALLE_GESTION_INGR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTT_DETALLE_GESTION_INGRLst
AS
/*
    Autor:            Generador de Código basado en objetos Oracle
    Fecha:            01/02/2017 04:28:02 p.m.
    Descripcion:        Vista para obtener los registros de la tabla OTT_DETALLE_GESTION_INGR
    
    Autor:            Mauricio Salas Chaves
    Fecha:            21 02 2017
    Descripcion:    Se agregan los campos NUMERO_OT, ID_MATERIAL_TABLA, DESC_MATERIAL, CANTIDAD_REQUERIDA, ID_DETALLE_MATERIAL
*/
SELECT
    NVL(ID_ADJUNTO_GESTION_INGR, 0) AS "ID_ADJUNTO_GESTION_INGR", 
    NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
    NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
    NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
    NVL(ANNO, 0) AS "ANNO", 
    NVL(ID_LINEA_GESTION_COMPRA, 0) AS "ID_LINEA_GESTION_COMPRA", 
    NVL(CANTIDAD_INGRESA, 0) AS "CANTIDAD_INGRESA", 
    NVL(COSTO_INDIVIDUAL, 0) AS "COSTO_INDIVIDUAL", 
    NVL(USUARIO, '-') AS "USUARIO", 
    NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP",
    NVL ((SELECT DM.ID_ORDEN_TRABAJO FROM OTT_DETALLE_MATERIAL DM
            WHERE DM.ID_DETALLE_MATERIAL = (SELECT ID_DETALLE_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
            NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA)),  '-')  AS "NUMERO_OT",
    CASE
        WHEN ((SELECT ID_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA) IS NOT NULL)
        THEN
            (SELECT ID_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA)
        ELSE
            (SELECT ID_MATERIAL FROM OTT_DETALLE_MATERIAL WHERE ID_DETALLE_MATERIAL = (SELECT ID_DETALLE_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA))
    END AS "ID_MATERIAL_TABLA",
    CASE
        WHEN ((SELECT ID_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA) IS NOT NULL)
        THEN
            (SELECT DESCRIPCION FROM OTM_MATERIAL WHERE ID_MATERIAL = (SELECT ID_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA))
        ELSE
            (SELECT DESCRIPCION FROM OTM_MATERIAL WHERE ID_MATERIAL = (SELECT ID_MATERIAL FROM OTT_DETALLE_MATERIAL WHERE ID_DETALLE_MATERIAL = (SELECT ID_DETALLE_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA)))
    END AS "DESC_MATERIAL",
    (SELECT CANTIDAD_SOLICITADA FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA) AS "CANTIDAD_REQUERIDA",
    NVL((SELECT ID_DETALLE_MATERIAL FROM OTT_LINEA_GESTION_COMPRA WHERE ID_UBICACION = DETALLE.ID_UBICACION AND ID_VIA_COMPRA_CONTRATO = DETALLE.ID_VIA_COMPRA_CONTRATO AND
                    NUMERO_GESTION = DETALLE.NUMERO_GESTION AND ANNO = DETALLE.ANNO AND ID_LINEA_GESTION_COMPRA = DETALLE.ID_LINEA_GESTION_COMPRA), 0) AS "ID_DETALLE_MATERIAL"
FROM OTT_DETALLE_GESTION_INGR DETALLE;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTL_TRAZABIL_GESTION_INGR
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			20/02/2017 04:13:16 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABIL_GESTION_INGR
*/
SELECT
	NVL(ID_TRAZABIL_GESTION_INGR, 0) AS ID_TRAZABIL_GESTION_INGR, 
	NVL(ID_UBICACION, 0) AS ID_UBICACION, 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS ID_VIA_COMPRA_CONTRATO, 
	NVL(NUMERO_GESTION, 0) AS NUMERO_GESTION, 
	NVL(ANNO, 0) AS ANNO, 
	NVL(CONSECUTIVO, 0) AS CONSECUTIVO, 
	NVL(ESTADO_GESTION_INGRESO, '-') AS ESTADO_GESTION_INGRESO, 
	NVL(OBSERVACIONES, '-') AS OBSERVACIONES, 
	NVL(USUARIO, '-') AS USUARIO, 
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS TIME_STAMP
FROM OTL_TRAZABIL_GESTION_INGR;

/*------------------------------------------------------------------------------------------------------------------------*/

CREATE OR REPLACE VIEW ORDENES_TRABAJO.V_OTL_TRAZABIL_GESTION_INGRLst
AS
/*
	Autor:			Generador de Código basado en objetos Oracle
	Fecha:			20/02/2017 04:13:16 p.m.
	Descripcion:		Vista para obtener los registros de la tabla OTL_TRAZABIL_GESTION_INGR
	
	Autor:            Mauricio Salas Chaves
    Fecha:            20 02 2017
    Descripcion:    Se agregan los campos DESC_ESTADO, RESPONSABLE
*/
SELECT
	NVL(ID_TRAZABIL_GESTION_INGR, 0) AS "ID_TRAZABIL_GESTION_INGR", 
	NVL(ID_UBICACION, 0) AS "ID_UBICACION", 
	NVL(ID_VIA_COMPRA_CONTRATO, 0) AS "ID_VIA_COMPRA_CONTRATO", 
	NVL(NUMERO_GESTION, 0) AS "NUMERO_GESTION", 
	NVL(ANNO, 0) AS "ANNO", 
	NVL(CONSECUTIVO, 0) AS "CONSECUTIVO", 
	NVL(ESTADO_GESTION_INGRESO, '-') AS "ESTADO_GESTION_INGRESO", 
	(SELECT DESCRIPCION FROM  OTC_ESTADO_GESTION_INGRES WHERE ESTADO_GESTION_INGRESO = TRAZABILIDAD.ESTADO_GESTION_INGRESO) AS "DESC_ESTADO",
	NVL(OBSERVACIONES, '-') AS "OBSERVACIONES", 
	NVL(USUARIO, '-') AS "USUARIO", 
	(SELECT NOMBRE || ' ' || APELLIDO1 || ' ' || APELLIDO2 FROM EU_EMPLEADOS WHERE ID_PERSONAL = TRAZABILIDAD.USUARIO) AS "RESPONSABLE",
	NVL(TIME_STAMP, TO_DATE('01-01-1900','DD-MM-YYYY')) AS "TIME_STAMP"
FROM OTL_TRAZABIL_GESTION_INGR TRAZABILIDAD;

/*------------------------------------------------------------------------------------------------------------------------*/